terraform_version = "1.0.3"

planned_values = {
	"outputs": {},
	"resources": {
		"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.ec2_policy": {
			"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.ec2_policy",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "ec2_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				"description": "This policy allows lambda function to access emr",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				"name":        "bkun-dgea-prod1-emr-availability-ec2-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DeleteNetworkInterface\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MB444LTGUX",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.emr_policy": {
			"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.emr_policy",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "emr_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"description": "This policy allows lambda function to check available emr cluster for data migration",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"name":        "bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:ListClusters\",\n                \"elasticmapreduce:DescribeCluster\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
				"policy_id":   "ANPAZFZ6IW6MMH7Z3WONP",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda": {
			"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "iam_for_lambda",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role",
			"values": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-16T09:48:26Z",
				"description":           "Created this role to for lambda function to check EMR cluster availability",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-check-data-migration-emr-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-check-data-migration-emr-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"unique_id": "AROAZFZ6IW6MHC55G5HJD",
			},
		},
		"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.ec2-attach": {
			"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.ec2-attach",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "ec2-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826684700000001",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
			},
		},
		"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.emr-attach": {
			"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.emr-attach",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "emr-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826695100000003",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
			},
		},
		"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_cloudwatch_log_group.this": {
			"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_cloudwatch_log_group.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_cloudwatch_log_group",
			"values": {
				"arn":               "arn:aws:logs:us-east-1:630953916312:log-group:/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"id":                "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"kms_key_id":        "",
				"name":              "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"name_prefix":       null,
				"retention_in_days": 14,
				"tags":              {},
				"tags_all":          {},
			},
		},
		"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_function.this": {
			"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_function.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_lambda_function",
			"values": {
				"arn": "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"code_signing_config_arn": "",
				"dead_letter_config":      [],
				"description":             "",
				"environment": [
					{
						"variables": {
							"function_name": "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						},
					},
				],
				"file_system_config": [],
				"filename":           null,
				"function_name":      "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"handler":            "lambda_function.lambda_handler",
				"id":                 "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"image_config":       [],
				"image_uri":          "",
				"invoke_arn":         "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability/invocations",
				"kms_key_arn":        "",
				"last_modified":      "2021-08-16T16:37:35.239+0000",
				"layers": [
					"arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
				],
				"memory_size":                    128,
				"package_type":                   "Zip",
				"publish":                        false,
				"qualified_arn":                  "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability:$LATEST",
				"reserved_concurrent_executions": -1,
				"role":                        "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
				"runtime":                     "python3.7",
				"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
				"s3_key":                      "terraform/lambda/bkun-dgea-check-data-migration-emr-cluster-availability.zip",
				"s3_object_version":           "",
				"signing_job_arn":             "",
				"signing_profile_version_arn": "",
				"source_code_hash":            "DX5uA+ILb+mwRvJEdtpWOpWXvULt+Ynwje7Ma4zo46E=",
				"source_code_size":            901,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"timeout":  15,
				"timeouts": null,
				"tracing_config": [
					{
						"mode": "PassThrough",
					},
				],
				"version": "$LATEST",
				"vpc_config": [
					{
						"security_group_ids": [
							"sg-09fbd003ca2ca62c2",
						],
						"subnet_ids": [
							"subnet-0f1651bc0380a3db1",
						],
						"vpc_id": "vpc-05e9bae323d6ed989",
					},
				],
			},
		},
		"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_layer_version.lambda_layer": {
			"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_layer_version.lambda_layer",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "lambda_layer",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_lambda_layer_version",
			"values": {
				"arn": "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
				"compatible_runtimes": [
					"python3.7",
				],
				"created_date":                "2021-08-16T09:48:27.554+0000",
				"description":                 "",
				"filename":                    null,
				"id":                          "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
				"layer_arn":                   "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging",
				"layer_name":                  "bu_logging",
				"license_info":                "",
				"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
				"s3_key":                      "terraform/lambda/bu_logging.zip",
				"s3_object_version":           "",
				"signing_job_arn":             "",
				"signing_profile_version_arn": "",
				"source_code_hash":            "ptDU1VcUhZI1wSaCdnDVw3DkIBuW3iBAKFsfX89MbzQ=",
				"source_code_size":            1214,
				"version":                     "25",
			},
		},
		"module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data.aws_sfn_state_machine.this": {
			"address":        "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data.aws_sfn_state_machine.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_sfn_state_machine",
			"values": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "\n{\n  \"Comment\": \"Step function to run the snappy compression on mask_out data\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/bkun_dgea_flat_file_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.backupDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToRedacted\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.redactedDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToConf\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_conf.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.redactedDestination\"\n            },\n            {\n              \"Arg5.$\": \"$.confDestination\"\n            }\n          ]\n        }\n      },\n      \"Next\": \"Check_EMR_Cluster\"\n    },\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n        \"data-source.$\": \"$.EMRClusterType\"\n          }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n      \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",\n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/ingestion/bkun_dgea_data_ingestion_bootstrap.sh\"\n            }\n          }\n        ],\n        \"Tags\": [\n{\n\"Key\": \"ApplicationID\",\n\"Value\": \"0\"\n},\n{\n\"Key\": \"ApplicationName\",\n\"Value\": \"Data-Processing\"\n},\n{\n\"Key\": \"ApplicationRole\",\n\"Value\": \"\"\n},\n{\n\"Key\": \"BusinessLine\",\n\"Value\": \"Data Governance And Eprise. Arch\"\n},\n{\n\"Key\": \"Name\",\n \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\"\n},\n{\n\"Key\": \"CostCenter\",\n\"Value\": \"1006703\"\n},\n{\n\"Key\": \"Environment\",\n\"Value\": \"Test QA\"\n},\n{\n\"Key\": \"ProjectID\",\n\"Value\": \"PRJ0010800\"\n},\n{\n\"Key\": \"Tier\",\n\"Value\": \"Not Applicable\"\n},\n{\n\"Key\": \"BackupTier\",\n\"Value\": \"NA\"\n},\n{\n\"Key\": \"Application\",\n\"Value.$\": \"$.EMRClusterType\"\n}\n],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\": \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2KeyName\": \"DP-UAT-EMR\",\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-master\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-core\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Execute_Prequisite\"\n    },\n    \"Execute_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.execprereqResult\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"flat_file_masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"flat_file_masked_out_data_backup\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_redacted\"\n    },\n    \"flat_file_masked_out_data_to_redacted\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_redacted_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToRedacted.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_conf\"\n    },\n    \"flat_file_masked_out_data_to_conf\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_conf_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToConf.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-copy-flat-file-maskout-data",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "security_config",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_emr_security_configuration",
			"values": {
				"configuration": "{\n  \"EncryptionConfiguration\": {\n    \"AtRestEncryptionConfiguration\": {\n      \"S3EncryptionConfiguration\": {\n        \"EncryptionMode\": \"SSE-KMS\",\n        \"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\"Overrides\" : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n      }\n    },\n    \"EnableInTransitEncryption\": false,\n    \"EnableAtRestEncryption\": true\n  }\n}\n",
				"creation_date": "2021-08-16T09:48:26Z",
				"id":            "bkun-dgea-prod1-data-migration-security-configuration",
				"name":          "bkun-dgea-prod1-data-migration-security-configuration",
				"name_prefix":   null,
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "emr-ec2-instance-profile",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_instance_profile",
			"values": {
				"arn":         "arn:aws:iam::630953916312:instance-profile/bkun-dgea-prod1-data-migration-ec2-role",
				"create_date": "2021-08-16T09:48:26Z",
				"id":          "bkun-dgea-prod1-data-migration-ec2-role",
				"name":        "bkun-dgea-prod1-data-migration-ec2-role",
				"name_prefix": null,
				"path":        "/",
				"role":        "bkun-dgea-prod1-data-migration-ec2-role",
				"tags":        {},
				"tags_all":    {},
				"unique_id":   "AIPAZFZ6IW6MD7GYAEMLG",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2_dynamodb_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"description": "This policy allows Ec2 instances of EMR cluster to access dyanmodb.",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"name":        "bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:PutItem\",\n                \"dynamodb:UpdateItem\",\n                \"dynamodb:GetRecords\"\n            ],\n            \"Resource\": [\n                \"arn:aws:dynamodb:us-east-1:630953916312:table/bkun-dgea-email-config\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:ListTables\",\n                \"dynamodb:ListStreams\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
				"policy_id":   "ANPAZFZ6IW6MDSEQYSM6C",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "kms_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
				"description": "This policy allows Ec2 instances of EMR cluster to access kms key",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
				"name":        "bkun-dgea-prod1-ec2-kms-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n                \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\t\t\"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\t\t\t\t\n            ]\n        }\n    ]\n}",
				"policy_id":   "ANPAZFZ6IW6MEEQHKRBGJ",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "s3_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
				"description": "This policy allows Ec2 instances of EMR cluster to access s3 bucket",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
				"name":        "bkun-dgea-prod1-ec2-s3-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:DeleteObjectVersion\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:RestoreObject\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:PutBucketLogging\",\n                \"s3:GetObjectTagging\",\n                \"s3:DeleteObject\",\n                \"s3:PutBucketVersioning\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\"\n            ]\n        },\n                             {\n            \"Sid\": \"VisualEditor2\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:GetObjectTagging\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n                             {\n            \"Sid\": \"s3logpolicy\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:PutObject\",\n            \"Resource\": \"arn:aws:s3:::aws-logs-<account_id>-<region>/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor3\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:*\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::*bkun-script/*\",\n                \"arn:aws:s3:::*bkun-script*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce/*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce*\"\n            ]\n        }\n    ]\n}\n\n\n",
				"policy_id":   "ANPAZFZ6IW6MNFSOO4QHU",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "emr_ec2_role",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role",
			"values": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-16T09:48:26Z",
				"description":           "",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-data-migration-ec2-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
					"arn:aws:iam::aws:policy/AmazonEC2FullAccess",
					"arn:aws:iam::aws:policy/SecretsManagerReadWrite",
					"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-data-migration-ec2-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"unique_id": "AROAZFZ6IW6MLZ2CV34KP",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "emr_sfn_role",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role",
			"values": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"elasticmapreduce.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-16T09:48:26Z",
				"description":           "",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-data-migration-emr-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-data-migration-emr-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-emr-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-emr-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"unique_id": "AROAZFZ6IW6MPTZUT2GY6",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-access-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826836800000006",
				"policy_arn": "arn:aws:iam::aws:policy/AmazonEC2FullAccess",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-dynamodb-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-2021081609482684370000000a",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-glue-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826834100000004",
				"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-kms-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826835500000005",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-secretmanager-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826841600000008",
				"policy_arn": "arn:aws:iam::aws:policy/SecretsManagerReadWrite",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-stepfunction-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826840000000007",
				"policy_arn": "arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "emr-access-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-emr-role-20210816094826688000000002",
				"policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
				"role":       "bkun-dgea-prod1-data-migration-emr-role",
			},
		},
		"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach[0]": {
			"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "s3_attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826843400000009",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_alias.this[0]": {
			"address":        "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_alias.this[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_kms_alias",
			"values": {
				"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				"id":             "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				"name":           "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				"name_prefix":    null,
				"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
				"target_key_id":  "845fe34e-b873-4118-b185-d5824e8b2206",
			},
		},
		"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this[0]": {
			"address":        "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_kms_key",
			"values": {
				"arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
				"customer_master_key_spec": "SYMMETRIC_DEFAULT",
				"deletion_window_in_days":  30,
				"description":              "S3 Bucket Key",
				"enable_key_rotation":      false,
				"id":         "845fe34e-b873-4118-b185-d5824e8b2206",
				"is_enabled": true,
				"key_id":     "845fe34e-b873-4118-b185-d5824e8b2206",
				"key_usage":  "ENCRYPT_DECRYPT",
				"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				},
			},
		},
		"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket.this": {
			"address":        "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_s3_bucket",
			"values": {
				"acceleration_status": "",
				"acl":                         "private",
				"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"bucket":                      "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"bucket_domain_name":          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
				"bucket_prefix":               null,
				"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
				"cors_rule":                   [],
				"force_destroy":               false,
				"grant":                       [],
				"hosted_zone_id":              "Z3AQBSTGFYJSTF",
				"id":                          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"lifecycle_rule":              [],
				"logging":                     [],
				"object_lock_configuration":   [],
				"policy":                      null,
				"region":                      "us-east-1",
				"replication_configuration":   [],
				"request_payer":               "BucketOwner",
				"server_side_encryption_configuration": [
					{
						"rule": [
							{
								"apply_server_side_encryption_by_default": [
									{
										"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
										"sse_algorithm":     "aws:kms",
									},
								],
								"bucket_key_enabled": false,
							},
						],
					},
				],
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				},
				"versioning": [
					{
						"enabled":    true,
						"mfa_delete": false,
					},
				],
				"website":          [],
				"website_domain":   null,
				"website_endpoint": null,
			},
		},
		"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket_policy.this": {
			"address":        "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket_policy.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_s3_bucket_policy",
			"values": {
				"bucket": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"id":     "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
			},
		},
		"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_alias.this[0]": {
			"address":        "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_alias.this[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_kms_alias",
			"values": {
				"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				"id":             "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				"name":           "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				"name_prefix":    null,
				"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"target_key_id":  "2a3b6b07-2625-4e7d-b168-5d40dace358a",
			},
		},
		"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this[0]": {
			"address":        "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_kms_key",
			"values": {
				"arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"customer_master_key_spec": "SYMMETRIC_DEFAULT",
				"deletion_window_in_days":  30,
				"description":              "S3 Bucket Key",
				"enable_key_rotation":      false,
				"id":         "2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"is_enabled": true,
				"key_id":     "2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"key_usage":  "ENCRYPT_DECRYPT",
				"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				},
			},
		},
		"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket.this": {
			"address":        "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_s3_bucket",
			"values": {
				"acceleration_status": "",
				"acl":                         "private",
				"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"bucket":                      "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"bucket_domain_name":          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
				"bucket_prefix":               null,
				"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
				"cors_rule":                   [],
				"force_destroy":               false,
				"grant":                       [],
				"hosted_zone_id":              "Z3AQBSTGFYJSTF",
				"id":                          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"lifecycle_rule":              [],
				"logging":                     [],
				"object_lock_configuration":   [],
				"policy":                      null,
				"region":                      "us-east-1",
				"replication_configuration":   [],
				"request_payer":               "BucketOwner",
				"server_side_encryption_configuration": [
					{
						"rule": [
							{
								"apply_server_side_encryption_by_default": [
									{
										"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
										"sse_algorithm":     "aws:kms",
									},
								],
								"bucket_key_enabled": false,
							},
						],
					},
				],
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				},
				"versioning": [
					{
						"enabled":    true,
						"mfa_delete": false,
					},
				],
				"website":          [],
				"website_domain":   null,
				"website_endpoint": null,
			},
		},
		"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket_policy.this": {
			"address":        "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket_policy.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_s3_bucket_policy",
			"values": {
				"bucket": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"id":     "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
			},
		},
		"module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function.aws_sfn_state_machine.this": {
			"address":        "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function.aws_sfn_state_machine.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_sfn_state_machine",
			"values": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "\n {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForFinalBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_total_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetBackupPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForDDLCreation\": {\n          \"Args.$\": \"$.DDLArgs\"\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_FinalData_Backup_Process\"\n    },\n     \"Run_FinalData_Backup_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_FinalData_Backup_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForFinalBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_DDL_Creation_Process\"\n    },\n    \"Run_DDL_Creation_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_DDL_Creation_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForDDLCreation.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-ddl-creation-step-function",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_cw_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"description": "This policy allows step function to send cloudwatch events",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogStreams\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogStream\",\n                \"logs:DescribeLogStreams\",\n                \"logs:PutRetentionPolicy\"\n            ],\n            \"Resource\": \"arn:aws:logs:*:*:log-group:/aws/states/bkun-dgea-prod1-historical-ingestion-emr-setup-stepfunction-Logs/*\"\n        },\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogGroups\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"logs:CreateLogGroup\",\n            \"Resource\": \"*\"\n        },\n\t\t{\n            \"Sid\": \"AllowAccessToCloudWatchkoi\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"cloudwatch:PutMetricAlarm\",\n                \"cloudwatch:DescribeInsightRules\",\n                \"cloudwatch:PutDashboard\",\n                \"cloudwatch:DescribeAlarmHistory\",\n                \"cloudwatch:ListDashboards\",\n                \"cloudwatch:DescribeAlarms\",\n                \"cloudwatch:EnableInsightRules\",\n                \"cloudwatch:GetMetricStatistics\",\n                \"cloudwatch:ListMetrics\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MACFVLGIAY",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_ec2_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"description": "This policy allows step function to set up EMR cluster",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:DescribeInstances\",\n                \"cloudwatch:DeleteAlarms\",\n                \"s3:Get*\",\n                \"s3:List*\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DescribeVolumeStatus\",\n                \"ec2:RevokeSecurityGroupEgress\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DescribeAccountAttributes\",\n                \"ec2:DescribeKeyPairs\",\n                \"iam:ListRolePolicies\",\n                \"ec2:DescribeNetworkAcls\",\n                \"ec2:DescribeRouteTables\",\n                \"ec2:DetachVolume\",\n                \"iam:GetRole\",\n                \"application-autoscaling:RegisterScalableTarget\",\n                \"ec2:CreateTags\",\n                \"ec2:DeleteNetworkInterface\",\n                \"ec2:RunInstances\",\n                \"application-autoscaling:DeleteScalingPolicy\",\n                \"ec2:DescribePrefixLists\",\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:CancelSpotInstanceRequests\",\n                \"cloudwatch:DescribeAlarms\",\n                \"application-autoscaling:PutScalingPolicy\",\n                \"ec2:DescribeVpcEndpoints\",\n                \"ec2:DescribeSubnets\",\n                \"iam:GetRolePolicy\",\n                \"ec2:RequestSpotInstances\",\n                \"ec2:DeleteTags\",\n                \"ec2:DescribeDhcpOptions\",\n                \"ec2:DescribeVpcEndpointServices\",\n                \"ec2:DescribeSpotInstanceRequests\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:DescribeVpcAttribute\",\n                \"ec2:DescribeSpotPriceHistory\",\n                \"iam:PassRole\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DescribeAvailabilityZones\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:AuthorizeSecurityGroupEgress\",\n                \"ec2:TerminateInstances\",\n                \"ec2:DetachNetworkInterface\",\n                \"application-autoscaling:Describe*\",\n                \"ec2:DescribeTags\",\n                \"iam:ListInstanceProfiles\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeImages\",\n                \"cloudwatch:PutMetricAlarm\",\n                \"ec2:DescribeVpcs\",\n                \"ec2:DeleteSecurityGroup\",\n                \"application-autoscaling:DeregisterScalableTarget\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MGL3MG5HQE",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_emr_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"description": "This policy allows step function to set up EMR cluster",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:RunJobFlow\",\n                \"elasticmapreduce:DescribeCluster\",\n                \"elasticmapreduce:TerminateJobFlows\",\n                \"elasticmapreduce:AddJobFlowSteps\",\n                \"elasticmapreduce:DescribeStep\",\n                \"elasticmapreduce:CancelSteps\",\n                \"elasticmapreduce:SetTerminationProtection\"\n            ],\n            \"Resource\": \"arn:aws:elasticmapreduce:*:*:cluster/*\"\n        },\n\t\t{\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": [\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role\",\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role\"\n            ]\n        }\n    ]\n}\n",
				"policy_id":   "ANPAZFZ6IW6MK7XJ3P4N3",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
				"description": "This policy provides basic permission for step function executions.",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
				"name":        "bkun-dgea-prod1-ingestion-stepfunction-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"EMREc2AccessForStepFunction\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"states:ListStateMachines\",\n                \"states:DescribeActivity\",\n                \"states:DescribeStateMachine\",\n                \"states:ListActivities\",\n                \"states:ListExecutions\",\n                \"states:UpdateStateMachine\",\n                \"states:DeleteStateMachine\",\n                \"states:StopExecution\",\n                \"states:DescribeStateMachineForExecution\",\n                \"states:SendTaskFailure\",\n                \"states:DescribeExecution\",\n                \"states:GetExecutionHistory\",\n                \"states:DeleteActivity\",\n                \"states:StartExecution\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"AllowAccessToPassRoleToEventsiuj\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": \"arn:aws:iam::*:role/*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:PassedToService\": \"events.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"events:PutTargets\",\n                \"events:PutRule\",\n                \"events:DescribeRule\"\n            ],\n            \"Resource\": [\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule\",\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventForEMRAddJobFlowStepsRule\"\n            ]\n        },\n        {\n            \"Action\": [\n                \"logs:*\",\n                \"iam:GetPolicy\",\n                \"iam:GetPolicyVersion\",\n                \"iam:GetRole\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/events.amazonaws.com/AWSServiceRoleForCloudWatchEvents*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"events.amazonaws.com\"\n                }\n            }\n        }\n    ]\n}\n\n\n",
				"policy_id":   "ANPAZFZ6IW6MAHDT27IUG",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_s3_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_policy",
			"values": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"description": "This policy allows step function to set up EMR cluster",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\",\n                \"s3:ListBucket\",\n                \"s3:PutObject\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor81\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::aws-logs-630953916312-us-east-1/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor1265\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MGZCFMI54G",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "iam_for_sfn",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role",
			"values": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-17T04:14:59Z",
				"description":           "",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-data-migration-stepfunction-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
					"arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-data-migration-stepfunction-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"unique_id": "AROAZFZ6IW6MJVO72SGC7",
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "lambda-access-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459515600000001",
				"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518000000004",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "step-cloudwatch-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518200000005",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "step-ec2-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516800000003",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "step-emr-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459519100000006",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach[0]": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach[0]",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "step-s3-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_iam_role_policy_attachment",
			"values": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516400000002",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this": {
			"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_sfn_state_machine",
			"values": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
				"creation_date": "2021-08-17T04:14:59Z",
				"definition":    "  {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Check_EMR_Cluster\",\n  \"States\": {\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n          \"data-source.$\": \"$.InputParam.EMRClusterType\"\n        }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n    \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-cluster', $.InputParam.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",        \n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/etl/bkun_dgea_etl_bootstrap_commands.sh\"\n            }\n          }\n       ],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n\t\"Tags\": [\n\t\t{\n            \"Key\": \"ApplicationID\",\n            \"Value\": \"0\"\n          },\n          {\n            \"Key\": \"ApplicationName\",\n            \"Value\": \"Data-Processing\"\n          },\n          {\n            \"Key\": \"ApplicationRole\",\n            \"Value\": \"\"\n          },\n\t\t  {\n            \"Key\": \"BusinessLine\",\n            \"Value\": \"Data Governance And Eprise. Arch\"\n          },\n          {\n            \"Key\": \"Name\",\n            \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-ingestion-emr-cluster', $.InputParam.EMRClusterType)\"\n          },\n\t\t  {\n            \"Key\": \"CostCenter\",\n            \"Value\": \"1006703\"\n          },\n          {\n            \"Key\": \"Environment\",\n            \"Value\": \"Test QA\"\n          },\n          {\n            \"Key\": \"ProjectID\",\n            \"Value\": \"PRJ0010800\"\n          },\n\t\t  {\n            \"Key\": \"Tier\",\n            \"Value\": \"Not Applicable\"\n          },\n\t\t  {\n            \"Key\": \"BackupTier\",\n            \"Value\": \"NA\"\n          },\n          {\n            \"Key\": \"Application\",\n            \"Value.$\": \"$.InputParam.EMRClusterType\"\n          },\n          {\n            \"Key\": \"ITContact\",\n            \"Value\": \"Haritha Nookala\"\n          },\n\t  {\n            \"Key\": \"Owner\",\n            \"Value\": \"Malory\"\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\" : \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-master', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-core', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.InputParam.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Run_AD_Script\"\n    },\n    \"Run_AD_Script\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Enable AD Integration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar\",\n            \"Args\": [\n              \"s3://bkun-script/emr-harden-amzn-linux-dp-uat-1_1.sh\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Execute_Prerequisites\"\n    },\n    \"Should_Execute_Prerequisites\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.EMRClusterType\",\n          \"StringEquals\": \"etl\",\n          \"Next\": \"Execute_ETL_Prequisite\"\n        },\n        {\n          \"Not\": {\n            \"Variable\": \"$.InputParam.EMRClusterType\",\n            \"StringEquals\": \"etl\"\n          },\n          \"Next\": \"Execute_Other_Prequisite\"\n        }\n      ]\n    },\n    \"Execute_ETL_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute ETL prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_etl_prerequisites_commands.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Execute_Other_Prequisite\": {\n      \"Type\": \"Pass\",\n      \"Result\": \"Execute_Other_Prequisite\",\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Process_Input_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.mergeResults.ClusterId\"\n      },\n      \"ResultPath\": \"$.processResults\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction.aws_sfn_state_machine.this": {
			"address":        "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction.aws_sfn_state_machine.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_sfn_state_machine",
			"values": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/start_job_execution.sh\"\n                    },\n                    {\n                        \"Arg3.$\": \"$.folderName\"\n                    },\n                    {\n                        \"Arg4.$\": \"$.workflowName\"\n                    },\n                    {\n                        \"Arg5.$\": \"$.executionTime\"\n                    },\n                    {\n                        \"Arg6.$\": \"$.UDFParameter\"\n                    },\n                    {\n                        \"Arg7\": \"prod1\"\n                    },\n                    {\n                        \"Arg8.$\": \"$.additionalParameter\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run ETL\"\n    },\n    \"Run ETL\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-etl-stepfunction",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy.aws_sfn_state_machine.this": {
			"address":        "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy.aws_sfn_state_machine.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_sfn_state_machine",
			"values": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
				"creation_date": "2021-08-17T05:19:14Z",
				"definition":    "\n{\n  \"Comment\": \"Step function to move maskOut data to landing layer\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForCopy\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/copy_masked_data_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.maskOutBackuptargetPath\"\n            }\n          ]\n        }\n\t\t}\n      },\n     \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"masked_out_data_backup\"\n    },\n    \"masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"copy_maskout_data_to_landing\"\n    },\n    \"copy_maskout_data_to_landing\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForCopy.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.snappyCopyResult\",\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-maskout-data-copy",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-maskout-data-copy",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-maskout-data-copy",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction.aws_sfn_state_machine.this": {
			"address":        "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction.aws_sfn_state_machine.this",
			"depends_on":     [],
			"deposed_key":    "",
			"index":          null,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"tainted":        false,
			"type":           "aws_sfn_state_machine",
			"values": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "\n{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_start_s3_to_redshift_migration.sh\"\n                    },\n                    {\n                         \"Arg3\": \"prod1\"\n                    },\n\n                    {\n                        \"Arg4.$\": \"$.InputFileName\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_S3_to_Redshift_Migration\"\n    },\n    \"Run_S3_to_Redshift_Migration\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_S3_to_Redshift_Migration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-s3-to-redshift-stepfunction",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
	},
}

variables = {
	"base_path": {
		"name":  "base_path",
		"value": "./s3/bkun-dgea-dp-source-artifacts",
	},
	"cluster_database_name": {
		"name":  "cluster_database_name",
		"value": "uat",
	},
	"cluster_master_password": {
		"name":  "cluster_master_password",
		"value": "Hellow$123WE",
	},
	"cluster_master_username": {
		"name":  "cluster_master_username",
		"value": "awsuser",
	},
	"cluster_name": {
		"name":  "cluster_name",
		"value": "datamart",
	},
	"cluster_node_type": {
		"name":  "cluster_node_type",
		"value": "dc2.8xlarge",
	},
	"cluster_number_of_nodes": {
		"name":  "cluster_number_of_nodes",
		"value": 5,
	},
	"create_kms_key": {
		"name":  "create_kms_key",
		"value": false,
	},
	"create_sfn_role": {
		"name":  "create_sfn_role",
		"value": true,
	},
	"di_dynamodb_policy_path": {
		"name":  "di_dynamodb_policy_path",
		"value": "./iam/lambda-function/cross-account.json",
	},
	"dynamodb_email_policy_path": {
		"name":  "dynamodb_email_policy_path",
		"value": "./iam/lambda-function/bkun-dgea-dynamodb-email-notification-handler/dynamodb_write.json",
	},
	"ec2_dynamodb_policy_path": {
		"name":  "ec2_dynamodb_policy_path",
		"value": "./iam/emr-role/ec2-dynamodb-policy.json",
	},
	"ec2_kms_policy_path": {
		"name":  "ec2_kms_policy_path",
		"value": "./iam/emr-role/kms.json",
	},
	"ec2_policy_path": {
		"name":  "ec2_policy_path",
		"value": "./iam/lambda-function/ec2.json",
	},
	"emr_policy_path": {
		"name":  "emr_policy_path",
		"value": "./iam/lambda-function/emr_cluster.json",
	},
	"encrypted": {
		"name":  "encrypted",
		"value": true,
	},
	"env": {
		"name":  "env",
		"value": "prod1",
	},
	"env_prefix": {
		"name":  "env_prefix",
		"value": "bkun-dgea",
	},
	"generic_policy_path": {
		"name":  "generic_policy_path",
		"value": "./iam/emr-role/generic-policy.json",
	},
	"partition_key": {
		"name":  "partition_key",
		"value": "id",
	},
	"ports": {
		"name": "ports",
		"value": {
			"5439": [
				"10.19.0.0/16",
				"192.168.104.0/21",
				"192.168.200.0/21",
				"10.0.0.0/8",
				"10.13.32.0/20",
				"10.13.35.134/32",
				"10.13.35.135/32",
				"10.44.0.0/16",
				"10.39.0.0/16",
			],
		},
	},
	"redshift_subnets": {
		"name": "redshift_subnets",
		"value": [
			"subnet-07911106ea5728129",
		],
	},
	"s3_key": {
		"name":  "s3_key",
		"value": "terraform/lambda",
	},
	"s3_policy_path": {
		"name":  "s3_policy_path",
		"value": "./iam/emr-role/s3.json",
	},
	"s3_source_bucket_policy_path": {
		"name":  "s3_source_bucket_policy_path",
		"value": "s3/bkun-dgea-dp-source-artifacts/source_bucket_policy.json",
	},
	"security_group_ids": {
		"name": "security_group_ids",
		"value": [
			"sg-09fbd003ca2ca62c2",
		],
	},
	"sfn_cw_policy_path": {
		"name":  "sfn_cw_policy_path",
		"value": "./iam/step-function/sfn-cw-policy.json",
	},
	"sfn_ec2_policy_path": {
		"name":  "sfn_ec2_policy_path",
		"value": "./iam/step-function/sfn-ec2-policy.json",
	},
	"sfn_emr_policy_path": {
		"name":  "sfn_emr_policy_path",
		"value": "./iam/step-function/sfn-emr-policy.json",
	},
	"sfn_policy_path": {
		"name":  "sfn_policy_path",
		"value": "./iam/step-function/policy.json",
	},
	"sfn_s3_policy_path": {
		"name":  "sfn_s3_policy_path",
		"value": "./iam/step-function/sfn-s3-policy.json",
	},
	"sfn_subnet_id": {
		"name":  "sfn_subnet_id",
		"value": "subnet-07911106ea5728129",
	},
	"subnet_ids": {
		"name": "subnet_ids",
		"value": [
			"subnet-0f1651bc0380a3db1",
		],
	},
	"tags": {
		"name": "tags",
		"value": {
			"ApplicationID":   "0",
			"ApplicationName": "Data-Processing",
			"ApplicationRole": "",
			"BackupTier":      "NA",
			"BusinessLine":    "Data Governance And Eprise. Arch",
			"CostCenter":      "1006703",
			"Environment":     "Test QA",
			"ProjectID":       "PRJ0010800",
			"Tier":            "Not Applicable",
		},
	},
	"vpc_id": {
		"name":  "vpc_id",
		"value": "vpc-05e9bae323d6ed989",
	},
}

resource_changes = {
	"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.ec2_policy": {
		"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.ec2_policy",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				"description": "This policy allows lambda function to access emr",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				"name":        "bkun-dgea-prod1-emr-availability-ec2-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DeleteNetworkInterface\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MB444LTGUX",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				"description": "This policy allows lambda function to access emr",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				"name":        "bkun-dgea-prod1-emr-availability-ec2-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DeleteNetworkInterface\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MB444LTGUX",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
		"name":           "ec2_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.emr_policy": {
		"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.emr_policy",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"description": "This policy allows lambda function to check available emr cluster for data migration",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"name":        "bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:ListClusters\",\n                \"elasticmapreduce:DescribeCluster\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
				"policy_id":   "ANPAZFZ6IW6MMH7Z3WONP",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"description": "This policy allows lambda function to check available emr cluster for data migration",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"name":        "bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:ListClusters\",\n                \"elasticmapreduce:DescribeCluster\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
				"policy_id":   "ANPAZFZ6IW6MMH7Z3WONP",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
		"name":           "emr_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda": {
		"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-16T09:48:26Z",
				"description":           "Created this role to for lambda function to check EMR cluster availability",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-check-data-migration-emr-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-check-data-migration-emr-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"unique_id": "AROAZFZ6IW6MHC55G5HJD",
			},
			"after_unknown": {},
			"before": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-16T09:48:26Z",
				"description":           "Created this role to for lambda function to check EMR cluster availability",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-check-data-migration-emr-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-check-data-migration-emr-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"unique_id": "AROAZFZ6IW6MHC55G5HJD",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
		"name":           "iam_for_lambda",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role",
	},
	"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.ec2-attach": {
		"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.ec2-attach",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826684700000001",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826684700000001",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
				"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
		"name":           "ec2-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.emr-attach": {
		"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.emr-attach",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826695100000003",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826695100000003",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
				"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
		"name":           "emr-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_cloudwatch_log_group.this": {
		"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_cloudwatch_log_group.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":               "arn:aws:logs:us-east-1:630953916312:log-group:/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"id":                "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"kms_key_id":        "",
				"name":              "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"name_prefix":       null,
				"retention_in_days": 14,
				"tags":              {},
				"tags_all":          {},
			},
			"after_unknown": {},
			"before": {
				"arn":               "arn:aws:logs:us-east-1:630953916312:log-group:/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"id":                "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"kms_key_id":        "",
				"name":              "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"name_prefix":       null,
				"retention_in_days": 14,
				"tags":              {},
				"tags_all":          {},
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_cloudwatch_log_group",
	},
	"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_function.this": {
		"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_function.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn": "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"code_signing_config_arn": "",
				"dead_letter_config":      [],
				"description":             "",
				"environment": [
					{
						"variables": {
							"function_name": "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						},
					},
				],
				"file_system_config": [],
				"filename":           null,
				"function_name":      "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"handler":            "lambda_function.lambda_handler",
				"id":                 "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"image_config":       [],
				"image_uri":          "",
				"invoke_arn":         "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability/invocations",
				"kms_key_arn":        "",
				"last_modified":      "2021-08-16T16:37:35.239+0000",
				"layers": [
					"arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
				],
				"memory_size":                    128,
				"package_type":                   "Zip",
				"publish":                        false,
				"qualified_arn":                  "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability:$LATEST",
				"reserved_concurrent_executions": -1,
				"role":                        "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
				"runtime":                     "python3.7",
				"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
				"s3_key":                      "terraform/lambda/bkun-dgea-check-data-migration-emr-cluster-availability.zip",
				"s3_object_version":           "",
				"signing_job_arn":             "",
				"signing_profile_version_arn": "",
				"source_code_hash":            "DX5uA+ILb+mwRvJEdtpWOpWXvULt+Ynwje7Ma4zo46E=",
				"source_code_size":            901,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"timeout":  15,
				"timeouts": null,
				"tracing_config": [
					{
						"mode": "PassThrough",
					},
				],
				"version": "$LATEST",
				"vpc_config": [
					{
						"security_group_ids": [
							"sg-09fbd003ca2ca62c2",
						],
						"subnet_ids": [
							"subnet-0f1651bc0380a3db1",
						],
						"vpc_id": "vpc-05e9bae323d6ed989",
					},
				],
			},
			"after_unknown": {},
			"before": {
				"arn": "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"code_signing_config_arn": "",
				"dead_letter_config":      [],
				"description":             "",
				"environment": [
					{
						"variables": {
							"function_name": "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						},
					},
				],
				"file_system_config": [],
				"filename":           null,
				"function_name":      "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"handler":            "lambda_function.lambda_handler",
				"id":                 "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
				"image_config":       [],
				"image_uri":          "",
				"invoke_arn":         "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability/invocations",
				"kms_key_arn":        "",
				"last_modified":      "2021-08-16T16:37:35.239+0000",
				"layers": [
					"arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
				],
				"memory_size":                    128,
				"package_type":                   "Zip",
				"publish":                        false,
				"qualified_arn":                  "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability:$LATEST",
				"reserved_concurrent_executions": -1,
				"role":                        "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
				"runtime":                     "python3.7",
				"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
				"s3_key":                      "terraform/lambda/bkun-dgea-check-data-migration-emr-cluster-availability.zip",
				"s3_object_version":           "",
				"signing_job_arn":             "",
				"signing_profile_version_arn": "",
				"source_code_hash":            "DX5uA+ILb+mwRvJEdtpWOpWXvULt+Ynwje7Ma4zo46E=",
				"source_code_size":            901,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Ingestion",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "6703",
					"Environment":     "uat",
					"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"ProjectID":       "PRJ0010800",
					"Tier":            "4",
				},
				"timeout":  15,
				"timeouts": null,
				"tracing_config": [
					{
						"mode": "PassThrough",
					},
				],
				"version": "$LATEST",
				"vpc_config": [
					{
						"security_group_ids": [
							"sg-09fbd003ca2ca62c2",
						],
						"subnet_ids": [
							"subnet-0f1651bc0380a3db1",
						],
						"vpc_id": "vpc-05e9bae323d6ed989",
					},
				],
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_lambda_function",
	},
	"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_layer_version.lambda_layer": {
		"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_layer_version.lambda_layer",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn": "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
				"compatible_runtimes": [
					"python3.7",
				],
				"created_date":                "2021-08-16T09:48:27.554+0000",
				"description":                 "",
				"filename":                    null,
				"id":                          "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
				"layer_arn":                   "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging",
				"layer_name":                  "bu_logging",
				"license_info":                "",
				"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
				"s3_key":                      "terraform/lambda/bu_logging.zip",
				"s3_object_version":           "",
				"signing_job_arn":             "",
				"signing_profile_version_arn": "",
				"source_code_hash":            "ptDU1VcUhZI1wSaCdnDVw3DkIBuW3iBAKFsfX89MbzQ=",
				"source_code_size":            1214,
				"version":                     "25",
			},
			"after_unknown": {},
			"before": {
				"arn": "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
				"compatible_runtimes": [
					"python3.7",
				],
				"created_date":                "2021-08-16T09:48:27.554+0000",
				"description":                 "",
				"filename":                    null,
				"id":                          "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
				"layer_arn":                   "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging",
				"layer_name":                  "bu_logging",
				"license_info":                "",
				"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
				"s3_key":                      "terraform/lambda/bu_logging.zip",
				"s3_object_version":           "",
				"signing_job_arn":             "",
				"signing_profile_version_arn": "",
				"source_code_hash":            "ptDU1VcUhZI1wSaCdnDVw3DkIBuW3iBAKFsfX89MbzQ=",
				"source_code_size":            1214,
				"version":                     "25",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
		"name":           "lambda_layer",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_lambda_layer_version",
	},
	"module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data.aws_sfn_state_machine.this": {
		"address": "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data.aws_sfn_state_machine.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "\n{\n  \"Comment\": \"Step function to run the snappy compression on mask_out data\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/bkun_dgea_flat_file_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.backupDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToRedacted\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.redactedDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToConf\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_conf.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.redactedDestination\"\n            },\n            {\n              \"Arg5.$\": \"$.confDestination\"\n            }\n          ]\n        }\n      },\n      \"Next\": \"Check_EMR_Cluster\"\n    },\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n        \"data-source.$\": \"$.EMRClusterType\"\n          }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n      \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",\n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/ingestion/bkun_dgea_data_ingestion_bootstrap.sh\"\n            }\n          }\n        ],\n        \"Tags\": [\n{\n\"Key\": \"ApplicationID\",\n\"Value\": \"0\"\n},\n{\n\"Key\": \"ApplicationName\",\n\"Value\": \"Data-Processing\"\n},\n{\n\"Key\": \"ApplicationRole\",\n\"Value\": \"\"\n},\n{\n\"Key\": \"BusinessLine\",\n\"Value\": \"Data Governance And Eprise. Arch\"\n},\n{\n\"Key\": \"Name\",\n \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\"\n},\n{\n\"Key\": \"CostCenter\",\n\"Value\": \"1006703\"\n},\n{\n\"Key\": \"Environment\",\n\"Value\": \"Test QA\"\n},\n{\n\"Key\": \"ProjectID\",\n\"Value\": \"PRJ0010800\"\n},\n{\n\"Key\": \"Tier\",\n\"Value\": \"Not Applicable\"\n},\n{\n\"Key\": \"BackupTier\",\n\"Value\": \"NA\"\n},\n{\n\"Key\": \"Application\",\n\"Value.$\": \"$.EMRClusterType\"\n}\n],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\": \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2KeyName\": \"DP-UAT-EMR\",\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-master\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-core\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Execute_Prequisite\"\n    },\n    \"Execute_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.execprereqResult\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"flat_file_masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"flat_file_masked_out_data_backup\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_redacted\"\n    },\n    \"flat_file_masked_out_data_to_redacted\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_redacted_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToRedacted.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_conf\"\n    },\n    \"flat_file_masked_out_data_to_conf\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_conf_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToConf.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-copy-flat-file-maskout-data",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
			"after_unknown": {},
			"before": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "\n{\n  \"Comment\": \"Step function to run the snappy compression on mask_out data\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/bkun_dgea_flat_file_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.backupDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToRedacted\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.redactedDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToConf\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_conf.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.redactedDestination\"\n            },\n            {\n              \"Arg5.$\": \"$.confDestination\"\n            }\n          ]\n        }\n      },\n      \"Next\": \"Check_EMR_Cluster\"\n    },\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n        \"data-source.$\": \"$.EMRClusterType\"\n          }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n      \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",\n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/ingestion/bkun_dgea_data_ingestion_bootstrap.sh\"\n            }\n          }\n        ],\n        \"Tags\": [\n{\n\"Key\": \"ApplicationID\",\n\"Value\": \"0\"\n},\n{\n\"Key\": \"ApplicationName\",\n\"Value\": \"Data-Processing\"\n},\n{\n\"Key\": \"ApplicationRole\",\n\"Value\": \"\"\n},\n{\n\"Key\": \"BusinessLine\",\n\"Value\": \"Data Governance And Eprise. Arch\"\n},\n{\n\"Key\": \"Name\",\n \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\"\n},\n{\n\"Key\": \"CostCenter\",\n\"Value\": \"1006703\"\n},\n{\n\"Key\": \"Environment\",\n\"Value\": \"Test QA\"\n},\n{\n\"Key\": \"ProjectID\",\n\"Value\": \"PRJ0010800\"\n},\n{\n\"Key\": \"Tier\",\n\"Value\": \"Not Applicable\"\n},\n{\n\"Key\": \"BackupTier\",\n\"Value\": \"NA\"\n},\n{\n\"Key\": \"Application\",\n\"Value.$\": \"$.EMRClusterType\"\n}\n],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\": \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2KeyName\": \"DP-UAT-EMR\",\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-master\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-core\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Execute_Prequisite\"\n    },\n    \"Execute_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.execprereqResult\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"flat_file_masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"flat_file_masked_out_data_backup\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_redacted\"\n    },\n    \"flat_file_masked_out_data_to_redacted\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_redacted_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToRedacted.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_conf\"\n    },\n    \"flat_file_masked_out_data_to_conf\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_conf_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToConf.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-copy-flat-file-maskout-data",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_sfn_state_machine",
	},
	"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config": {
		"address": "module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"configuration": "{\n  \"EncryptionConfiguration\": {\n    \"AtRestEncryptionConfiguration\": {\n      \"S3EncryptionConfiguration\": {\n        \"EncryptionMode\": \"SSE-KMS\",\n        \"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\"Overrides\" : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n      }\n    },\n    \"EnableInTransitEncryption\": false,\n    \"EnableAtRestEncryption\": true\n  }\n}\n",
				"creation_date": "2021-08-16T09:48:26Z",
				"id":            "bkun-dgea-prod1-data-migration-security-configuration",
				"name":          "bkun-dgea-prod1-data-migration-security-configuration",
				"name_prefix":   null,
			},
			"after_unknown": {},
			"before": {
				"configuration": "{\n  \"EncryptionConfiguration\": {\n    \"AtRestEncryptionConfiguration\": {\n      \"S3EncryptionConfiguration\": {\n        \"EncryptionMode\": \"SSE-KMS\",\n        \"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\"Overrides\" : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n      }\n    },\n    \"EnableInTransitEncryption\": false,\n    \"EnableAtRestEncryption\": true\n  }\n}\n",
				"creation_date": "2021-08-16T09:48:26Z",
				"id":            "bkun-dgea-prod1-data-migration-security-configuration",
				"name":          "bkun-dgea-prod1-data-migration-security-configuration",
				"name_prefix":   null,
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "security_config",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_emr_security_configuration",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:instance-profile/bkun-dgea-prod1-data-migration-ec2-role",
				"create_date": "2021-08-16T09:48:26Z",
				"id":          "bkun-dgea-prod1-data-migration-ec2-role",
				"name":        "bkun-dgea-prod1-data-migration-ec2-role",
				"name_prefix": null,
				"path":        "/",
				"role":        "bkun-dgea-prod1-data-migration-ec2-role",
				"tags":        {},
				"tags_all":    {},
				"unique_id":   "AIPAZFZ6IW6MD7GYAEMLG",
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:instance-profile/bkun-dgea-prod1-data-migration-ec2-role",
				"create_date": "2021-08-16T09:48:26Z",
				"id":          "bkun-dgea-prod1-data-migration-ec2-role",
				"name":        "bkun-dgea-prod1-data-migration-ec2-role",
				"name_prefix": null,
				"path":        "/",
				"role":        "bkun-dgea-prod1-data-migration-ec2-role",
				"tags":        {},
				"tags_all":    {},
				"unique_id":   "AIPAZFZ6IW6MD7GYAEMLG",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "emr-ec2-instance-profile",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_instance_profile",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"description": "This policy allows Ec2 instances of EMR cluster to access dyanmodb.",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"name":        "bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:PutItem\",\n                \"dynamodb:UpdateItem\",\n                \"dynamodb:GetRecords\"\n            ],\n            \"Resource\": [\n                \"arn:aws:dynamodb:us-east-1:630953916312:table/bkun-dgea-email-config\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:ListTables\",\n                \"dynamodb:ListStreams\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
				"policy_id":   "ANPAZFZ6IW6MDSEQYSM6C",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"description": "This policy allows Ec2 instances of EMR cluster to access dyanmodb.",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"name":        "bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:PutItem\",\n                \"dynamodb:UpdateItem\",\n                \"dynamodb:GetRecords\"\n            ],\n            \"Resource\": [\n                \"arn:aws:dynamodb:us-east-1:630953916312:table/bkun-dgea-email-config\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:ListTables\",\n                \"dynamodb:ListStreams\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
				"policy_id":   "ANPAZFZ6IW6MDSEQYSM6C",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "ec2_dynamodb_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
				"description": "This policy allows Ec2 instances of EMR cluster to access kms key",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
				"name":        "bkun-dgea-prod1-ec2-kms-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n                \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\t\t\"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\t\t\t\t\n            ]\n        }\n    ]\n}",
				"policy_id":   "ANPAZFZ6IW6MEEQHKRBGJ",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
				"description": "This policy allows Ec2 instances of EMR cluster to access kms key",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
				"name":        "bkun-dgea-prod1-ec2-kms-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n                \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\t\t\"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\t\t\t\t\n            ]\n        }\n    ]\n}",
				"policy_id":   "ANPAZFZ6IW6MEEQHKRBGJ",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "kms_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
				"description": "This policy allows Ec2 instances of EMR cluster to access s3 bucket",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
				"name":        "bkun-dgea-prod1-ec2-s3-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:DeleteObjectVersion\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:RestoreObject\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:PutBucketLogging\",\n                \"s3:GetObjectTagging\",\n                \"s3:DeleteObject\",\n                \"s3:PutBucketVersioning\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\"\n            ]\n        },\n                             {\n            \"Sid\": \"VisualEditor2\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:GetObjectTagging\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n                             {\n            \"Sid\": \"s3logpolicy\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:PutObject\",\n            \"Resource\": \"arn:aws:s3:::aws-logs-<account_id>-<region>/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor3\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:*\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::*bkun-script/*\",\n                \"arn:aws:s3:::*bkun-script*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce/*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce*\"\n            ]\n        }\n    ]\n}\n\n\n",
				"policy_id":   "ANPAZFZ6IW6MNFSOO4QHU",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
				"description": "This policy allows Ec2 instances of EMR cluster to access s3 bucket",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
				"name":        "bkun-dgea-prod1-ec2-s3-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:DeleteObjectVersion\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:RestoreObject\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:PutBucketLogging\",\n                \"s3:GetObjectTagging\",\n                \"s3:DeleteObject\",\n                \"s3:PutBucketVersioning\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\"\n            ]\n        },\n                             {\n            \"Sid\": \"VisualEditor2\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:GetObjectTagging\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n                             {\n            \"Sid\": \"s3logpolicy\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:PutObject\",\n            \"Resource\": \"arn:aws:s3:::aws-logs-<account_id>-<region>/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor3\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:*\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::*bkun-script/*\",\n                \"arn:aws:s3:::*bkun-script*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce/*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce*\"\n            ]\n        }\n    ]\n}\n\n\n",
				"policy_id":   "ANPAZFZ6IW6MNFSOO4QHU",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "s3_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-16T09:48:26Z",
				"description":           "",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-data-migration-ec2-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
					"arn:aws:iam::aws:policy/AmazonEC2FullAccess",
					"arn:aws:iam::aws:policy/SecretsManagerReadWrite",
					"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-data-migration-ec2-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"unique_id": "AROAZFZ6IW6MLZ2CV34KP",
			},
			"after_unknown": {},
			"before": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-16T09:48:26Z",
				"description":           "",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-data-migration-ec2-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
					"arn:aws:iam::aws:policy/AmazonEC2FullAccess",
					"arn:aws:iam::aws:policy/SecretsManagerReadWrite",
					"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-data-migration-ec2-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"unique_id": "AROAZFZ6IW6MLZ2CV34KP",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "emr_ec2_role",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"elasticmapreduce.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-16T09:48:26Z",
				"description":           "",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-data-migration-emr-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-data-migration-emr-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-emr-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-emr-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"unique_id": "AROAZFZ6IW6MPTZUT2GY6",
			},
			"after_unknown": {},
			"before": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"elasticmapreduce.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-16T09:48:26Z",
				"description":           "",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-data-migration-emr-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-data-migration-emr-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-emr-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-emr-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"unique_id": "AROAZFZ6IW6MPTZUT2GY6",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "emr_sfn_role",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826836800000006",
				"policy_arn": "arn:aws:iam::aws:policy/AmazonEC2FullAccess",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826836800000006",
				"policy_arn": "arn:aws:iam::aws:policy/AmazonEC2FullAccess",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "ec2-access-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-2021081609482684370000000a",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-2021081609482684370000000a",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "ec2-dynamodb-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826834100000004",
				"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826834100000004",
				"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "ec2-glue-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826835500000005",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826835500000005",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "ec2-kms-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826841600000008",
				"policy_arn": "arn:aws:iam::aws:policy/SecretsManagerReadWrite",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826841600000008",
				"policy_arn": "arn:aws:iam::aws:policy/SecretsManagerReadWrite",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "ec2-secretmanager-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826840000000007",
				"policy_arn": "arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826840000000007",
				"policy_arn": "arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "ec2-stepfunction-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-emr-role-20210816094826688000000002",
				"policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
				"role":       "bkun-dgea-prod1-data-migration-emr-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-emr-role-20210816094826688000000002",
				"policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
				"role":       "bkun-dgea-prod1-data-migration-emr-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "emr-access-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach[0]": {
		"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826843400000009",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826843400000009",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
				"role":       "bkun-dgea-prod1-data-migration-ec2-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-create-emr-roles",
		"name":           "s3_attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_alias.this[0]": {
		"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_alias.this[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				"id":             "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				"name":           "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				"name_prefix":    null,
				"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
				"target_key_id":  "845fe34e-b873-4118-b185-d5824e8b2206",
			},
			"after_unknown": {},
			"before": {
				"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				"id":             "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				"name":           "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				"name_prefix":    null,
				"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
				"target_key_id":  "845fe34e-b873-4118-b185-d5824e8b2206",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_kms_alias",
	},
	"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this[0]": {
		"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this[0]",
		"change": {
			"actions": [
				"update",
			],
			"after": {
				"arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
				"customer_master_key_spec": "SYMMETRIC_DEFAULT",
				"deletion_window_in_days":  30,
				"description":              "S3 Bucket Key",
				"enable_key_rotation":      false,
				"id":         "845fe34e-b873-4118-b185-d5824e8b2206",
				"is_enabled": true,
				"key_id":     "845fe34e-b873-4118-b185-d5824e8b2206",
				"key_usage":  "ENCRYPT_DECRYPT",
				"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				},
			},
			"after_unknown": {},
			"before": {
				"arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
				"customer_master_key_spec": "SYMMETRIC_DEFAULT",
				"deletion_window_in_days":  30,
				"description":              "S3 Bucket Key",
				"enable_key_rotation":      true,
				"id":         "845fe34e-b873-4118-b185-d5824e8b2206",
				"is_enabled": true,
				"key_id":     "845fe34e-b873-4118-b185-d5824e8b2206",
				"key_usage":  "ENCRYPT_DECRYPT",
				"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
				},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_kms_key",
	},
	"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket.this": {
		"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"acceleration_status": "",
				"acl":                         "private",
				"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"bucket":                      "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"bucket_domain_name":          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
				"bucket_prefix":               null,
				"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
				"cors_rule":                   [],
				"force_destroy":               false,
				"grant":                       [],
				"hosted_zone_id":              "Z3AQBSTGFYJSTF",
				"id":                          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"lifecycle_rule":              [],
				"logging":                     [],
				"object_lock_configuration":   [],
				"policy":                      null,
				"region":                      "us-east-1",
				"replication_configuration":   [],
				"request_payer":               "BucketOwner",
				"server_side_encryption_configuration": [
					{
						"rule": [
							{
								"apply_server_side_encryption_by_default": [
									{
										"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
										"sse_algorithm":     "aws:kms",
									},
								],
								"bucket_key_enabled": false,
							},
						],
					},
				],
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				},
				"versioning": [
					{
						"enabled":    true,
						"mfa_delete": false,
					},
				],
				"website":          [],
				"website_domain":   null,
				"website_endpoint": null,
			},
			"after_unknown": {},
			"before": {
				"acceleration_status": "",
				"acl":                         "private",
				"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"bucket":                      "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"bucket_domain_name":          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
				"bucket_prefix":               null,
				"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
				"cors_rule":                   [],
				"force_destroy":               false,
				"grant":                       [],
				"hosted_zone_id":              "Z3AQBSTGFYJSTF",
				"id":                          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"lifecycle_rule":              [],
				"logging":                     [],
				"object_lock_configuration":   [],
				"policy":                      null,
				"region":                      "us-east-1",
				"replication_configuration":   [],
				"request_payer":               "BucketOwner",
				"server_side_encryption_configuration": [
					{
						"rule": [
							{
								"apply_server_side_encryption_by_default": [
									{
										"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
										"sse_algorithm":     "aws:kms",
									},
								],
								"bucket_key_enabled": false,
							},
						],
					},
				],
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				},
				"versioning": [
					{
						"enabled":    true,
						"mfa_delete": false,
					},
				],
				"website":          [],
				"website_domain":   null,
				"website_endpoint": null,
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_s3_bucket",
	},
	"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket_policy.this": {
		"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket_policy.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"bucket": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"id":     "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
			},
			"after_unknown": {},
			"before": {
				"bucket": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"id":     "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
				"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_s3_bucket_policy",
	},
	"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_alias.this[0]": {
		"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_alias.this[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				"id":             "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				"name":           "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				"name_prefix":    null,
				"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"target_key_id":  "2a3b6b07-2625-4e7d-b168-5d40dace358a",
			},
			"after_unknown": {},
			"before": {
				"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				"id":             "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				"name":           "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				"name_prefix":    null,
				"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"target_key_id":  "2a3b6b07-2625-4e7d-b168-5d40dace358a",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_kms_alias",
	},
	"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this[0]": {
		"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this[0]",
		"change": {
			"actions": [
				"update",
			],
			"after": {
				"arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"customer_master_key_spec": "SYMMETRIC_DEFAULT",
				"deletion_window_in_days":  30,
				"description":              "S3 Bucket Key",
				"enable_key_rotation":      false,
				"id":         "2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"is_enabled": true,
				"key_id":     "2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"key_usage":  "ENCRYPT_DECRYPT",
				"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				},
			},
			"after_unknown": {},
			"before": {
				"arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"customer_master_key_spec": "SYMMETRIC_DEFAULT",
				"deletion_window_in_days":  30,
				"description":              "S3 Bucket Key",
				"enable_key_rotation":      true,
				"id":         "2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"is_enabled": true,
				"key_id":     "2a3b6b07-2625-4e7d-b168-5d40dace358a",
				"key_usage":  "ENCRYPT_DECRYPT",
				"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
				},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_kms_key",
	},
	"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket.this": {
		"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"acceleration_status": "",
				"acl":                         "private",
				"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"bucket":                      "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"bucket_domain_name":          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
				"bucket_prefix":               null,
				"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
				"cors_rule":                   [],
				"force_destroy":               false,
				"grant":                       [],
				"hosted_zone_id":              "Z3AQBSTGFYJSTF",
				"id":                          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"lifecycle_rule":              [],
				"logging":                     [],
				"object_lock_configuration":   [],
				"policy":                      null,
				"region":                      "us-east-1",
				"replication_configuration":   [],
				"request_payer":               "BucketOwner",
				"server_side_encryption_configuration": [
					{
						"rule": [
							{
								"apply_server_side_encryption_by_default": [
									{
										"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
										"sse_algorithm":     "aws:kms",
									},
								],
								"bucket_key_enabled": false,
							},
						],
					},
				],
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				},
				"versioning": [
					{
						"enabled":    true,
						"mfa_delete": false,
					},
				],
				"website":          [],
				"website_domain":   null,
				"website_endpoint": null,
			},
			"after_unknown": {},
			"before": {
				"acceleration_status": "",
				"acl":                         "private",
				"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"bucket":                      "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"bucket_domain_name":          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
				"bucket_prefix":               null,
				"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
				"cors_rule":                   [],
				"force_destroy":               false,
				"grant":                       [],
				"hosted_zone_id":              "Z3AQBSTGFYJSTF",
				"id":                          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"lifecycle_rule":              [],
				"logging":                     [],
				"object_lock_configuration":   [],
				"policy":                      null,
				"region":                      "us-east-1",
				"replication_configuration":   [],
				"request_payer":               "BucketOwner",
				"server_side_encryption_configuration": [
					{
						"rule": [
							{
								"apply_server_side_encryption_by_default": [
									{
										"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
										"sse_algorithm":     "aws:kms",
									},
								],
								"bucket_key_enabled": false,
							},
						],
					},
				],
				"tags": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				},
				"tags_all": {
					"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				},
				"versioning": [
					{
						"enabled":    true,
						"mfa_delete": false,
					},
				],
				"website":          [],
				"website_domain":   null,
				"website_endpoint": null,
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_s3_bucket",
	},
	"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket_policy.this": {
		"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket_policy.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"bucket": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"id":     "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
			},
			"after_unknown": {},
			"before": {
				"bucket": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"id":     "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
				"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_s3_bucket_policy",
	},
	"module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function.aws_sfn_state_machine.this": {
		"address": "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function.aws_sfn_state_machine.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "\n {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForFinalBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_total_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetBackupPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForDDLCreation\": {\n          \"Args.$\": \"$.DDLArgs\"\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_FinalData_Backup_Process\"\n    },\n     \"Run_FinalData_Backup_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_FinalData_Backup_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForFinalBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_DDL_Creation_Process\"\n    },\n    \"Run_DDL_Creation_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_DDL_Creation_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForDDLCreation.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-ddl-creation-step-function",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
			"after_unknown": {},
			"before": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "\n {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForFinalBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_total_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetBackupPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForDDLCreation\": {\n          \"Args.$\": \"$.DDLArgs\"\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_FinalData_Backup_Process\"\n    },\n     \"Run_FinalData_Backup_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_FinalData_Backup_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForFinalBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_DDL_Creation_Process\"\n    },\n    \"Run_DDL_Creation_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_DDL_Creation_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForDDLCreation.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-ddl-creation-step-function",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_sfn_state_machine",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"description": "This policy allows step function to send cloudwatch events",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogStreams\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogStream\",\n                \"logs:DescribeLogStreams\",\n                \"logs:PutRetentionPolicy\"\n            ],\n            \"Resource\": \"arn:aws:logs:*:*:log-group:/aws/states/bkun-dgea-prod1-historical-ingestion-emr-setup-stepfunction-Logs/*\"\n        },\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogGroups\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"logs:CreateLogGroup\",\n            \"Resource\": \"*\"\n        },\n\t\t{\n            \"Sid\": \"AllowAccessToCloudWatchkoi\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"cloudwatch:PutMetricAlarm\",\n                \"cloudwatch:DescribeInsightRules\",\n                \"cloudwatch:PutDashboard\",\n                \"cloudwatch:DescribeAlarmHistory\",\n                \"cloudwatch:ListDashboards\",\n                \"cloudwatch:DescribeAlarms\",\n                \"cloudwatch:EnableInsightRules\",\n                \"cloudwatch:GetMetricStatistics\",\n                \"cloudwatch:ListMetrics\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MACFVLGIAY",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"description": "This policy allows step function to send cloudwatch events",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogStreams\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogStream\",\n                \"logs:DescribeLogStreams\",\n                \"logs:PutRetentionPolicy\"\n            ],\n            \"Resource\": \"arn:aws:logs:*:*:log-group:/aws/states/bkun-dgea-prod1-historical-ingestion-emr-setup-stepfunction-Logs/*\"\n        },\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogGroups\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"logs:CreateLogGroup\",\n            \"Resource\": \"*\"\n        },\n\t\t{\n            \"Sid\": \"AllowAccessToCloudWatchkoi\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"cloudwatch:PutMetricAlarm\",\n                \"cloudwatch:DescribeInsightRules\",\n                \"cloudwatch:PutDashboard\",\n                \"cloudwatch:DescribeAlarmHistory\",\n                \"cloudwatch:ListDashboards\",\n                \"cloudwatch:DescribeAlarms\",\n                \"cloudwatch:EnableInsightRules\",\n                \"cloudwatch:GetMetricStatistics\",\n                \"cloudwatch:ListMetrics\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MACFVLGIAY",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "sfn_cw_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"description": "This policy allows step function to set up EMR cluster",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:DescribeInstances\",\n                \"cloudwatch:DeleteAlarms\",\n                \"s3:Get*\",\n                \"s3:List*\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DescribeVolumeStatus\",\n                \"ec2:RevokeSecurityGroupEgress\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DescribeAccountAttributes\",\n                \"ec2:DescribeKeyPairs\",\n                \"iam:ListRolePolicies\",\n                \"ec2:DescribeNetworkAcls\",\n                \"ec2:DescribeRouteTables\",\n                \"ec2:DetachVolume\",\n                \"iam:GetRole\",\n                \"application-autoscaling:RegisterScalableTarget\",\n                \"ec2:CreateTags\",\n                \"ec2:DeleteNetworkInterface\",\n                \"ec2:RunInstances\",\n                \"application-autoscaling:DeleteScalingPolicy\",\n                \"ec2:DescribePrefixLists\",\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:CancelSpotInstanceRequests\",\n                \"cloudwatch:DescribeAlarms\",\n                \"application-autoscaling:PutScalingPolicy\",\n                \"ec2:DescribeVpcEndpoints\",\n                \"ec2:DescribeSubnets\",\n                \"iam:GetRolePolicy\",\n                \"ec2:RequestSpotInstances\",\n                \"ec2:DeleteTags\",\n                \"ec2:DescribeDhcpOptions\",\n                \"ec2:DescribeVpcEndpointServices\",\n                \"ec2:DescribeSpotInstanceRequests\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:DescribeVpcAttribute\",\n                \"ec2:DescribeSpotPriceHistory\",\n                \"iam:PassRole\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DescribeAvailabilityZones\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:AuthorizeSecurityGroupEgress\",\n                \"ec2:TerminateInstances\",\n                \"ec2:DetachNetworkInterface\",\n                \"application-autoscaling:Describe*\",\n                \"ec2:DescribeTags\",\n                \"iam:ListInstanceProfiles\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeImages\",\n                \"cloudwatch:PutMetricAlarm\",\n                \"ec2:DescribeVpcs\",\n                \"ec2:DeleteSecurityGroup\",\n                \"application-autoscaling:DeregisterScalableTarget\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MGL3MG5HQE",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"description": "This policy allows step function to set up EMR cluster",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:DescribeInstances\",\n                \"cloudwatch:DeleteAlarms\",\n                \"s3:Get*\",\n                \"s3:List*\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DescribeVolumeStatus\",\n                \"ec2:RevokeSecurityGroupEgress\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DescribeAccountAttributes\",\n                \"ec2:DescribeKeyPairs\",\n                \"iam:ListRolePolicies\",\n                \"ec2:DescribeNetworkAcls\",\n                \"ec2:DescribeRouteTables\",\n                \"ec2:DetachVolume\",\n                \"iam:GetRole\",\n                \"application-autoscaling:RegisterScalableTarget\",\n                \"ec2:CreateTags\",\n                \"ec2:DeleteNetworkInterface\",\n                \"ec2:RunInstances\",\n                \"application-autoscaling:DeleteScalingPolicy\",\n                \"ec2:DescribePrefixLists\",\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:CancelSpotInstanceRequests\",\n                \"cloudwatch:DescribeAlarms\",\n                \"application-autoscaling:PutScalingPolicy\",\n                \"ec2:DescribeVpcEndpoints\",\n                \"ec2:DescribeSubnets\",\n                \"iam:GetRolePolicy\",\n                \"ec2:RequestSpotInstances\",\n                \"ec2:DeleteTags\",\n                \"ec2:DescribeDhcpOptions\",\n                \"ec2:DescribeVpcEndpointServices\",\n                \"ec2:DescribeSpotInstanceRequests\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:DescribeVpcAttribute\",\n                \"ec2:DescribeSpotPriceHistory\",\n                \"iam:PassRole\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DescribeAvailabilityZones\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:AuthorizeSecurityGroupEgress\",\n                \"ec2:TerminateInstances\",\n                \"ec2:DetachNetworkInterface\",\n                \"application-autoscaling:Describe*\",\n                \"ec2:DescribeTags\",\n                \"iam:ListInstanceProfiles\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeImages\",\n                \"cloudwatch:PutMetricAlarm\",\n                \"ec2:DescribeVpcs\",\n                \"ec2:DeleteSecurityGroup\",\n                \"application-autoscaling:DeregisterScalableTarget\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MGL3MG5HQE",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "sfn_ec2_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"description": "This policy allows step function to set up EMR cluster",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:RunJobFlow\",\n                \"elasticmapreduce:DescribeCluster\",\n                \"elasticmapreduce:TerminateJobFlows\",\n                \"elasticmapreduce:AddJobFlowSteps\",\n                \"elasticmapreduce:DescribeStep\",\n                \"elasticmapreduce:CancelSteps\",\n                \"elasticmapreduce:SetTerminationProtection\"\n            ],\n            \"Resource\": \"arn:aws:elasticmapreduce:*:*:cluster/*\"\n        },\n\t\t{\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": [\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role\",\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role\"\n            ]\n        }\n    ]\n}\n",
				"policy_id":   "ANPAZFZ6IW6MK7XJ3P4N3",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"description": "This policy allows step function to set up EMR cluster",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:RunJobFlow\",\n                \"elasticmapreduce:DescribeCluster\",\n                \"elasticmapreduce:TerminateJobFlows\",\n                \"elasticmapreduce:AddJobFlowSteps\",\n                \"elasticmapreduce:DescribeStep\",\n                \"elasticmapreduce:CancelSteps\",\n                \"elasticmapreduce:SetTerminationProtection\"\n            ],\n            \"Resource\": \"arn:aws:elasticmapreduce:*:*:cluster/*\"\n        },\n\t\t{\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": [\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role\",\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role\"\n            ]\n        }\n    ]\n}\n",
				"policy_id":   "ANPAZFZ6IW6MK7XJ3P4N3",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "sfn_emr_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
				"description": "This policy provides basic permission for step function executions.",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
				"name":        "bkun-dgea-prod1-ingestion-stepfunction-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"EMREc2AccessForStepFunction\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"states:ListStateMachines\",\n                \"states:DescribeActivity\",\n                \"states:DescribeStateMachine\",\n                \"states:ListActivities\",\n                \"states:ListExecutions\",\n                \"states:UpdateStateMachine\",\n                \"states:DeleteStateMachine\",\n                \"states:StopExecution\",\n                \"states:DescribeStateMachineForExecution\",\n                \"states:SendTaskFailure\",\n                \"states:DescribeExecution\",\n                \"states:GetExecutionHistory\",\n                \"states:DeleteActivity\",\n                \"states:StartExecution\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"AllowAccessToPassRoleToEventsiuj\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": \"arn:aws:iam::*:role/*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:PassedToService\": \"events.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"events:PutTargets\",\n                \"events:PutRule\",\n                \"events:DescribeRule\"\n            ],\n            \"Resource\": [\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule\",\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventForEMRAddJobFlowStepsRule\"\n            ]\n        },\n        {\n            \"Action\": [\n                \"logs:*\",\n                \"iam:GetPolicy\",\n                \"iam:GetPolicyVersion\",\n                \"iam:GetRole\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/events.amazonaws.com/AWSServiceRoleForCloudWatchEvents*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"events.amazonaws.com\"\n                }\n            }\n        }\n    ]\n}\n\n\n",
				"policy_id":   "ANPAZFZ6IW6MAHDT27IUG",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
				"description": "This policy provides basic permission for step function executions.",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
				"name":        "bkun-dgea-prod1-ingestion-stepfunction-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"EMREc2AccessForStepFunction\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"states:ListStateMachines\",\n                \"states:DescribeActivity\",\n                \"states:DescribeStateMachine\",\n                \"states:ListActivities\",\n                \"states:ListExecutions\",\n                \"states:UpdateStateMachine\",\n                \"states:DeleteStateMachine\",\n                \"states:StopExecution\",\n                \"states:DescribeStateMachineForExecution\",\n                \"states:SendTaskFailure\",\n                \"states:DescribeExecution\",\n                \"states:GetExecutionHistory\",\n                \"states:DeleteActivity\",\n                \"states:StartExecution\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"AllowAccessToPassRoleToEventsiuj\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": \"arn:aws:iam::*:role/*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:PassedToService\": \"events.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"events:PutTargets\",\n                \"events:PutRule\",\n                \"events:DescribeRule\"\n            ],\n            \"Resource\": [\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule\",\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventForEMRAddJobFlowStepsRule\"\n            ]\n        },\n        {\n            \"Action\": [\n                \"logs:*\",\n                \"iam:GetPolicy\",\n                \"iam:GetPolicyVersion\",\n                \"iam:GetRole\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/events.amazonaws.com/AWSServiceRoleForCloudWatchEvents*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"events.amazonaws.com\"\n                }\n            }\n        }\n    ]\n}\n\n\n",
				"policy_id":   "ANPAZFZ6IW6MAHDT27IUG",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "sfn_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"description": "This policy allows step function to set up EMR cluster",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\",\n                \"s3:ListBucket\",\n                \"s3:PutObject\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor81\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::aws-logs-630953916312-us-east-1/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor1265\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MGZCFMI54G",
				"tags":        {},
				"tags_all":    {},
			},
			"after_unknown": {},
			"before": {
				"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"description": "This policy allows step function to set up EMR cluster",
				"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"name":        "bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"name_prefix": null,
				"path":        "/",
				"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\",\n                \"s3:ListBucket\",\n                \"s3:PutObject\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor81\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::aws-logs-630953916312-us-east-1/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor1265\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
				"policy_id":   "ANPAZFZ6IW6MGZCFMI54G",
				"tags":        {},
				"tags_all":    {},
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "sfn_s3_policy",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_policy",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-17T04:14:59Z",
				"description":           "",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-data-migration-stepfunction-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
					"arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-data-migration-stepfunction-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"unique_id": "AROAZFZ6IW6MJVO72SGC7",
			},
			"after_unknown": {},
			"before": {
				"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
				"create_date":           "2021-08-17T04:14:59Z",
				"description":           "",
				"force_detach_policies": false,
				"id": "bkun-dgea-prod1-data-migration-stepfunction-role",
				"inline_policy": [
					{
						"name":   "",
						"policy": "",
					},
				],
				"managed_policy_arns": [
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
					"arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
				],
				"max_session_duration": 3600,
				"name":                 "bkun-dgea-prod1-data-migration-stepfunction-role",
				"name_prefix":          null,
				"path":                 "/",
				"permissions_boundary": null,
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"unique_id": "AROAZFZ6IW6MJVO72SGC7",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "iam_for_sfn",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459515600000001",
				"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459515600000001",
				"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "lambda-access-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518000000004",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518000000004",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "sfn-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518200000005",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518200000005",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "step-cloudwatch-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516800000003",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516800000003",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "step-ec2-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459519100000006",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459519100000006",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "step-emr-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach[0]": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach[0]",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516400000002",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
			"after_unknown": {},
			"before": {
				"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516400000002",
				"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
				"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
			},
		},
		"deposed":        "",
		"index":          0,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "step-s3-attach",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_iam_role_policy_attachment",
	},
	"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this": {
		"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
				"creation_date": "2021-08-17T04:14:59Z",
				"definition":    "  {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Check_EMR_Cluster\",\n  \"States\": {\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n          \"data-source.$\": \"$.InputParam.EMRClusterType\"\n        }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n    \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-cluster', $.InputParam.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",        \n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/etl/bkun_dgea_etl_bootstrap_commands.sh\"\n            }\n          }\n       ],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n\t\"Tags\": [\n\t\t{\n            \"Key\": \"ApplicationID\",\n            \"Value\": \"0\"\n          },\n          {\n            \"Key\": \"ApplicationName\",\n            \"Value\": \"Data-Processing\"\n          },\n          {\n            \"Key\": \"ApplicationRole\",\n            \"Value\": \"\"\n          },\n\t\t  {\n            \"Key\": \"BusinessLine\",\n            \"Value\": \"Data Governance And Eprise. Arch\"\n          },\n          {\n            \"Key\": \"Name\",\n            \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-ingestion-emr-cluster', $.InputParam.EMRClusterType)\"\n          },\n\t\t  {\n            \"Key\": \"CostCenter\",\n            \"Value\": \"1006703\"\n          },\n          {\n            \"Key\": \"Environment\",\n            \"Value\": \"Test QA\"\n          },\n          {\n            \"Key\": \"ProjectID\",\n            \"Value\": \"PRJ0010800\"\n          },\n\t\t  {\n            \"Key\": \"Tier\",\n            \"Value\": \"Not Applicable\"\n          },\n\t\t  {\n            \"Key\": \"BackupTier\",\n            \"Value\": \"NA\"\n          },\n          {\n            \"Key\": \"Application\",\n            \"Value.$\": \"$.InputParam.EMRClusterType\"\n          },\n          {\n            \"Key\": \"ITContact\",\n            \"Value\": \"Haritha Nookala\"\n          },\n\t  {\n            \"Key\": \"Owner\",\n            \"Value\": \"Malory\"\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\" : \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-master', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-core', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.InputParam.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Run_AD_Script\"\n    },\n    \"Run_AD_Script\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Enable AD Integration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar\",\n            \"Args\": [\n              \"s3://bkun-script/emr-harden-amzn-linux-dp-uat-1_1.sh\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Execute_Prerequisites\"\n    },\n    \"Should_Execute_Prerequisites\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.EMRClusterType\",\n          \"StringEquals\": \"etl\",\n          \"Next\": \"Execute_ETL_Prequisite\"\n        },\n        {\n          \"Not\": {\n            \"Variable\": \"$.InputParam.EMRClusterType\",\n            \"StringEquals\": \"etl\"\n          },\n          \"Next\": \"Execute_Other_Prequisite\"\n        }\n      ]\n    },\n    \"Execute_ETL_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute ETL prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_etl_prerequisites_commands.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Execute_Other_Prequisite\": {\n      \"Type\": \"Pass\",\n      \"Result\": \"Execute_Other_Prequisite\",\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Process_Input_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.mergeResults.ClusterId\"\n      },\n      \"ResultPath\": \"$.processResults\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
			"after_unknown": {},
			"before": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
				"creation_date": "2021-08-17T04:14:59Z",
				"definition":    "  {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Check_EMR_Cluster\",\n  \"States\": {\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n          \"data-source.$\": \"$.InputParam.EMRClusterType\"\n        }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n    \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-cluster', $.InputParam.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",        \n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/etl/bkun_dgea_etl_bootstrap_commands.sh\"\n            }\n          }\n       ],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n\t\"Tags\": [\n\t\t{\n            \"Key\": \"ApplicationID\",\n            \"Value\": \"0\"\n          },\n          {\n            \"Key\": \"ApplicationName\",\n            \"Value\": \"Data-Processing\"\n          },\n          {\n            \"Key\": \"ApplicationRole\",\n            \"Value\": \"\"\n          },\n\t\t  {\n            \"Key\": \"BusinessLine\",\n            \"Value\": \"Data Governance And Eprise. Arch\"\n          },\n          {\n            \"Key\": \"Name\",\n            \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-ingestion-emr-cluster', $.InputParam.EMRClusterType)\"\n          },\n\t\t  {\n            \"Key\": \"CostCenter\",\n            \"Value\": \"1006703\"\n          },\n          {\n            \"Key\": \"Environment\",\n            \"Value\": \"Test QA\"\n          },\n          {\n            \"Key\": \"ProjectID\",\n            \"Value\": \"PRJ0010800\"\n          },\n\t\t  {\n            \"Key\": \"Tier\",\n            \"Value\": \"Not Applicable\"\n          },\n\t\t  {\n            \"Key\": \"BackupTier\",\n            \"Value\": \"NA\"\n          },\n          {\n            \"Key\": \"Application\",\n            \"Value.$\": \"$.InputParam.EMRClusterType\"\n          },\n          {\n            \"Key\": \"ITContact\",\n            \"Value\": \"Haritha Nookala\"\n          },\n\t  {\n            \"Key\": \"Owner\",\n            \"Value\": \"Malory\"\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\" : \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-master', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-core', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.InputParam.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Run_AD_Script\"\n    },\n    \"Run_AD_Script\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Enable AD Integration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar\",\n            \"Args\": [\n              \"s3://bkun-script/emr-harden-amzn-linux-dp-uat-1_1.sh\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Execute_Prerequisites\"\n    },\n    \"Should_Execute_Prerequisites\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.EMRClusterType\",\n          \"StringEquals\": \"etl\",\n          \"Next\": \"Execute_ETL_Prequisite\"\n        },\n        {\n          \"Not\": {\n            \"Variable\": \"$.InputParam.EMRClusterType\",\n            \"StringEquals\": \"etl\"\n          },\n          \"Next\": \"Execute_Other_Prequisite\"\n        }\n      ]\n    },\n    \"Execute_ETL_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute ETL prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_etl_prerequisites_commands.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Execute_Other_Prequisite\": {\n      \"Type\": \"Pass\",\n      \"Result\": \"Execute_Other_Prequisite\",\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Process_Input_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.mergeResults.ClusterId\"\n      },\n      \"ResultPath\": \"$.processResults\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_sfn_state_machine",
	},
	"module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction.aws_sfn_state_machine.this": {
		"address": "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction.aws_sfn_state_machine.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/start_job_execution.sh\"\n                    },\n                    {\n                        \"Arg3.$\": \"$.folderName\"\n                    },\n                    {\n                        \"Arg4.$\": \"$.workflowName\"\n                    },\n                    {\n                        \"Arg5.$\": \"$.executionTime\"\n                    },\n                    {\n                        \"Arg6.$\": \"$.UDFParameter\"\n                    },\n                    {\n                        \"Arg7\": \"prod1\"\n                    },\n                    {\n                        \"Arg8.$\": \"$.additionalParameter\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run ETL\"\n    },\n    \"Run ETL\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-etl-stepfunction",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
			"after_unknown": {},
			"before": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/start_job_execution.sh\"\n                    },\n                    {\n                        \"Arg3.$\": \"$.folderName\"\n                    },\n                    {\n                        \"Arg4.$\": \"$.workflowName\"\n                    },\n                    {\n                        \"Arg5.$\": \"$.executionTime\"\n                    },\n                    {\n                        \"Arg6.$\": \"$.UDFParameter\"\n                    },\n                    {\n                        \"Arg7\": \"prod1\"\n                    },\n                    {\n                        \"Arg8.$\": \"$.additionalParameter\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run ETL\"\n    },\n    \"Run ETL\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-etl-stepfunction",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-etl-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_sfn_state_machine",
	},
	"module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy.aws_sfn_state_machine.this": {
		"address": "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy.aws_sfn_state_machine.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
				"creation_date": "2021-08-17T05:19:14Z",
				"definition":    "\n{\n  \"Comment\": \"Step function to move maskOut data to landing layer\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForCopy\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/copy_masked_data_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.maskOutBackuptargetPath\"\n            }\n          ]\n        }\n\t\t}\n      },\n     \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"masked_out_data_backup\"\n    },\n    \"masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"copy_maskout_data_to_landing\"\n    },\n    \"copy_maskout_data_to_landing\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForCopy.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.snappyCopyResult\",\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-maskout-data-copy",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-maskout-data-copy",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-maskout-data-copy",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
			"after_unknown": {},
			"before": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
				"creation_date": "2021-08-17T05:19:14Z",
				"definition":    "\n{\n  \"Comment\": \"Step function to move maskOut data to landing layer\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForCopy\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/copy_masked_data_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.maskOutBackuptargetPath\"\n            }\n          ]\n        }\n\t\t}\n      },\n     \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"masked_out_data_backup\"\n    },\n    \"masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"copy_maskout_data_to_landing\"\n    },\n    \"copy_maskout_data_to_landing\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForCopy.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.snappyCopyResult\",\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-maskout-data-copy",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-maskout-data-copy",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-maskout-data-copy",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_sfn_state_machine",
	},
	"module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction.aws_sfn_state_machine.this": {
		"address": "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction.aws_sfn_state_machine.this",
		"change": {
			"actions": [
				"no-op",
			],
			"after": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "\n{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_start_s3_to_redshift_migration.sh\"\n                    },\n                    {\n                         \"Arg3\": \"prod1\"\n                    },\n\n                    {\n                        \"Arg4.$\": \"$.InputFileName\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_S3_to_Redshift_Migration\"\n    },\n    \"Run_S3_to_Redshift_Migration\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_S3_to_Redshift_Migration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-s3-to-redshift-stepfunction",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
			"after_unknown": {},
			"before": {
				"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
				"creation_date": "2021-08-17T05:19:13Z",
				"definition":    "\n{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_start_s3_to_redshift_migration.sh\"\n                    },\n                    {\n                         \"Arg3\": \"prod1\"\n                    },\n\n                    {\n                        \"Arg4.$\": \"$.InputFileName\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_S3_to_Redshift_Migration\"\n    },\n    \"Run_S3_to_Redshift_Migration\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_S3_to_Redshift_Migration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n",
				"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
				"logging_configuration": [
					{
						"include_execution_data": false,
						"level":                  "OFF",
						"log_destination":        "",
					},
				],
				"name":     "bkun-dgea-prod1-s3-to-redshift-stepfunction",
				"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
				"status":   "ACTIVE",
				"tags": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tags_all": {
					"ApplicationID":   "0",
					"ApplicationName": "Data-Processing",
					"ApplicationRole": "",
					"BackupTier":      "NA",
					"BusinessLine":    "Data Governance And Eprise. Arch",
					"CostCenter":      "1006703",
					"Environment":     "Test QA",
					"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"ProjectID":       "PRJ0010800",
					"Tier":            "Not Applicable",
				},
				"tracing_configuration": [
					{
						"enabled": false,
					},
				],
				"type": "STANDARD",
			},
		},
		"deposed":        "",
		"index":          null,
		"mode":           "managed",
		"module_address": "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction",
		"name":           "this",
		"provider_name":  "registry.terraform.io/hashicorp/aws",
		"type":           "aws_sfn_state_machine",
	},
}

output_changes = {}

raw = {
	"configuration": {
		"provider_config": {
			"aws": {
				"expressions": {
					"assume_role": [
						{
							"role_arn": {
								"constant_value": "arn:aws:iam::630953916312:role/bkutfeassumeadmin",
							},
						},
					],
					"region": {
						"constant_value": "us-east-1",
					},
				},
				"name":               "aws",
				"version_constraint": "~> 3.52.0",
			},
			"template": {
				"name":               "template",
				"version_constraint": "~> 2.2.0",
			},
		},
		"root_module": {
			"module_calls": {
				"bkun-dgea-check-data-migration-emr-cluster-availability": {
					"expressions": {
						"ec2_policy_path": {
							"references": [
								"var.ec2_policy_path",
							],
						},
						"emr_policy_path": {
							"references": [
								"var.emr_policy_path",
							],
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"security_group_ids": {
							"references": [
								"var.security_group_ids",
							],
						},
						"subnet_ids": {
							"references": [
								"var.subnet_ids",
							],
						},
					},
					"module": {
						"module_calls": {
							"bkun-dgea-check-data-migration-emr-cluster-availability": {
								"expressions": {
									"environment_vars": {
										"references": [
											"var.env",
										],
									},
									"handler": {
										"constant_value": "lambda_function.lambda_handler",
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"role_arn": {
										"references": [
											"aws_iam_role.iam_for_lambda.arn",
											"aws_iam_role.iam_for_lambda",
										],
									},
									"runtime": {
										"constant_value": "python3.7",
									},
									"s3_bucket": {
										"references": [
											"var.env",
										],
									},
									"s3_key": {
										"references": [
											"var.s3_key",
										],
									},
									"security_group_ids": {
										"references": [
											"var.security_group_ids",
										],
									},
									"subnet_ids": {
										"references": [
											"var.subnet_ids",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"local.tags",
										],
									},
									"timeout": {
										"constant_value": 300,
									},
								},
								"module": {
									"outputs": {
										"lambda_arn": {
											"expression": {
												"references": [
													"aws_lambda_function.this.arn",
													"aws_lambda_function.this",
												],
											},
										},
									},
									"resources": [
										{
											"address": "aws_cloudwatch_log_group.this",
											"expressions": {
												"name": {
													"references": [
														"var.name",
													],
												},
												"retention_in_days": {
													"references": [
														"var.cloudwatch_log_retention_days",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
											"schema_version":      0,
											"type":                "aws_cloudwatch_log_group",
										},
										{
											"address": "aws_lambda_function.this",
											"expressions": {
												"function_name": {
													"references": [
														"var.name",
													],
												},
												"handler": {
													"references": [
														"var.handler",
													],
												},
												"layers": {
													"references": [
														"aws_lambda_layer_version.lambda_layer.arn",
														"aws_lambda_layer_version.lambda_layer",
													],
												},
												"role": {
													"references": [
														"var.role_arn",
													],
												},
												"runtime": {
													"constant_value": "python3.7",
												},
												"s3_bucket": {
													"references": [
														"var.s3_bucket",
													],
												},
												"s3_key": {
													"references": [
														"var.s3_key",
													],
												},
												"s3_object_version": {
													"references": [
														"var.latest_version",
														"data.aws_s3_bucket_object.latest.version_id",
														"data.aws_s3_bucket_object.latest",
														"var.s3_object_version",
													],
												},
												"source_code_hash": {
													"references": [
														"var.latest_version",
														"data.aws_s3_bucket_object.latest.body",
														"data.aws_s3_bucket_object.latest",
														"data.aws_s3_bucket_object.version[0].body",
														"data.aws_s3_bucket_object.version[0]",
														"data.aws_s3_bucket_object.version",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"local.tags",
													],
												},
												"timeout": {
													"constant_value": 15,
												},
												"vpc_config": [
													{
														"security_group_ids": {
															"references": [
																"var.security_group_ids",
															],
														},
														"subnet_ids": {
															"references": [
																"var.subnet_ids",
															],
														},
													},
												],
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
											"schema_version":      0,
											"type":                "aws_lambda_function",
										},
										{
											"address": "aws_lambda_layer_version.lambda_layer",
											"expressions": {
												"compatible_runtimes": {
													"constant_value": [
														"python3.7",
													],
												},
												"layer_name": {
													"constant_value": "bu_logging",
												},
												"s3_bucket": {
													"references": [
														"var.s3_bucket",
													],
												},
												"s3_key": {
													"references": [
														"var.s3_layer_key",
													],
												},
												"s3_object_version": {
													"references": [
														"var.latest_version",
														"data.aws_s3_bucket_object.layer_latest.version_id",
														"data.aws_s3_bucket_object.layer_latest",
														"var.s3_object_version",
													],
												},
											},
											"mode":                "managed",
											"name":                "lambda_layer",
											"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
											"schema_version":      0,
											"type":                "aws_lambda_layer_version",
										},
										{
											"address": "data.aws_s3_bucket_object.latest",
											"expressions": {
												"bucket": {
													"references": [
														"var.s3_bucket",
													],
												},
												"key": {
													"references": [
														"var.s3_key",
													],
												},
											},
											"mode":                "data",
											"name":                "latest",
											"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
											"schema_version":      0,
											"type":                "aws_s3_bucket_object",
										},
										{
											"address": "data.aws_s3_bucket_object.layer_latest",
											"expressions": {
												"bucket": {
													"references": [
														"var.s3_bucket",
													],
												},
												"key": {
													"references": [
														"var.s3_layer_key",
													],
												},
											},
											"mode":                "data",
											"name":                "layer_latest",
											"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
											"schema_version":      0,
											"type":                "aws_s3_bucket_object",
										},
										{
											"address": "data.aws_s3_bucket_object.layer_version",
											"count_expression": {
												"references": [
													"var.latest_version",
												],
											},
											"expressions": {
												"bucket": {
													"references": [
														"var.s3_bucket",
													],
												},
												"key": {
													"references": [
														"var.s3_layer_key",
													],
												},
												"version_id": {
													"references": [
														"var.s3_object_version",
													],
												},
											},
											"mode":                "data",
											"name":                "layer_version",
											"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
											"schema_version":      0,
											"type":                "aws_s3_bucket_object",
										},
										{
											"address": "data.aws_s3_bucket_object.version",
											"count_expression": {
												"references": [
													"var.latest_version",
												],
											},
											"expressions": {
												"bucket": {
													"references": [
														"var.s3_bucket",
													],
												},
												"key": {
													"references": [
														"var.s3_key",
													],
												},
												"version_id": {
													"references": [
														"var.s3_object_version",
													],
												},
											},
											"mode":                "data",
											"name":                "version",
											"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
											"schema_version":      0,
											"type":                "aws_s3_bucket_object",
										},
									],
									"variables": {
										"cloudwatch_log_retention_days": {
											"default":     14,
											"description": "The number of days to keep Lambda logs in CloudWatch for",
										},
										"create_role": {
											"default":     false,
											"description": "Defaults to false - setting to true will create a role for use with the Lambda Function. Requires role_policy",
										},
										"env": {
											"default": "di",
										},
										"env_prefix": {
											"default": "bku-dev",
										},
										"environment_vars": {},
										"handler": {
											"description": "Name of the Lambda handler for the function",
										},
										"lambda_invocation_principals": {
											"default":     [],
											"description": "List of principals allowed to invoke the Lambda Function",
										},
										"latest_version": {
											"default":     true,
											"description": "Use the latest object version for the S3 key containing the Lambda code",
										},
										"layers": {
											"default":     [],
											"description": "List of Lambda Layers to include for the function",
										},
										"name": {
											"description": "The name to give the Lambda function",
										},
										"role_arn": {
											"default":     "",
											"description": "Role ARN used for the Lambda function - ignore if leveraging create_role",
										},
										"role_policy": {
											"default":     "",
											"description": "The role policy to use when leveraging create_role - ignore if leveraging role_arn",
										},
										"runtime": {
											"description": "Runtime for the Lambda function",
										},
										"s3_bucket": {
											"description": "S3 Bucket that containing the Lambda code",
										},
										"s3_key": {
											"description": "S3 Object Key (.zip file) containing the Lambda code",
										},
										"s3_layer_key": {
											"default":     "terraform/lambda/bu_logging.zip",
											"description": "S3 Object Key (.zip file) containing the Lambda layer",
										},
										"s3_object_version": {
											"default":     "",
											"description": "The object version for the S3 Key containing the Lambda code - ignore if using latest_version",
										},
										"security_group_ids": {
											"description": "List of security group ids when Lambda Function should run in the VPC.",
										},
										"subnet_ids": {
											"description": "List of subnet ids when Lambda Function should run in the VPC. Usually private or intra subnets.",
										},
										"tags": {
											"default":     {},
											"description": "A map of tags to apply to resources created by this module",
										},
										"timeout": {
											"default":     300,
											"description": "Timeout for the Lambda function",
										},
									},
								},
								"source":             "tfe.terraform.tools.c9bku.net/BankUnited-Community/cndp-lambda-function-python/aws",
								"version_constraint": "0.0.1",
							},
						},
						"resources": [
							{
								"address": "aws_iam_policy.ec2_policy",
								"expressions": {
									"description": {
										"constant_value": "This policy allows lambda function to access emr",
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"policy": {
										"references": [
											"var.ec2_policy_path",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"data.aws_region.current.name",
											"data.aws_region.current",
										],
									},
								},
								"mode":                "managed",
								"name":                "ec2_policy",
								"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
								"schema_version":      0,
								"type":                "aws_iam_policy",
							},
							{
								"address": "aws_iam_policy.emr_policy",
								"expressions": {
									"description": {
										"constant_value": "This policy allows lambda function to check available emr cluster for data migration",
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"policy": {
										"references": [
											"var.emr_policy_path",
										],
									},
								},
								"mode":                "managed",
								"name":                "emr_policy",
								"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
								"schema_version":      0,
								"type":                "aws_iam_policy",
							},
							{
								"address": "aws_iam_role.iam_for_lambda",
								"expressions": {
									"assume_role_policy": {
										"constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n",
									},
									"description": {
										"constant_value": "Created this role to for lambda function to check EMR cluster availability",
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"var.env",
										],
									},
								},
								"mode":                "managed",
								"name":                "iam_for_lambda",
								"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
								"schema_version":      0,
								"type":                "aws_iam_role",
							},
							{
								"address": "aws_iam_role_policy_attachment.ec2-attach",
								"expressions": {
									"policy_arn": {
										"references": [
											"aws_iam_policy.ec2_policy.arn",
											"aws_iam_policy.ec2_policy",
										],
									},
									"role": {
										"references": [
											"aws_iam_role.iam_for_lambda.name",
											"aws_iam_role.iam_for_lambda",
										],
									},
								},
								"mode":                "managed",
								"name":                "ec2-attach",
								"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address": "aws_iam_role_policy_attachment.emr-attach",
								"expressions": {
									"policy_arn": {
										"references": [
											"aws_iam_policy.emr_policy.arn",
											"aws_iam_policy.emr_policy",
										],
									},
									"role": {
										"references": [
											"aws_iam_role.iam_for_lambda.name",
											"aws_iam_role.iam_for_lambda",
										],
									},
								},
								"mode":                "managed",
								"name":                "emr-attach",
								"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
							{
								"address":             "data.aws_region.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-check-data-migration-emr-cluster-availability:aws",
								"schema_version":      0,
								"type":                "aws_region",
							},
						],
						"variables": {
							"ec2_policy_path": {
								"default":     "../../iam/lambda-function/ec2.json",
								"description": "Path to policy json",
							},
							"emr_policy_path": {
								"default":     "../../iam/lambda-function/emr_cluster.json",
								"description": "Path to policy json",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
							},
							"s3_key": {
								"default":     "terraform/lambda",
								"description": "Source bucket to store lambda function code and other required scripts",
							},
							"security_group_ids": {
								"description": "List of security group ids when Lambda Function should run in the VPC.",
							},
							"subnet_ids": {
								"description": "List of subnet ids when Lambda Function should run in the VPC. Usually private or intra subnets.",
							},
							"tags": {
								"default": {
									"ApplicationID":   "0",
									"ApplicationName": "Data-Ingestion",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "6703",
									"Environment":     "uat",
									"ProjectID":       "PRJ0010800",
									"Tier":            "4",
								},
								"description": "A mapping of tags to assign to all resources",
							},
						},
					},
					"source": "./lambda-function/bkun-dgea-check-data-migration-emr-cluster-availability/",
				},
				"bkun-dgea-copy-flat-file-maskout-data": {
					"depends_on": [
						"module.bkun-dgea-emr-setup-stepfunction",
					],
					"expressions": {
						"create_sfn_role": {
							"constant_value": false,
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"tags": {
							"references": [
								"var.tags",
							],
						},
					},
					"module": {
						"module_calls": {
							"bkun-dgea-copy-flat-file-maskout-data": {
								"expressions": {
									"create_sfn_role": {
										"references": [
											"var.create_sfn_role",
										],
									},
									"definition": {
										"references": [
											"var.env",
											"var.env",
											"var.env",
											"var.env",
											"var.env",
											"var.emr_release_label",
											"var.env",
											"var.env",
											"var.env",
											"var.env",
											"var.env",
											"var.tags[\"ApplicationID\"]",
											"var.tags",
											"var.tags[\"ApplicationName\"]",
											"var.tags",
											"var.tags[\"ApplicationRole\"]",
											"var.tags",
											"var.tags[\"BusinessLine\"]",
											"var.tags",
											"var.env",
											"var.tags[\"CostCenter\"]",
											"var.tags",
											"var.tags[\"Environment\"]",
											"var.tags",
											"var.tags[\"ProjectID\"]",
											"var.tags",
											"var.tags[\"Tier\"]",
											"var.tags",
											"var.tags[\"BackupTier\"]",
											"var.tags",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"var.env",
											"var.ec2_key_name",
											"var.subnet_id",
											"var.env",
											"var.master_instance_count",
											"var.env",
											"var.env",
										],
									},
									"env": {
										"references": [
											"var.env",
										],
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"role_arn": {
										"references": [
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"local.tags",
										],
									},
								},
								"module": {
									"resources": [
										{
											"address": "aws_iam_policy.sfn_cw_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to send cloudwatch events",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_cw_policy_path",
														"var.env",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_cw_policy",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_ec2_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_ec2_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_ec2_policy",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_emr_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_emr_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_emr_policy",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy provides basic permission for step function executions.",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_policy",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_s3_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_s3_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_s3_policy",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_role.iam_for_sfn",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"assume_role_policy": {
													"constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"states.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\"\n    }\n  ]\n}\n",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "iam_for_sfn",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_role",
										},
										{
											"address": "aws_iam_role_policy_attachment.lambda-access-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"constant_value": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "lambda-access-attach",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.sfn-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_policy[0].arn",
														"aws_iam_policy.sfn_policy[0]",
														"aws_iam_policy.sfn_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn-attach",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_cw_policy[0].arn",
														"aws_iam_policy.sfn_cw_policy[0]",
														"aws_iam_policy.sfn_cw_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-cloudwatch-attach",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-ec2-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_ec2_policy[0].arn",
														"aws_iam_policy.sfn_ec2_policy[0]",
														"aws_iam_policy.sfn_ec2_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-ec2-attach",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-emr-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_emr_policy[0].arn",
														"aws_iam_policy.sfn_emr_policy[0]",
														"aws_iam_policy.sfn_emr_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-emr-attach",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-s3-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_s3_policy[0].arn",
														"aws_iam_policy.sfn_s3_policy[0]",
														"aws_iam_policy.sfn_s3_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-s3-attach",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_sfn_state_machine.this",
											"expressions": {
												"definition": {
													"references": [
														"var.definition",
													],
												},
												"name": {
													"references": [
														"var.name",
													],
												},
												"role_arn": {
													"references": [
														"var.role_arn",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"local.tags",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_sfn_state_machine",
										},
										{
											"address":             "data.aws_caller_identity.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_caller_identity",
										},
										{
											"address":             "data.aws_region.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
											"schema_version":      0,
											"type":                "aws_region",
										},
									],
									"variables": {
										"create_role": {
											"default":     false,
											"description": "Defaults to false - setting to true will create a role for use to the state machine. Requires role_policy",
										},
										"create_sfn_role": {
											"default":     false,
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"definition": {
											"description": "The ASL code for the state machine",
										},
										"ec2_dynamodb_policy_path": {
											"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
											"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
										},
										"env": {
											"default":     "test",
											"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
										},
										"name": {
											"description": "The name to give the state machine",
										},
										"role_arn": {
											"description": "Role ARN used for the state machine - ignore if leveraging create_role",
										},
										"role_policy": {
											"description": "The role policy to use when leveraging create_role - ignore if leveraging role_arn",
										},
										"sfn_cw_policy_path": {
											"default":     "../../iam/step-function/sfn-cw-policy.json",
											"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
										},
										"sfn_ec2_policy_path": {
											"default":     "../../iam/step-function/sfn-ec2-policy.json",
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"sfn_emr_policy_path": {
											"default":     "../../iam/step-function/sfn-emr-policy.json",
											"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
										},
										"sfn_policy_path": {
											"default":     "../../iam/step-function/policy.json",
											"description": "Contains generic policy for step function execution and interacting with different services.",
										},
										"sfn_s3_policy_path": {
											"default":     "../../iam/step-function/sfn-s3-policy.json",
											"description": "Path to emr ec2 policy",
										},
										"tags": {
											"default":     {},
											"description": "A map of tags to apply to resources created by this module",
										},
									},
								},
								"source":             "tfe.terraform.tools.c9bku.net/BankUnited-Community/cndp-step-function/aws",
								"version_constraint": "0.0.1",
							},
						},
						"resources": [
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
							{
								"address":             "data.aws_region.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-copy-flat-file-maskout-data:aws",
								"schema_version":      0,
								"type":                "aws_region",
							},
						],
						"variables": {
							"core_instance_count": {
								"default": 2,
							},
							"create_sfn_role": {
								"default":     false,
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"ec2_dynamodb_policy_path": {
								"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
								"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
							},
							"ec2_key_name": {
								"default": "DP-UAT-EMR",
							},
							"emr_release_label": {
								"default": "emr-5.29.0",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
							},
							"instance_type": {
								"default": "m5.xlarge",
							},
							"master_instance_count": {
								"default": 1,
							},
							"sfn_cw_policy_path": {
								"default":     "../../iam/step-function/sfn-cw-policy.json",
								"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
							},
							"sfn_ec2_policy_path": {
								"default":     "../../iam/step-function/sfn-ec2-policy.json",
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"sfn_emr_policy_path": {
								"default":     "../../iam/step-function/sfn-emr-policy.json",
								"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
							},
							"sfn_policy_path": {
								"default":     "../../iam/step-function/policy.json",
								"description": "Contains generic policy for step function execution and interacting with different services.",
							},
							"sfn_s3_policy_path": {
								"default":     "../../iam/step-function/sfn-s3-policy.json",
								"description": "Path to emr ec2 policy",
							},
							"subnet_id": {
								"default": "subnet-07911106ea5728129",
							},
							"tags": {
								"default": {
									"ApplicationID":   "",
									"ApplicationName": "data-processing-emr",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "",
									"Environment":     "uat",
									"ProjectID":       "PRJ0010800",
									"Tier":            "4",
								},
								"description": "A mapping of tags to assign to all resources",
							},
						},
					},
					"source": "./step-function/bkun-dgea-copy-flat-file-maskout-data",
				},
				"bkun-dgea-create-emr-roles": {
					"expressions": {
						"ec2_dynamodb_policy_path": {
							"references": [
								"var.ec2_dynamodb_policy_path",
							],
						},
						"ec2_kms_policy_path": {
							"references": [
								"var.ec2_kms_policy_path",
							],
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"generic_policy_path": {
							"references": [
								"var.generic_policy_path",
							],
						},
						"s3_policy_path": {
							"references": [
								"var.s3_policy_path",
							],
						},
						"tags": {
							"references": [
								"var.tags",
							],
						},
					},
					"module": {
						"resources": [
							{
								"address": "aws_emr_security_configuration.security_config",
								"expressions": {
									"configuration": {
										"references": [
											"data.aws_region.current.name",
											"data.aws_region.current",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
											"var.env",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
											"var.env",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"name": {
										"references": [
											"var.env",
										],
									},
								},
								"mode":                "managed",
								"name":                "security_config",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_emr_security_configuration",
							},
							{
								"address": "aws_iam_instance_profile.emr-ec2-instance-profile",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"name": {
										"references": [
											"var.env",
										],
									},
									"role": {
										"references": [
											"aws_iam_role.emr_ec2_role[0].name",
											"aws_iam_role.emr_ec2_role[0]",
											"aws_iam_role.emr_ec2_role",
										],
									},
								},
								"mode":                "managed",
								"name":                "emr-ec2-instance-profile",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_instance_profile",
							},
							{
								"address": "aws_iam_policy.ec2_dynamodb_policy",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"description": {
										"constant_value": "This policy allows Ec2 instances of EMR cluster to access dyanmodb.",
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"policy": {
										"references": [
											"var.ec2_dynamodb_policy_path",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"data.aws_region.current.name",
											"data.aws_region.current",
										],
									},
								},
								"mode":                "managed",
								"name":                "ec2_dynamodb_policy",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_policy",
							},
							{
								"address": "aws_iam_policy.kms_policy",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"description": {
										"constant_value": "This policy allows Ec2 instances of EMR cluster to access kms key",
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"policy": {
										"references": [
											"var.ec2_kms_policy_path",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"var.env",
										],
									},
								},
								"mode":                "managed",
								"name":                "kms_policy",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_policy",
							},
							{
								"address": "aws_iam_policy.s3_policy",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"description": {
										"constant_value": "This policy allows Ec2 instances of EMR cluster to access s3 bucket",
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"policy": {
										"references": [
											"var.s3_policy_path",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"var.env",
										],
									},
								},
								"mode":                "managed",
								"name":                "s3_policy",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_policy",
							},
							{
								"address": "aws_iam_role.emr_ec2_role",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"assume_role_policy": {
										"constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n",
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"var.env",
										],
									},
								},
								"mode":                "managed",
								"name":                "emr_ec2_role",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role",
							},
							{
								"address": "aws_iam_role.emr_sfn_role",
								"count_expression": {
									"references": [
										"var.create_emr_role",
									],
								},
								"expressions": {
									"assume_role_policy": {
										"constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"elasticmapreduce.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n",
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"var.env",
										],
									},
								},
								"mode":                "managed",
								"name":                "emr_sfn_role",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role",
							},
							{
								"address": "aws_iam_role_policy_attachment.ec2-access-attach",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"policy_arn": {
										"constant_value": "arn:aws:iam::aws:policy/AmazonEC2FullAccess",
									},
									"role": {
										"references": [
											"aws_iam_role.emr_ec2_role[0].name",
											"aws_iam_role.emr_ec2_role[0]",
											"aws_iam_role.emr_ec2_role",
										],
									},
								},
								"mode":                "managed",
								"name":                "ec2-access-attach",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address": "aws_iam_role_policy_attachment.ec2-dynamodb-attach",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"policy_arn": {
										"references": [
											"var.create_ec2_role",
											"aws_iam_policy.ec2_dynamodb_policy[0].arn",
											"aws_iam_policy.ec2_dynamodb_policy[0]",
											"aws_iam_policy.ec2_dynamodb_policy",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"role": {
										"references": [
											"aws_iam_role.emr_ec2_role[0].name",
											"aws_iam_role.emr_ec2_role[0]",
											"aws_iam_role.emr_ec2_role",
										],
									},
								},
								"mode":                "managed",
								"name":                "ec2-dynamodb-attach",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address": "aws_iam_role_policy_attachment.ec2-glue-attach",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"policy_arn": {
										"constant_value": "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
									},
									"role": {
										"references": [
											"aws_iam_role.emr_ec2_role[0].name",
											"aws_iam_role.emr_ec2_role[0]",
											"aws_iam_role.emr_ec2_role",
										],
									},
								},
								"mode":                "managed",
								"name":                "ec2-glue-attach",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address": "aws_iam_role_policy_attachment.ec2-kms-attach",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"policy_arn": {
										"references": [
											"var.create_ec2_role",
											"aws_iam_policy.kms_policy[0].arn",
											"aws_iam_policy.kms_policy[0]",
											"aws_iam_policy.kms_policy",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"role": {
										"references": [
											"aws_iam_role.emr_ec2_role[0].name",
											"aws_iam_role.emr_ec2_role[0]",
											"aws_iam_role.emr_ec2_role",
										],
									},
								},
								"mode":                "managed",
								"name":                "ec2-kms-attach",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address": "aws_iam_role_policy_attachment.ec2-secretmanager-attach",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"policy_arn": {
										"constant_value": "arn:aws:iam::aws:policy/SecretsManagerReadWrite",
									},
									"role": {
										"references": [
											"aws_iam_role.emr_ec2_role[0].name",
											"aws_iam_role.emr_ec2_role[0]",
											"aws_iam_role.emr_ec2_role",
										],
									},
								},
								"mode":                "managed",
								"name":                "ec2-secretmanager-attach",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address": "aws_iam_role_policy_attachment.ec2-stepfunction-attach",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"policy_arn": {
										"constant_value": "arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
									},
									"role": {
										"references": [
											"aws_iam_role.emr_ec2_role[0].name",
											"aws_iam_role.emr_ec2_role[0]",
											"aws_iam_role.emr_ec2_role",
										],
									},
								},
								"mode":                "managed",
								"name":                "ec2-stepfunction-attach",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address": "aws_iam_role_policy_attachment.emr-access-attach",
								"count_expression": {
									"references": [
										"var.create_emr_role",
									],
								},
								"expressions": {
									"policy_arn": {
										"constant_value": "arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
									},
									"role": {
										"references": [
											"aws_iam_role.emr_sfn_role[0].name",
											"aws_iam_role.emr_sfn_role[0]",
											"aws_iam_role.emr_sfn_role",
										],
									},
								},
								"mode":                "managed",
								"name":                "emr-access-attach",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address": "aws_iam_role_policy_attachment.s3_attach",
								"count_expression": {
									"references": [
										"var.create_ec2_role",
									],
								},
								"expressions": {
									"policy_arn": {
										"references": [
											"var.create_ec2_role",
											"aws_iam_policy.s3_policy[0].arn",
											"aws_iam_policy.s3_policy[0]",
											"aws_iam_policy.s3_policy",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"role": {
										"references": [
											"aws_iam_role.emr_ec2_role[0].name",
											"aws_iam_role.emr_ec2_role[0]",
											"aws_iam_role.emr_ec2_role",
										],
									},
								},
								"mode":                "managed",
								"name":                "s3_attach",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_iam_role_policy_attachment",
							},
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
							{
								"address":             "data.aws_region.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-create-emr-roles:aws",
								"schema_version":      0,
								"type":                "aws_region",
							},
						],
						"variables": {
							"create_ec2_role": {
								"default":     true,
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"create_emr_role": {
								"default":     true,
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"create_emr_security_conf": {
								"default":     true,
								"description": "Defaults to false - setting to true will create a role for use to the state machine. Requires role_policy",
							},
							"ec2_dynamodb_policy_path": {
								"default":     "./ec2-dynamodb-policy.json",
								"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
							},
							"ec2_kms_policy_path": {
								"default":     "./kms.json",
								"description": "Policies for ec2 instances of emr cluster to kms keys.",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
							},
							"generic_policy_path": {
								"default":     "./generic-policy.json",
								"description": "Generic policies for ec2 instances of emr cluster.",
							},
							"s3_policy_path": {
								"default":     "./s3.json",
								"description": "Policies for ec2 instances of emr cluster to s3.",
							},
							"tags": {
								"default":     {},
								"description": "A map of tags to apply to resources created by this module",
							},
						},
					},
					"source": "./iam/emr-role",
				},
				"bkun-dgea-datamart-conf-redacted": {
					"depends_on": [
						"module.bkun-dgea-create-emr-roles",
					],
					"expressions": {
						"base_path": {
							"references": [
								"var.base_path",
							],
						},
						"create_kms_key": {
							"constant_value": true,
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"s3_source_bucket_policy_path": {
							"references": [
								"var.s3_source_bucket_policy_path",
							],
						},
					},
					"module": {
						"module_calls": {
							"bkun-dgea-datamart-conf-redacted": {
								"expressions": {
									"bucket_name": {
										"references": [
											"var.env",
										],
									},
									"create_kms_key": {
										"references": [
											"var.create_kms_key",
										],
									},
									"s3_bucket_policy": {
										"references": [
											"var.s3_source_bucket_policy_path",
											"var.env",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"var.env",
										],
									},
								},
								"module": {
									"outputs": {
										"bucket_name_id": {
											"description": "The name of the primary bucket.",
											"expression": {
												"references": [
													"aws_s3_bucket.this.id",
													"aws_s3_bucket.this",
												],
											},
										},
									},
									"resources": [
										{
											"address": "aws_kms_alias.this",
											"count_expression": {
												"references": [
													"var.create_kms_key",
												],
											},
											"expressions": {
												"name": {
													"references": [
														"var.bucket_name",
													],
												},
												"target_key_id": {
													"references": [
														"aws_kms_key.this[0].key_id",
														"aws_kms_key.this[0]",
														"aws_kms_key.this",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-datamart-conf-redacted:aws",
											"schema_version":      0,
											"type":                "aws_kms_alias",
										},
										{
											"address": "aws_kms_key.this",
											"count_expression": {
												"references": [
													"var.create_kms_key",
												],
											},
											"expressions": {
												"deletion_window_in_days": {
													"constant_value": 30,
												},
												"description": {
													"constant_value": "S3 Bucket Key",
												},
												"tags": {
													"references": [
														"var.tags",
														"var.bucket_name",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-datamart-conf-redacted:aws",
											"schema_version":      0,
											"type":                "aws_kms_key",
										},
										{
											"address": "aws_s3_bucket.this",
											"expressions": {
												"acl": {
													"constant_value": "private",
												},
												"bucket": {
													"references": [
														"var.bucket_name",
													],
												},
												"server_side_encryption_configuration": [
													{
														"rule": [
															{
																"apply_server_side_encryption_by_default": [
																	{
																		"kms_master_key_id": {
																			"references": [
																				"var.create_kms_key",
																				"aws_kms_key.this[0].arn",
																				"aws_kms_key.this[0]",
																				"aws_kms_key.this",
																			],
																		},
																		"sse_algorithm": {
																			"constant_value": "aws:kms",
																		},
																	},
																],
															},
														],
													},
												],
												"tags": {
													"references": [
														"var.tags",
														"var.bucket_name",
													],
												},
												"versioning": [
													{
														"enabled": {
															"constant_value": true,
														},
													},
												],
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-datamart-conf-redacted:aws",
											"schema_version":      0,
											"type":                "aws_s3_bucket",
										},
										{
											"address": "aws_s3_bucket_policy.this",
											"expressions": {
												"bucket": {
													"references": [
														"aws_s3_bucket.this.id",
														"aws_s3_bucket.this",
													],
												},
												"policy": {
													"references": [
														"var.s3_bucket_policy",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-datamart-conf-redacted:aws",
											"schema_version":      0,
											"type":                "aws_s3_bucket_policy",
										},
										{
											"address":             "data.aws_caller_identity.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-datamart-conf-redacted:aws",
											"schema_version":      0,
											"type":                "aws_caller_identity",
										},
										{
											"address":             "data.aws_region.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-datamart-conf-redacted:aws",
											"schema_version":      0,
											"type":                "aws_region",
										},
									],
									"variables": {
										"bucket_name": {
											"description": "The name to give the S3 bucket - must be globally unique",
										},
										"create_kms_key": {
											"default":     true,
											"description": "Create a new KMS key for use with this bucket",
										},
										"default_encryption": {
											"default":     false,
											"description": "Enable default encryption for uploaded objects",
										},
										"enable_versioning": {
											"default":     false,
											"description": "Enable object versioning for the S3 bucket",
										},
										"kms_key_arn": {
											"description": "If using default_encryption, define the ARN of the KMS key to use - ignore if using create_kms_key",
										},
										"s3_bucket_acl": {
											"default":     "private",
											"description": "The S3 pre-canned ACL to use for the bucket",
										},
										"s3_bucket_policy": {
											"description": "Bucket Policy to be applied to the bucket",
										},
										"tags": {
											"default":     {},
											"description": "A map of tags to apply to resources created by this module",
										},
									},
								},
								"source":             "tfe.terraform.tools.c9bku.net/BankUnited-Community/cndp-s3/aws",
								"version_constraint": "0.0.2",
							},
						},
						"resources": [
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-datamart-conf-redacted:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
						],
						"variables": {
							"base_path": {
								"default": ".",
							},
							"create_kms_key": {
								"default":     true,
								"description": "Create a new KMS key for use with this bucket",
							},
							"default_encryption": {
								"default":     true,
								"description": "Enable default encryption for uploaded objects",
							},
							"enable_versioning": {
								"default":     true,
								"description": "Enable object versioning for the S3 bucket",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, uat, prod",
							},
							"kms_key_arn": {
								"description": "If using default_encryption, define the ARN of the KMS key to use - ignore if using create_kms_key",
							},
							"name": {
								"default":     "bkun-dgea-dev-ingest-source-artifacts-version-2",
								"description": "The name to give the S3 bucket - must be globally unique",
							},
							"object_key": {
								"default":     "ingestion/",
								"description": "It is the object key that we are uploading in s3",
							},
							"object_source": {
								"default":     "ingestion/",
								"description": "It is the object source that we are uploading in s3",
							},
							"s3_bucket_acl": {
								"default":     "private",
								"description": "The S3 pre-canned ACL to use for the bucket",
							},
							"s3_source_bucket_policy_path": {
								"default":     "source_bucket_policy.json",
								"description": "Bucket Policy to be applied to the bucket",
							},
							"tags": {
								"default":     {},
								"description": "A map of tags to apply to resources created by this module",
							},
						},
					},
					"source": "./s3/bkun-dgea-datamart-conf-redacted",
				},
				"bkun-dgea-datamart-raw-redacted": {
					"depends_on": [
						"module.bkun-dgea-create-emr-roles",
					],
					"expressions": {
						"base_path": {
							"references": [
								"var.base_path",
							],
						},
						"create_kms_key": {
							"constant_value": true,
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"s3_source_bucket_policy_path": {
							"references": [
								"var.s3_source_bucket_policy_path",
							],
						},
					},
					"module": {
						"module_calls": {
							"bkun-dgea-dp-source-artifacts": {
								"expressions": {
									"bucket_name": {
										"references": [
											"var.env",
										],
									},
									"create_kms_key": {
										"references": [
											"var.create_kms_key",
										],
									},
									"s3_bucket_policy": {
										"references": [
											"var.s3_source_bucket_policy_path",
											"var.env",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"var.env",
										],
									},
								},
								"module": {
									"outputs": {
										"bucket_name_id": {
											"description": "The name of the primary bucket.",
											"expression": {
												"references": [
													"aws_s3_bucket.this.id",
													"aws_s3_bucket.this",
												],
											},
										},
									},
									"resources": [
										{
											"address": "aws_kms_alias.this",
											"count_expression": {
												"references": [
													"var.create_kms_key",
												],
											},
											"expressions": {
												"name": {
													"references": [
														"var.bucket_name",
													],
												},
												"target_key_id": {
													"references": [
														"aws_kms_key.this[0].key_id",
														"aws_kms_key.this[0]",
														"aws_kms_key.this",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-dp-source-artifacts:aws",
											"schema_version":      0,
											"type":                "aws_kms_alias",
										},
										{
											"address": "aws_kms_key.this",
											"count_expression": {
												"references": [
													"var.create_kms_key",
												],
											},
											"expressions": {
												"deletion_window_in_days": {
													"constant_value": 30,
												},
												"description": {
													"constant_value": "S3 Bucket Key",
												},
												"tags": {
													"references": [
														"var.tags",
														"var.bucket_name",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-dp-source-artifacts:aws",
											"schema_version":      0,
											"type":                "aws_kms_key",
										},
										{
											"address": "aws_s3_bucket.this",
											"expressions": {
												"acl": {
													"constant_value": "private",
												},
												"bucket": {
													"references": [
														"var.bucket_name",
													],
												},
												"server_side_encryption_configuration": [
													{
														"rule": [
															{
																"apply_server_side_encryption_by_default": [
																	{
																		"kms_master_key_id": {
																			"references": [
																				"var.create_kms_key",
																				"aws_kms_key.this[0].arn",
																				"aws_kms_key.this[0]",
																				"aws_kms_key.this",
																			],
																		},
																		"sse_algorithm": {
																			"constant_value": "aws:kms",
																		},
																	},
																],
															},
														],
													},
												],
												"tags": {
													"references": [
														"var.tags",
														"var.bucket_name",
													],
												},
												"versioning": [
													{
														"enabled": {
															"constant_value": true,
														},
													},
												],
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-dp-source-artifacts:aws",
											"schema_version":      0,
											"type":                "aws_s3_bucket",
										},
										{
											"address": "aws_s3_bucket_policy.this",
											"expressions": {
												"bucket": {
													"references": [
														"aws_s3_bucket.this.id",
														"aws_s3_bucket.this",
													],
												},
												"policy": {
													"references": [
														"var.s3_bucket_policy",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-dp-source-artifacts:aws",
											"schema_version":      0,
											"type":                "aws_s3_bucket_policy",
										},
										{
											"address":             "data.aws_caller_identity.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-dp-source-artifacts:aws",
											"schema_version":      0,
											"type":                "aws_caller_identity",
										},
										{
											"address":             "data.aws_region.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-dp-source-artifacts:aws",
											"schema_version":      0,
											"type":                "aws_region",
										},
									],
									"variables": {
										"bucket_name": {
											"description": "The name to give the S3 bucket - must be globally unique",
										},
										"create_kms_key": {
											"default":     true,
											"description": "Create a new KMS key for use with this bucket",
										},
										"default_encryption": {
											"default":     false,
											"description": "Enable default encryption for uploaded objects",
										},
										"enable_versioning": {
											"default":     false,
											"description": "Enable object versioning for the S3 bucket",
										},
										"kms_key_arn": {
											"description": "If using default_encryption, define the ARN of the KMS key to use - ignore if using create_kms_key",
										},
										"s3_bucket_acl": {
											"default":     "private",
											"description": "The S3 pre-canned ACL to use for the bucket",
										},
										"s3_bucket_policy": {
											"description": "Bucket Policy to be applied to the bucket",
										},
										"tags": {
											"default":     {},
											"description": "A map of tags to apply to resources created by this module",
										},
									},
								},
								"source":             "tfe.terraform.tools.c9bku.net/BankUnited-Community/cndp-s3/aws",
								"version_constraint": "0.0.2",
							},
						},
						"resources": [
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-datamart-raw-redacted:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
						],
						"variables": {
							"base_path": {
								"default": ".",
							},
							"create_kms_key": {
								"default":     true,
								"description": "Create a new KMS key for use with this bucket",
							},
							"default_encryption": {
								"default":     true,
								"description": "Enable default encryption for uploaded objects",
							},
							"enable_versioning": {
								"default":     true,
								"description": "Enable object versioning for the S3 bucket",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, uat, prod",
							},
							"kms_key_arn": {
								"description": "If using default_encryption, define the ARN of the KMS key to use - ignore if using create_kms_key",
							},
							"name": {
								"default":     "bkun-dgea-dev-ingest-source-artifacts-version-2",
								"description": "The name to give the S3 bucket - must be globally unique",
							},
							"object_key": {
								"default":     "ingestion/",
								"description": "It is the object key that we are uploading in s3",
							},
							"object_source": {
								"default":     "ingestion/",
								"description": "It is the object source that we are uploading in s3",
							},
							"s3_bucket_acl": {
								"default":     "private",
								"description": "The S3 pre-canned ACL to use for the bucket",
							},
							"s3_source_bucket_policy_path": {
								"default":     "source_bucket_policy.json",
								"description": "Bucket Policy to be applied to the bucket",
							},
							"tags": {
								"default":     {},
								"description": "A map of tags to apply to resources created by this module",
							},
						},
					},
					"source": "./s3/bkun-dgea-datamart-raw-redacted",
				},
				"bkun-dgea-ddl-creation-step-function": {
					"depends_on": [
						"module.bkun-dgea-emr-setup-stepfunction",
					],
					"expressions": {
						"create_sfn_role": {
							"constant_value": false,
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"sfn_subnet_id": {
							"references": [
								"var.sfn_subnet_id",
							],
						},
						"tags": {
							"references": [
								"var.tags",
							],
						},
					},
					"module": {
						"module_calls": {
							"bkun-dgea-ddl-creation-step-function": {
								"expressions": {
									"create_sfn_role": {
										"references": [
											"var.create_sfn_role",
										],
									},
									"definition": {
										"references": [
											"var.env",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
											"var.env",
										],
									},
									"ec2_dynamodb_policy_path": {
										"references": [
											"var.ec2_dynamodb_policy_path",
										],
									},
									"env": {
										"references": [
											"var.env",
										],
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"role_arn": {
										"references": [
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"sfn_cw_policy_path": {
										"references": [
											"var.sfn_cw_policy_path",
										],
									},
									"sfn_ec2_policy_path": {
										"references": [
											"var.sfn_ec2_policy_path",
										],
									},
									"sfn_emr_policy_path": {
										"references": [
											"var.sfn_emr_policy_path",
										],
									},
									"sfn_policy_path": {
										"references": [
											"var.sfn_policy_path",
										],
									},
									"sfn_s3_policy_path": {
										"references": [
											"var.sfn_s3_policy_path",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"local.tags",
										],
									},
								},
								"module": {
									"resources": [
										{
											"address": "aws_iam_policy.sfn_cw_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to send cloudwatch events",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_cw_policy_path",
														"var.env",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_cw_policy",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_ec2_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_ec2_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_ec2_policy",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_emr_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_emr_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_emr_policy",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy provides basic permission for step function executions.",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_policy",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_s3_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_s3_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_s3_policy",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_role.iam_for_sfn",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"assume_role_policy": {
													"constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"states.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\"\n    }\n  ]\n}\n",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "iam_for_sfn",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_role",
										},
										{
											"address": "aws_iam_role_policy_attachment.lambda-access-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"constant_value": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "lambda-access-attach",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.sfn-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_policy[0].arn",
														"aws_iam_policy.sfn_policy[0]",
														"aws_iam_policy.sfn_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn-attach",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_cw_policy[0].arn",
														"aws_iam_policy.sfn_cw_policy[0]",
														"aws_iam_policy.sfn_cw_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-cloudwatch-attach",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-ec2-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_ec2_policy[0].arn",
														"aws_iam_policy.sfn_ec2_policy[0]",
														"aws_iam_policy.sfn_ec2_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-ec2-attach",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-emr-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_emr_policy[0].arn",
														"aws_iam_policy.sfn_emr_policy[0]",
														"aws_iam_policy.sfn_emr_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-emr-attach",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-s3-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_s3_policy[0].arn",
														"aws_iam_policy.sfn_s3_policy[0]",
														"aws_iam_policy.sfn_s3_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-s3-attach",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_sfn_state_machine.this",
											"expressions": {
												"definition": {
													"references": [
														"var.definition",
													],
												},
												"name": {
													"references": [
														"var.name",
													],
												},
												"role_arn": {
													"references": [
														"var.role_arn",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"local.tags",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_sfn_state_machine",
										},
										{
											"address":             "data.aws_caller_identity.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_caller_identity",
										},
										{
											"address":             "data.aws_region.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
											"schema_version":      0,
											"type":                "aws_region",
										},
									],
									"variables": {
										"create_role": {
											"default":     false,
											"description": "Defaults to false - setting to true will create a role for use to the state machine. Requires role_policy",
										},
										"create_sfn_role": {
											"default":     false,
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"definition": {
											"description": "The ASL code for the state machine",
										},
										"ec2_dynamodb_policy_path": {
											"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
											"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
										},
										"env": {
											"default":     "test",
											"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
										},
										"name": {
											"description": "The name to give the state machine",
										},
										"role_arn": {
											"description": "Role ARN used for the state machine - ignore if leveraging create_role",
										},
										"role_policy": {
											"description": "The role policy to use when leveraging create_role - ignore if leveraging role_arn",
										},
										"sfn_cw_policy_path": {
											"default":     "../../iam/step-function/sfn-cw-policy.json",
											"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
										},
										"sfn_ec2_policy_path": {
											"default":     "../../iam/step-function/sfn-ec2-policy.json",
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"sfn_emr_policy_path": {
											"default":     "../../iam/step-function/sfn-emr-policy.json",
											"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
										},
										"sfn_policy_path": {
											"default":     "../../iam/step-function/policy.json",
											"description": "Contains generic policy for step function execution and interacting with different services.",
										},
										"sfn_s3_policy_path": {
											"default":     "../../iam/step-function/sfn-s3-policy.json",
											"description": "Path to emr ec2 policy",
										},
										"tags": {
											"default":     {},
											"description": "A map of tags to apply to resources created by this module",
										},
									},
								},
								"source":             "tfe.terraform.tools.c9bku.net/BankUnited-Community/cndp-step-function/aws",
								"version_constraint": "0.0.1",
							},
						},
						"resources": [
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
							{
								"address":             "data.aws_region.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-ddl-creation-step-function:aws",
								"schema_version":      0,
								"type":                "aws_region",
							},
						],
						"variables": {
							"core_instance_count": {
								"default": 2,
							},
							"create_sfn_role": {
								"default":     true,
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"ec2_dynamodb_policy_path": {
								"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
								"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
							},
							"emr_release_label": {
								"default": "emr-5.29.0",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
							},
							"instance_type": {
								"default": "m5.xlarge",
							},
							"master_instance_count": {
								"default": 1,
							},
							"sfn_cw_policy_path": {
								"default":     "../../iam/step-function/sfn-cw-policy.json",
								"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
							},
							"sfn_ec2_policy_path": {
								"default":     "../../iam/step-function/sfn-ec2-policy.json",
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"sfn_emr_policy_path": {
								"default":     "../../iam/step-function/sfn-emr-policy.json",
								"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
							},
							"sfn_policy_path": {
								"default":     "../../iam/step-function/policy.json",
								"description": "Contains generic policy for step function execution and interacting with different services.",
							},
							"sfn_s3_policy_path": {
								"default":     "../../iam/step-function/sfn-s3-policy.json",
								"description": "Path to emr ec2 policy",
							},
							"sfn_subnet_id": {
								"default": "subnet-0a80d66c576c8407a",
							},
							"tags": {
								"default": {
									"ApplicationID":   "",
									"ApplicationName": "data-processing-emr",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "",
									"Environment":     "uat",
									"ProjectID":       "PRJ0010800",
									"Tier":            "4",
								},
								"description": "A mapping of tags to assign to all resources",
							},
						},
					},
					"source": "./step-function/bkun-dgea-ddl-creation-step-function",
				},
				"bkun-dgea-emr-setup-stepfunction": {
					"depends_on": [
						"module.bkun-dgea-create-emr-roles",
					],
					"expressions": {
						"create_sfn_role": {
							"references": [
								"var.create_sfn_role",
							],
						},
						"ec2_dynamodb_policy_path": {
							"references": [
								"var.ec2_dynamodb_policy_path",
							],
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"sfn_cw_policy_path": {
							"references": [
								"var.sfn_cw_policy_path",
							],
						},
						"sfn_ec2_policy_path": {
							"references": [
								"var.sfn_ec2_policy_path",
							],
						},
						"sfn_emr_policy_path": {
							"references": [
								"var.sfn_emr_policy_path",
							],
						},
						"sfn_policy_path": {
							"references": [
								"var.sfn_policy_path",
							],
						},
						"sfn_s3_policy_path": {
							"references": [
								"var.sfn_s3_policy_path",
							],
						},
						"sfn_subnet_id": {
							"references": [
								"var.sfn_subnet_id",
							],
						},
						"tags": {
							"references": [
								"var.tags",
							],
						},
					},
					"module": {
						"module_calls": {
							"bkun-dgea-etl-emr-cluster-setup-stepfunction": {
								"expressions": {
									"create_sfn_role": {
										"references": [
											"var.create_sfn_role",
										],
									},
									"definition": {
										"references": [
											"var.env",
											"var.env",
											"var.emr_release_label",
											"var.env",
											"var.env",
											"var.env",
											"var.env",
											"var.env",
											"var.tags[\"ApplicationID\"]",
											"var.tags",
											"var.tags[\"ApplicationName\"]",
											"var.tags",
											"var.tags[\"ApplicationRole\"]",
											"var.tags",
											"var.tags[\"BusinessLine\"]",
											"var.tags",
											"var.env",
											"var.tags[\"CostCenter\"]",
											"var.tags",
											"var.tags[\"Environment\"]",
											"var.tags",
											"var.tags[\"ProjectID\"]",
											"var.tags",
											"var.tags[\"Tier\"]",
											"var.tags",
											"var.tags[\"BackupTier\"]",
											"var.tags",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"var.env",
											"var.sfn_subnet_id",
											"var.env",
											"var.env",
										],
									},
									"ec2_dynamodb_policy_path": {
										"references": [
											"var.ec2_dynamodb_policy_path",
										],
									},
									"env": {
										"references": [
											"var.env",
										],
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"role_arn": {
										"references": [
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"sfn_cw_policy_path": {
										"references": [
											"var.sfn_cw_policy_path",
										],
									},
									"sfn_ec2_policy_path": {
										"references": [
											"var.sfn_ec2_policy_path",
										],
									},
									"sfn_emr_policy_path": {
										"references": [
											"var.sfn_emr_policy_path",
										],
									},
									"sfn_policy_path": {
										"references": [
											"var.sfn_policy_path",
										],
									},
									"sfn_s3_policy_path": {
										"references": [
											"var.sfn_s3_policy_path",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"local.tags",
										],
									},
								},
								"module": {
									"resources": [
										{
											"address": "aws_iam_policy.sfn_cw_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to send cloudwatch events",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_cw_policy_path",
														"var.env",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_cw_policy",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_ec2_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_ec2_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_ec2_policy",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_emr_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_emr_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_emr_policy",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy provides basic permission for step function executions.",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_policy",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_s3_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_s3_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_s3_policy",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_role.iam_for_sfn",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"assume_role_policy": {
													"constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"states.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\"\n    }\n  ]\n}\n",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "iam_for_sfn",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role",
										},
										{
											"address": "aws_iam_role_policy_attachment.lambda-access-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"constant_value": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "lambda-access-attach",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.sfn-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_policy[0].arn",
														"aws_iam_policy.sfn_policy[0]",
														"aws_iam_policy.sfn_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn-attach",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_cw_policy[0].arn",
														"aws_iam_policy.sfn_cw_policy[0]",
														"aws_iam_policy.sfn_cw_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-cloudwatch-attach",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-ec2-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_ec2_policy[0].arn",
														"aws_iam_policy.sfn_ec2_policy[0]",
														"aws_iam_policy.sfn_ec2_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-ec2-attach",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-emr-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_emr_policy[0].arn",
														"aws_iam_policy.sfn_emr_policy[0]",
														"aws_iam_policy.sfn_emr_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-emr-attach",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-s3-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_s3_policy[0].arn",
														"aws_iam_policy.sfn_s3_policy[0]",
														"aws_iam_policy.sfn_s3_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-s3-attach",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_sfn_state_machine.this",
											"expressions": {
												"definition": {
													"references": [
														"var.definition",
													],
												},
												"name": {
													"references": [
														"var.name",
													],
												},
												"role_arn": {
													"references": [
														"var.role_arn",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"local.tags",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_sfn_state_machine",
										},
										{
											"address":             "data.aws_caller_identity.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_caller_identity",
										},
										{
											"address":             "data.aws_region.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-etl-emr-cluster-setup-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_region",
										},
									],
									"variables": {
										"create_role": {
											"default":     false,
											"description": "Defaults to false - setting to true will create a role for use to the state machine. Requires role_policy",
										},
										"create_sfn_role": {
											"default":     false,
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"definition": {
											"description": "The ASL code for the state machine",
										},
										"ec2_dynamodb_policy_path": {
											"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
											"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
										},
										"env": {
											"default":     "test",
											"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
										},
										"name": {
											"description": "The name to give the state machine",
										},
										"role_arn": {
											"description": "Role ARN used for the state machine - ignore if leveraging create_role",
										},
										"role_policy": {
											"description": "The role policy to use when leveraging create_role - ignore if leveraging role_arn",
										},
										"sfn_cw_policy_path": {
											"default":     "../../iam/step-function/sfn-cw-policy.json",
											"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
										},
										"sfn_ec2_policy_path": {
											"default":     "../../iam/step-function/sfn-ec2-policy.json",
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"sfn_emr_policy_path": {
											"default":     "../../iam/step-function/sfn-emr-policy.json",
											"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
										},
										"sfn_policy_path": {
											"default":     "../../iam/step-function/policy.json",
											"description": "Contains generic policy for step function execution and interacting with different services.",
										},
										"sfn_s3_policy_path": {
											"default":     "../../iam/step-function/sfn-s3-policy.json",
											"description": "Path to emr ec2 policy",
										},
										"tags": {
											"default":     {},
											"description": "A map of tags to apply to resources created by this module",
										},
									},
								},
								"source":             "tfe.terraform.tools.c9bku.net/BankUnited-Community/cndp-step-function/aws",
								"version_constraint": "0.0.1",
							},
						},
						"resources": [
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-emr-setup-stepfunction:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
							{
								"address":             "data.aws_region.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-emr-setup-stepfunction:aws",
								"schema_version":      0,
								"type":                "aws_region",
							},
						],
						"variables": {
							"core_instance_count": {
								"default": 2,
							},
							"create_sfn_role": {
								"default":     true,
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"ec2_dynamodb_policy_path": {
								"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
								"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
							},
							"ec2_key_name": {
								"default": "DP-UAT-EMR",
							},
							"emr_release_label": {
								"default": "emr-5.29.0",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
							},
							"instance_type": {
								"default": "m5.xlarge",
							},
							"master_instance_count": {
								"default": 1,
							},
							"sfn_cw_policy_path": {
								"default":     "../../iam/step-function/sfn-cw-policy.json",
								"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
							},
							"sfn_ec2_policy_path": {
								"default":     "../../iam/step-function/sfn-ec2-policy.json",
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"sfn_emr_policy_path": {
								"default":     "../../iam/step-function/sfn-emr-policy.json",
								"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
							},
							"sfn_policy_path": {
								"default":     "../../iam/step-function/policy.json",
								"description": "Contains generic policy for step function execution and interacting with different services.",
							},
							"sfn_s3_policy_path": {
								"default":     "../../iam/step-function/sfn-s3-policy.json",
								"description": "Path to emr ec2 policy",
							},
							"sfn_subnet_id": {},
							"tags": {
								"default": {
									"ApplicationID":   "",
									"ApplicationName": "data-processing-emr",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "",
									"Environment":     "uat",
									"ProjectID":       "PRJ0010800",
									"Tier":            "4",
								},
								"description": "A mapping of tags to assign to all resources",
							},
						},
					},
					"source": "./step-function/bkun-dgea-emr-setup-stepfunction/",
				},
				"bkun-dgea-etl-stepfunction": {
					"depends_on": [
						"module.bkun-dgea-emr-setup-stepfunction",
					],
					"expressions": {
						"create_sfn_role": {
							"constant_value": false,
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"sfn_subnet_id": {
							"references": [
								"var.sfn_subnet_id",
							],
						},
						"tags": {
							"references": [
								"var.tags",
							],
						},
					},
					"module": {
						"module_calls": {
							"bkun-dgea-etl-stepfunction": {
								"expressions": {
									"create_sfn_role": {
										"references": [
											"var.create_sfn_role",
										],
									},
									"definition": {
										"references": [
											"var.env",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"env": {
										"references": [
											"var.env",
										],
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"role_arn": {
										"references": [
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"local.tags",
										],
									},
								},
								"module": {
									"resources": [
										{
											"address": "aws_iam_policy.sfn_cw_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to send cloudwatch events",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_cw_policy_path",
														"var.env",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_cw_policy",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_ec2_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_ec2_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_ec2_policy",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_emr_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_emr_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_emr_policy",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy provides basic permission for step function executions.",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_policy",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_s3_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_s3_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_s3_policy",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_role.iam_for_sfn",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"assume_role_policy": {
													"constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"states.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\"\n    }\n  ]\n}\n",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "iam_for_sfn",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role",
										},
										{
											"address": "aws_iam_role_policy_attachment.lambda-access-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"constant_value": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "lambda-access-attach",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.sfn-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_policy[0].arn",
														"aws_iam_policy.sfn_policy[0]",
														"aws_iam_policy.sfn_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn-attach",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_cw_policy[0].arn",
														"aws_iam_policy.sfn_cw_policy[0]",
														"aws_iam_policy.sfn_cw_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-cloudwatch-attach",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-ec2-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_ec2_policy[0].arn",
														"aws_iam_policy.sfn_ec2_policy[0]",
														"aws_iam_policy.sfn_ec2_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-ec2-attach",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-emr-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_emr_policy[0].arn",
														"aws_iam_policy.sfn_emr_policy[0]",
														"aws_iam_policy.sfn_emr_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-emr-attach",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-s3-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_s3_policy[0].arn",
														"aws_iam_policy.sfn_s3_policy[0]",
														"aws_iam_policy.sfn_s3_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-s3-attach",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_sfn_state_machine.this",
											"expressions": {
												"definition": {
													"references": [
														"var.definition",
													],
												},
												"name": {
													"references": [
														"var.name",
													],
												},
												"role_arn": {
													"references": [
														"var.role_arn",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"local.tags",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_sfn_state_machine",
										},
										{
											"address":             "data.aws_caller_identity.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_caller_identity",
										},
										{
											"address":             "data.aws_region.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_region",
										},
									],
									"variables": {
										"create_role": {
											"default":     false,
											"description": "Defaults to false - setting to true will create a role for use to the state machine. Requires role_policy",
										},
										"create_sfn_role": {
											"default":     false,
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"definition": {
											"description": "The ASL code for the state machine",
										},
										"ec2_dynamodb_policy_path": {
											"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
											"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
										},
										"env": {
											"default":     "test",
											"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
										},
										"name": {
											"description": "The name to give the state machine",
										},
										"role_arn": {
											"description": "Role ARN used for the state machine - ignore if leveraging create_role",
										},
										"role_policy": {
											"description": "The role policy to use when leveraging create_role - ignore if leveraging role_arn",
										},
										"sfn_cw_policy_path": {
											"default":     "../../iam/step-function/sfn-cw-policy.json",
											"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
										},
										"sfn_ec2_policy_path": {
											"default":     "../../iam/step-function/sfn-ec2-policy.json",
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"sfn_emr_policy_path": {
											"default":     "../../iam/step-function/sfn-emr-policy.json",
											"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
										},
										"sfn_policy_path": {
											"default":     "../../iam/step-function/policy.json",
											"description": "Contains generic policy for step function execution and interacting with different services.",
										},
										"sfn_s3_policy_path": {
											"default":     "../../iam/step-function/sfn-s3-policy.json",
											"description": "Path to emr ec2 policy",
										},
										"tags": {
											"default":     {},
											"description": "A map of tags to apply to resources created by this module",
										},
									},
								},
								"source":             "tfe.terraform.tools.c9bku.net/BankUnited-Community/cndp-step-function/aws",
								"version_constraint": "0.0.1",
							},
						},
						"resources": [
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
							{
								"address":             "data.aws_region.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-etl-stepfunction:aws",
								"schema_version":      0,
								"type":                "aws_region",
							},
						],
						"variables": {
							"core_instance_count": {
								"default": 2,
							},
							"create_policy": {
								"default":     true,
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"create_sfn_role": {
								"default":     true,
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"ec2_dynamodb_policy_path": {
								"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
								"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
							},
							"ec2_key_name": {
								"default": "DP-UAT-EMR",
							},
							"emr_release_label": {
								"default": "emr-5.29.0",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
							},
							"instance_type": {
								"default": "m5.xlarge",
							},
							"master_instance_count": {
								"default": 1,
							},
							"sfn_cw_policy_path": {
								"default":     "../../iam/step-function/sfn-cw-policy.json",
								"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
							},
							"sfn_ec2_policy_path": {
								"default":     "../../iam/step-function/sfn-ec2-policy.json",
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"sfn_emr_policy_path": {
								"default":     "../../iam/step-function/sfn-emr-policy.json",
								"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
							},
							"sfn_policy_path": {
								"default":     "../../iam/step-function/policy.json",
								"description": "Contains generic policy for step function execution and interacting with different services.",
							},
							"sfn_s3_policy_path": {
								"default":     "../../iam/step-function/sfn-s3-policy.json",
								"description": "Path to emr ec2 policy",
							},
							"sfn_subnet_id": {},
							"tags": {
								"default": {
									"ApplicationID":   "",
									"ApplicationName": "data-processing-emr",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "",
									"Environment":     "uat",
									"ProjectID":       "PRJ0010800",
									"Tier":            "4",
								},
								"description": "A mapping of tags to assign to all resources",
							},
						},
					},
					"source": "./step-function/bkun-dgea-etl-stepfunction",
				},
				"bkun-dgea-maskout-data-copy": {
					"depends_on": [
						"module.bkun-dgea-emr-setup-stepfunction",
					],
					"expressions": {
						"create_sfn_role": {
							"constant_value": false,
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"sfn_subnet_id": {
							"references": [
								"var.sfn_subnet_id",
							],
						},
						"tags": {
							"references": [
								"var.tags",
							],
						},
					},
					"module": {
						"module_calls": {
							"bkun-dgea-maskout-data-copy": {
								"expressions": {
									"create_sfn_role": {
										"references": [
											"var.create_sfn_role",
										],
									},
									"definition": {
										"references": [
											"var.env",
											"var.env",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
											"var.env",
										],
									},
									"env": {
										"references": [
											"var.env",
										],
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"role_arn": {
										"references": [
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"local.tags",
										],
									},
								},
								"module": {
									"resources": [
										{
											"address": "aws_iam_policy.sfn_cw_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to send cloudwatch events",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_cw_policy_path",
														"var.env",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_cw_policy",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_ec2_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_ec2_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_ec2_policy",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_emr_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_emr_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_emr_policy",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy provides basic permission for step function executions.",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_policy",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_s3_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_s3_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_s3_policy",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_role.iam_for_sfn",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"assume_role_policy": {
													"constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"states.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\"\n    }\n  ]\n}\n",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "iam_for_sfn",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_role",
										},
										{
											"address": "aws_iam_role_policy_attachment.lambda-access-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"constant_value": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "lambda-access-attach",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.sfn-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_policy[0].arn",
														"aws_iam_policy.sfn_policy[0]",
														"aws_iam_policy.sfn_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn-attach",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_cw_policy[0].arn",
														"aws_iam_policy.sfn_cw_policy[0]",
														"aws_iam_policy.sfn_cw_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-cloudwatch-attach",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-ec2-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_ec2_policy[0].arn",
														"aws_iam_policy.sfn_ec2_policy[0]",
														"aws_iam_policy.sfn_ec2_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-ec2-attach",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-emr-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_emr_policy[0].arn",
														"aws_iam_policy.sfn_emr_policy[0]",
														"aws_iam_policy.sfn_emr_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-emr-attach",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-s3-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_s3_policy[0].arn",
														"aws_iam_policy.sfn_s3_policy[0]",
														"aws_iam_policy.sfn_s3_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-s3-attach",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_sfn_state_machine.this",
											"expressions": {
												"definition": {
													"references": [
														"var.definition",
													],
												},
												"name": {
													"references": [
														"var.name",
													],
												},
												"role_arn": {
													"references": [
														"var.role_arn",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"local.tags",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_sfn_state_machine",
										},
										{
											"address":             "data.aws_caller_identity.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_caller_identity",
										},
										{
											"address":             "data.aws_region.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
											"schema_version":      0,
											"type":                "aws_region",
										},
									],
									"variables": {
										"create_role": {
											"default":     false,
											"description": "Defaults to false - setting to true will create a role for use to the state machine. Requires role_policy",
										},
										"create_sfn_role": {
											"default":     false,
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"definition": {
											"description": "The ASL code for the state machine",
										},
										"ec2_dynamodb_policy_path": {
											"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
											"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
										},
										"env": {
											"default":     "test",
											"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
										},
										"name": {
											"description": "The name to give the state machine",
										},
										"role_arn": {
											"description": "Role ARN used for the state machine - ignore if leveraging create_role",
										},
										"role_policy": {
											"description": "The role policy to use when leveraging create_role - ignore if leveraging role_arn",
										},
										"sfn_cw_policy_path": {
											"default":     "../../iam/step-function/sfn-cw-policy.json",
											"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
										},
										"sfn_ec2_policy_path": {
											"default":     "../../iam/step-function/sfn-ec2-policy.json",
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"sfn_emr_policy_path": {
											"default":     "../../iam/step-function/sfn-emr-policy.json",
											"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
										},
										"sfn_policy_path": {
											"default":     "../../iam/step-function/policy.json",
											"description": "Contains generic policy for step function execution and interacting with different services.",
										},
										"sfn_s3_policy_path": {
											"default":     "../../iam/step-function/sfn-s3-policy.json",
											"description": "Path to emr ec2 policy",
										},
										"tags": {
											"default":     {},
											"description": "A map of tags to apply to resources created by this module",
										},
									},
								},
								"source":             "tfe.terraform.tools.c9bku.net/BankUnited-Community/cndp-step-function/aws",
								"version_constraint": "0.0.1",
							},
						},
						"resources": [
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
							{
								"address":             "data.aws_region.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-maskout-data-copy:aws",
								"schema_version":      0,
								"type":                "aws_region",
							},
						],
						"variables": {
							"core_instance_count": {
								"default": 2,
							},
							"create_sfn_role": {
								"default":     false,
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"ec2_dynamodb_policy_path": {
								"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
								"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
							},
							"emr_release_label": {
								"default": "emr-5.29.0",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
							},
							"instance_type": {
								"default": "m5.xlarge",
							},
							"master_instance_count": {
								"default": 1,
							},
							"sfn_cw_policy_path": {
								"default":     "../../iam/step-function/sfn-cw-policy.json",
								"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
							},
							"sfn_ec2_policy_path": {
								"default":     "../../iam/step-function/sfn-ec2-policy.json",
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"sfn_emr_policy_path": {
								"default":     "../../iam/step-function/sfn-emr-policy.json",
								"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
							},
							"sfn_policy_path": {
								"default":     "../../iam/step-function/policy.json",
								"description": "Contains generic policy for step function execution and interacting with different services.",
							},
							"sfn_s3_policy_path": {
								"default":     "../../iam/step-function/sfn-s3-policy.json",
								"description": "Path to emr ec2 policy",
							},
							"sfn_subnet_id": {},
							"tags": {
								"default": {
									"ApplicationID":   "",
									"ApplicationName": "data-processing-emr",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "",
									"Environment":     "uat",
									"ProjectID":       "PRJ0010800",
									"Tier":            "4",
								},
								"description": "A mapping of tags to assign to all resources",
							},
						},
					},
					"source": "./step-function/bkun-dgea-maskout-data-copy",
				},
				"bkun-dgea-trigger-redshift-process": {
					"depends_on": [
						"module.bkun-dgea-emr-setup-stepfunction",
					],
					"expressions": {
						"create_sfn_role": {
							"constant_value": false,
						},
						"env": {
							"references": [
								"var.env",
							],
						},
						"sfn_subnet_id": {
							"references": [
								"var.sfn_subnet_id",
							],
						},
						"tags": {
							"references": [
								"var.tags",
							],
						},
					},
					"module": {
						"module_calls": {
							"bkun-dgea-s3-to-redshift-stepfunction": {
								"expressions": {
									"create_sfn_role": {
										"references": [
											"var.create_sfn_role",
										],
									},
									"definition": {
										"references": [
											"var.env",
											"data.aws_region.current.name",
											"data.aws_region.current",
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"env": {
										"references": [
											"var.env",
										],
									},
									"name": {
										"references": [
											"var.env",
										],
									},
									"role_arn": {
										"references": [
											"data.aws_caller_identity.current.account_id",
											"data.aws_caller_identity.current",
											"var.env",
										],
									},
									"tags": {
										"references": [
											"var.tags",
											"local.tags",
										],
									},
								},
								"module": {
									"resources": [
										{
											"address": "aws_iam_policy.sfn_cw_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to send cloudwatch events",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_cw_policy_path",
														"var.env",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_cw_policy",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_ec2_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_ec2_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_ec2_policy",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_emr_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_emr_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_emr_policy",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy provides basic permission for step function executions.",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_policy",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_policy.sfn_s3_policy",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"description": {
													"constant_value": "This policy allows step function to set up EMR cluster",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"policy": {
													"references": [
														"var.sfn_s3_policy_path",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"data.aws_region.current.name",
														"data.aws_region.current",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn_s3_policy",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_policy",
										},
										{
											"address": "aws_iam_role.iam_for_sfn",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"assume_role_policy": {
													"constant_value": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"states.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\"\n    }\n  ]\n}\n",
												},
												"name": {
													"references": [
														"var.env",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"var.env",
													],
												},
											},
											"mode":                "managed",
											"name":                "iam_for_sfn",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role",
										},
										{
											"address": "aws_iam_role_policy_attachment.lambda-access-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"constant_value": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "lambda-access-attach",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.sfn-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_policy[0].arn",
														"aws_iam_policy.sfn_policy[0]",
														"aws_iam_policy.sfn_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "sfn-attach",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_cw_policy[0].arn",
														"aws_iam_policy.sfn_cw_policy[0]",
														"aws_iam_policy.sfn_cw_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-cloudwatch-attach",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-ec2-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_ec2_policy[0].arn",
														"aws_iam_policy.sfn_ec2_policy[0]",
														"aws_iam_policy.sfn_ec2_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-ec2-attach",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-emr-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_emr_policy[0].arn",
														"aws_iam_policy.sfn_emr_policy[0]",
														"aws_iam_policy.sfn_emr_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-emr-attach",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_iam_role_policy_attachment.step-s3-attach",
											"count_expression": {
												"references": [
													"var.create_sfn_role",
												],
											},
											"expressions": {
												"policy_arn": {
													"references": [
														"var.create_sfn_role",
														"aws_iam_policy.sfn_s3_policy[0].arn",
														"aws_iam_policy.sfn_s3_policy[0]",
														"aws_iam_policy.sfn_s3_policy",
														"data.aws_caller_identity.current.account_id",
														"data.aws_caller_identity.current",
														"var.env",
													],
												},
												"role": {
													"references": [
														"aws_iam_role.iam_for_sfn[0].name",
														"aws_iam_role.iam_for_sfn[0]",
														"aws_iam_role.iam_for_sfn",
													],
												},
											},
											"mode":                "managed",
											"name":                "step-s3-attach",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_iam_role_policy_attachment",
										},
										{
											"address": "aws_sfn_state_machine.this",
											"expressions": {
												"definition": {
													"references": [
														"var.definition",
													],
												},
												"name": {
													"references": [
														"var.name",
													],
												},
												"role_arn": {
													"references": [
														"var.role_arn",
													],
												},
												"tags": {
													"references": [
														"var.tags",
														"local.tags",
													],
												},
											},
											"mode":                "managed",
											"name":                "this",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_sfn_state_machine",
										},
										{
											"address":             "data.aws_caller_identity.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_caller_identity",
										},
										{
											"address":             "data.aws_region.current",
											"mode":                "data",
											"name":                "current",
											"provider_config_key": "bkun-dgea-s3-to-redshift-stepfunction:aws",
											"schema_version":      0,
											"type":                "aws_region",
										},
									],
									"variables": {
										"create_role": {
											"default":     false,
											"description": "Defaults to false - setting to true will create a role for use to the state machine. Requires role_policy",
										},
										"create_sfn_role": {
											"default":     false,
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"definition": {
											"description": "The ASL code for the state machine",
										},
										"ec2_dynamodb_policy_path": {
											"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
											"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
										},
										"env": {
											"default":     "test",
											"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
										},
										"name": {
											"description": "The name to give the state machine",
										},
										"role_arn": {
											"description": "Role ARN used for the state machine - ignore if leveraging create_role",
										},
										"role_policy": {
											"description": "The role policy to use when leveraging create_role - ignore if leveraging role_arn",
										},
										"sfn_cw_policy_path": {
											"default":     "../../iam/step-function/sfn-cw-policy.json",
											"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
										},
										"sfn_ec2_policy_path": {
											"default":     "../../iam/step-function/sfn-ec2-policy.json",
											"description": "Contains policy to interact EC2 instances via step functions.",
										},
										"sfn_emr_policy_path": {
											"default":     "../../iam/step-function/sfn-emr-policy.json",
											"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
										},
										"sfn_policy_path": {
											"default":     "../../iam/step-function/policy.json",
											"description": "Contains generic policy for step function execution and interacting with different services.",
										},
										"sfn_s3_policy_path": {
											"default":     "../../iam/step-function/sfn-s3-policy.json",
											"description": "Path to emr ec2 policy",
										},
										"tags": {
											"default":     {},
											"description": "A map of tags to apply to resources created by this module",
										},
									},
								},
								"source":             "tfe.terraform.tools.c9bku.net/BankUnited-Community/cndp-step-function/aws",
								"version_constraint": "0.0.1",
							},
						},
						"resources": [
							{
								"address":             "data.aws_caller_identity.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-trigger-redshift-process:aws",
								"schema_version":      0,
								"type":                "aws_caller_identity",
							},
							{
								"address":             "data.aws_region.current",
								"mode":                "data",
								"name":                "current",
								"provider_config_key": "bkun-dgea-trigger-redshift-process:aws",
								"schema_version":      0,
								"type":                "aws_region",
							},
						],
						"variables": {
							"core_instance_count": {
								"default": 2,
							},
							"create_sfn_role": {
								"default":     false,
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"ec2_dynamodb_policy_path": {
								"default":     "../../iam/step-function/ec2-dynamodb-policy.json",
								"description": "Policies for ec2 instances of emr cluster to write data ingestion status in dynamodb.",
							},
							"ec2_key_name": {
								"default": "DP-UAT-EMR",
							},
							"emr_release_label": {
								"default": "emr-5.29.0",
							},
							"env": {
								"default":     "uat",
								"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
							},
							"instance_type": {
								"default": "m5.xlarge",
							},
							"master_instance_count": {
								"default": 1,
							},
							"sfn_cw_policy_path": {
								"default":     "../../iam/step-function/sfn-cw-policy.json",
								"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
							},
							"sfn_ec2_policy_path": {
								"default":     "../../iam/step-function/sfn-ec2-policy.json",
								"description": "Contains policy to interact EC2 instances via step functions.",
							},
							"sfn_emr_policy_path": {
								"default":     "../../iam/step-function/sfn-emr-policy.json",
								"description": "Contains policy to execute various EMR commands using step functions like createcluster.",
							},
							"sfn_policy_path": {
								"default":     "../../iam/step-function/policy.json",
								"description": "Contains generic policy for step function execution and interacting with different services.",
							},
							"sfn_s3_policy_path": {
								"default":     "../../iam/step-function/sfn-s3-policy.json",
								"description": "Path to emr ec2 policy",
							},
							"sfn_subnet_id": {},
							"tags": {
								"default": {
									"ApplicationID":   "",
									"ApplicationName": "data-processing-emr",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "",
									"Environment":     "uat",
									"ProjectID":       "PRJ0010800",
									"Tier":            "4",
								},
								"description": "A mapping of tags to assign to all resources",
							},
						},
					},
					"source": "./step-function/bkun-dgea-trigger-redshift-process",
				},
			},
			"variables": {
				"base_path": {
					"default": "./s3/bkun-dgea-dp-source-artifacts",
				},
				"cluster_database_name": {
					"default":     "uat",
					"description": "The name of the database to create",
				},
				"cluster_master_password": {
					"default":     "Hellow$123WE",
					"description": "Master user password",
				},
				"cluster_master_username": {
					"default":     "awsuser",
					"description": "Master username",
				},
				"cluster_name": {
					"default":     "datamart",
					"description": "Redshift cluster name to be provided here",
				},
				"cluster_node_type": {
					"default":     "dc2.8xlarge",
					"description": "Redshift cluster node type",
				},
				"cluster_number_of_nodes": {
					"default":     5,
					"description": "Number of nodes in the cluster (values greater than 1 will trigger 'cluster_type' of 'multi-node')",
				},
				"create_kms_key": {
					"default":     false,
					"description": "Create a new KMS key for use with this bucket",
				},
				"create_sfn_role": {
					"default":     true,
					"description": "Contains policy to interact EC2 instances via step functions.",
				},
				"di_dynamodb_policy_path": {
					"default":     "./iam/lambda-function/cross-account.json",
					"description": "Path to policy json",
				},
				"dynamodb_email_policy_path": {
					"default":     "./iam/lambda-function/bkun-dgea-dynamodb-email-notification-handler/dynamodb_write.json",
					"description": "Path to policy json",
				},
				"ec2_dynamodb_policy_path": {
					"default":     "./iam/emr-role/ec2-dynamodb-policy.json",
					"description": "Contains policy to keep emr logs on S3 and trasfer role to ec2 instances of emr cluster.",
				},
				"ec2_kms_policy_path": {
					"default":     "./iam/emr-role/kms.json",
					"description": "Policies for ec2 instances of emr cluster to s3.",
				},
				"ec2_policy_path": {
					"default":     "./iam/lambda-function/ec2.json",
					"description": "Path to policy json",
				},
				"emr_policy_path": {
					"default":     "./iam/lambda-function/emr_cluster.json",
					"description": "Path to policy json",
				},
				"encrypted": {
					"default":     true,
					"description": "Encryption is specified whether true of false",
				},
				"env": {
					"default":     "uat",
					"description": "Environment for which we are running terrafrom scripts like dev, test, prod",
				},
				"env_prefix": {
					"default":     "bkun-dgea",
					"description": "environment prefix to be provided here",
				},
				"generic_policy_path": {
					"default":     "./iam/emr-role/generic-policy.json",
					"description": "Generic policies for ec2 instances of emr cluster.",
				},
				"partition_key": {
					"default":     "id",
					"description": "The attribute to use as the hash (partition) key. Must also be defined as an attribute",
				},
				"ports": {
					"default": {
						"5439": [
							"10.19.0.0/16",
							"192.168.104.0/21",
							"192.168.200.0/21",
							"10.0.0.0/8",
							"10.13.32.0/20",
							"10.13.35.134/32",
							"10.13.35.135/32",
							"10.44.0.0/16",
							"10.39.0.0/16",
						],
					},
				},
				"redshift_subnets": {
					"default": [
						"subnet-0a80d66c576c8407a",
					],
					"description": "add discription here",
				},
				"s3_key": {
					"default":     "terraform/lambda",
					"description": "Source bucket to store lambda function code and other required scripts",
				},
				"s3_policy_path": {
					"default":     "./iam/emr-role/s3.json",
					"description": "Policies for ec2 instances of emr cluster to s3.",
				},
				"s3_source_bucket_policy_path": {
					"default":     "s3/bkun-dgea-dp-source-artifacts/source_bucket_policy.json",
					"description": "Bucket Policy to be applied to the bucket",
				},
				"security_group_ids": {
					"default": [
						"sg-07378ea7f9a52d932",
					],
					"description": "List of security group ids when Lambda Function should run in the VPC.",
				},
				"sfn_cw_policy_path": {
					"default":     "./iam/step-function/sfn-cw-policy.json",
					"description": "Cloudwatch policy to create log streams for step functions to keep data migration log during unredacted-to-redacted data transfer.",
				},
				"sfn_ec2_policy_path": {
					"default":     "./iam/step-function/sfn-ec2-policy.json",
					"description": "Path to emr ec2 policy",
				},
				"sfn_emr_policy_path": {
					"default":     "./iam/step-function/sfn-emr-policy.json",
					"description": "Path to emr ec2 policy",
				},
				"sfn_policy_path": {
					"default":     "./iam/step-function/policy.json",
					"description": "Path to policy json",
				},
				"sfn_s3_policy_path": {
					"default":     "./iam/step-function/sfn-s3-policy.json",
					"description": "Path to emr ec2 policy",
				},
				"sfn_subnet_id": {
					"default":     "subnet-07911106ea5728129",
					"description": "Specify the list of subnet groups in which we want to create EMR cluster.",
				},
				"subnet_ids": {
					"default": [
						"subnet-045d4ee14b4857ce8",
					],
					"description": "List of subnet ids when Lambda Function should run in the VPC. Usually private or intra subnets.",
				},
				"tags": {
					"default": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"description": "A mapping of tags to assign to all resources",
				},
				"vpc_id": {
					"default":     "vpc-0edee2f91f115d6b5",
					"description": "VPC where the Redshift cluster would be launched",
				},
			},
		},
	},
	"format_version": "0.2",
	"planned_values": {
		"root_module": {
			"child_modules": [
				{
					"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
					"child_modules": [
						{
							"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
							"resources": [
								{
									"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_cloudwatch_log_group.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"tags":     {},
										"tags_all": {},
									},
									"type": "aws_cloudwatch_log_group",
									"values": {
										"arn":               "arn:aws:logs:us-east-1:630953916312:log-group:/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
										"id":                "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
										"kms_key_id":        "",
										"name":              "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
										"name_prefix":       null,
										"retention_in_days": 14,
										"tags":              {},
										"tags_all":          {},
									},
								},
								{
									"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_function.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"dead_letter_config": [],
										"environment": [
											{
												"variables": {},
											},
										],
										"file_system_config": [],
										"image_config":       [],
										"layers": [
											false,
										],
										"tags":     {},
										"tags_all": {},
										"tracing_config": [
											{},
										],
										"vpc_config": [
											{
												"security_group_ids": [
													false,
												],
												"subnet_ids": [
													false,
												],
											},
										],
									},
									"type": "aws_lambda_function",
									"values": {
										"arn": "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
										"code_signing_config_arn": "",
										"dead_letter_config":      [],
										"description":             "",
										"environment": [
											{
												"variables": {
													"function_name": "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
												},
											},
										],
										"file_system_config": [],
										"filename":           null,
										"function_name":      "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
										"handler":            "lambda_function.lambda_handler",
										"id":                 "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
										"image_config":       [],
										"image_uri":          "",
										"invoke_arn":         "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability/invocations",
										"kms_key_arn":        "",
										"last_modified":      "2021-08-16T16:37:35.239+0000",
										"layers": [
											"arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
										],
										"memory_size":                    128,
										"package_type":                   "Zip",
										"publish":                        false,
										"qualified_arn":                  "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability:$LATEST",
										"reserved_concurrent_executions": -1,
										"role":                        "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
										"runtime":                     "python3.7",
										"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
										"s3_key":                      "terraform/lambda/bkun-dgea-check-data-migration-emr-cluster-availability.zip",
										"s3_object_version":           "",
										"signing_job_arn":             "",
										"signing_profile_version_arn": "",
										"source_code_hash":            "DX5uA+ILb+mwRvJEdtpWOpWXvULt+Ynwje7Ma4zo46E=",
										"source_code_size":            901,
										"tags": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Ingestion",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "6703",
											"Environment":     "uat",
											"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
											"ProjectID":       "PRJ0010800",
											"Tier":            "4",
										},
										"tags_all": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Ingestion",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "6703",
											"Environment":     "uat",
											"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
											"ProjectID":       "PRJ0010800",
											"Tier":            "4",
										},
										"timeout":  15,
										"timeouts": null,
										"tracing_config": [
											{
												"mode": "PassThrough",
											},
										],
										"version": "$LATEST",
										"vpc_config": [
											{
												"security_group_ids": [
													"sg-09fbd003ca2ca62c2",
												],
												"subnet_ids": [
													"subnet-0f1651bc0380a3db1",
												],
												"vpc_id": "vpc-05e9bae323d6ed989",
											},
										],
									},
								},
								{
									"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_layer_version.lambda_layer",
									"mode":           "managed",
									"name":           "lambda_layer",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"compatible_runtimes": [
											false,
										],
									},
									"type": "aws_lambda_layer_version",
									"values": {
										"arn": "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
										"compatible_runtimes": [
											"python3.7",
										],
										"created_date":                "2021-08-16T09:48:27.554+0000",
										"description":                 "",
										"filename":                    null,
										"id":                          "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
										"layer_arn":                   "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging",
										"layer_name":                  "bu_logging",
										"license_info":                "",
										"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
										"s3_key":                      "terraform/lambda/bu_logging.zip",
										"s3_object_version":           "",
										"signing_job_arn":             "",
										"signing_profile_version_arn": "",
										"source_code_hash":            "ptDU1VcUhZI1wSaCdnDVw3DkIBuW3iBAKFsfX89MbzQ=",
										"source_code_size":            1214,
										"version":                     "25",
									},
								},
							],
						},
					],
					"resources": [
						{
							"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.ec2_policy",
							"mode":           "managed",
							"name":           "ec2_policy",
							"provider_name":  "registry.terraform.io/hashicorp/aws",
							"schema_version": 0,
							"sensitive_values": {
								"tags":     {},
								"tags_all": {},
							},
							"type": "aws_iam_policy",
							"values": {
								"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
								"description": "This policy allows lambda function to access emr",
								"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
								"name":        "bkun-dgea-prod1-emr-availability-ec2-policy",
								"name_prefix": null,
								"path":        "/",
								"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DeleteNetworkInterface\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
								"policy_id":   "ANPAZFZ6IW6MB444LTGUX",
								"tags":        {},
								"tags_all":    {},
							},
						},
						{
							"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.emr_policy",
							"mode":           "managed",
							"name":           "emr_policy",
							"provider_name":  "registry.terraform.io/hashicorp/aws",
							"schema_version": 0,
							"sensitive_values": {
								"tags":     {},
								"tags_all": {},
							},
							"type": "aws_iam_policy",
							"values": {
								"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
								"description": "This policy allows lambda function to check available emr cluster for data migration",
								"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
								"name":        "bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
								"name_prefix": null,
								"path":        "/",
								"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:ListClusters\",\n                \"elasticmapreduce:DescribeCluster\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
								"policy_id":   "ANPAZFZ6IW6MMH7Z3WONP",
								"tags":        {},
								"tags_all":    {},
							},
						},
						{
							"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda",
							"mode":           "managed",
							"name":           "iam_for_lambda",
							"provider_name":  "registry.terraform.io/hashicorp/aws",
							"schema_version": 0,
							"sensitive_values": {
								"inline_policy": [
									{},
								],
								"managed_policy_arns": [
									false,
									false,
								],
								"tags":     {},
								"tags_all": {},
							},
							"type": "aws_iam_role",
							"values": {
								"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
								"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
								"create_date":           "2021-08-16T09:48:26Z",
								"description":           "Created this role to for lambda function to check EMR cluster availability",
								"force_detach_policies": false,
								"id": "bkun-dgea-prod1-check-data-migration-emr-role",
								"inline_policy": [
									{
										"name":   "",
										"policy": "",
									},
								],
								"managed_policy_arns": [
									"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
									"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
								],
								"max_session_duration": 3600,
								"name":                 "bkun-dgea-prod1-check-data-migration-emr-role",
								"name_prefix":          null,
								"path":                 "/",
								"permissions_boundary": null,
								"tags": {
									"ApplicationID":   "0",
									"ApplicationName": "Data-Ingestion",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "6703",
									"Environment":     "uat",
									"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
									"ProjectID":       "PRJ0010800",
									"Tier":            "4",
								},
								"tags_all": {
									"ApplicationID":   "0",
									"ApplicationName": "Data-Ingestion",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "6703",
									"Environment":     "uat",
									"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
									"ProjectID":       "PRJ0010800",
									"Tier":            "4",
								},
								"unique_id": "AROAZFZ6IW6MHC55G5HJD",
							},
						},
						{
							"address":          "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.ec2-attach",
							"mode":             "managed",
							"name":             "ec2-attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826684700000001",
								"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
								"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
							},
						},
						{
							"address":          "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.emr-attach",
							"mode":             "managed",
							"name":             "emr-attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826695100000003",
								"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
								"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
							},
						},
					],
				},
				{
					"address": "module.bkun-dgea-copy-flat-file-maskout-data",
					"child_modules": [
						{
							"address": "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data",
							"resources": [
								{
									"address":        "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data.aws_sfn_state_machine.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"logging_configuration": [
											{},
										],
										"tags":     {},
										"tags_all": {},
										"tracing_configuration": [
											{},
										],
									},
									"type": "aws_sfn_state_machine",
									"values": {
										"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
										"creation_date": "2021-08-17T05:19:13Z",
										"definition":    "\n{\n  \"Comment\": \"Step function to run the snappy compression on mask_out data\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/bkun_dgea_flat_file_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.backupDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToRedacted\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.redactedDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToConf\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_conf.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.redactedDestination\"\n            },\n            {\n              \"Arg5.$\": \"$.confDestination\"\n            }\n          ]\n        }\n      },\n      \"Next\": \"Check_EMR_Cluster\"\n    },\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n        \"data-source.$\": \"$.EMRClusterType\"\n          }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n      \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",\n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/ingestion/bkun_dgea_data_ingestion_bootstrap.sh\"\n            }\n          }\n        ],\n        \"Tags\": [\n{\n\"Key\": \"ApplicationID\",\n\"Value\": \"0\"\n},\n{\n\"Key\": \"ApplicationName\",\n\"Value\": \"Data-Processing\"\n},\n{\n\"Key\": \"ApplicationRole\",\n\"Value\": \"\"\n},\n{\n\"Key\": \"BusinessLine\",\n\"Value\": \"Data Governance And Eprise. Arch\"\n},\n{\n\"Key\": \"Name\",\n \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\"\n},\n{\n\"Key\": \"CostCenter\",\n\"Value\": \"1006703\"\n},\n{\n\"Key\": \"Environment\",\n\"Value\": \"Test QA\"\n},\n{\n\"Key\": \"ProjectID\",\n\"Value\": \"PRJ0010800\"\n},\n{\n\"Key\": \"Tier\",\n\"Value\": \"Not Applicable\"\n},\n{\n\"Key\": \"BackupTier\",\n\"Value\": \"NA\"\n},\n{\n\"Key\": \"Application\",\n\"Value.$\": \"$.EMRClusterType\"\n}\n],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\": \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2KeyName\": \"DP-UAT-EMR\",\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-master\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-core\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Execute_Prequisite\"\n    },\n    \"Execute_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.execprereqResult\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"flat_file_masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"flat_file_masked_out_data_backup\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_redacted\"\n    },\n    \"flat_file_masked_out_data_to_redacted\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_redacted_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToRedacted.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_conf\"\n    },\n    \"flat_file_masked_out_data_to_conf\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_conf_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToConf.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n\n",
										"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
										"logging_configuration": [
											{
												"include_execution_data": false,
												"level":                  "OFF",
												"log_destination":        "",
											},
										],
										"name":     "bkun-dgea-prod1-copy-flat-file-maskout-data",
										"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
										"status":   "ACTIVE",
										"tags": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tags_all": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tracing_configuration": [
											{
												"enabled": false,
											},
										],
										"type": "STANDARD",
									},
								},
							],
						},
					],
				},
				{
					"address": "module.bkun-dgea-create-emr-roles",
					"resources": [
						{
							"address":          "module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
							"mode":             "managed",
							"name":             "security_config",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_emr_security_configuration",
							"values": {
								"configuration": "{\n  \"EncryptionConfiguration\": {\n    \"AtRestEncryptionConfiguration\": {\n      \"S3EncryptionConfiguration\": {\n        \"EncryptionMode\": \"SSE-KMS\",\n        \"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\"Overrides\" : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n      }\n    },\n    \"EnableInTransitEncryption\": false,\n    \"EnableAtRestEncryption\": true\n  }\n}\n",
								"creation_date": "2021-08-16T09:48:26Z",
								"id":            "bkun-dgea-prod1-data-migration-security-configuration",
								"name":          "bkun-dgea-prod1-data-migration-security-configuration",
								"name_prefix":   null,
							},
						},
						{
							"address":        "module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile[0]",
							"index":          0,
							"mode":           "managed",
							"name":           "emr-ec2-instance-profile",
							"provider_name":  "registry.terraform.io/hashicorp/aws",
							"schema_version": 0,
							"sensitive_values": {
								"tags":     {},
								"tags_all": {},
							},
							"type": "aws_iam_instance_profile",
							"values": {
								"arn":         "arn:aws:iam::630953916312:instance-profile/bkun-dgea-prod1-data-migration-ec2-role",
								"create_date": "2021-08-16T09:48:26Z",
								"id":          "bkun-dgea-prod1-data-migration-ec2-role",
								"name":        "bkun-dgea-prod1-data-migration-ec2-role",
								"name_prefix": null,
								"path":        "/",
								"role":        "bkun-dgea-prod1-data-migration-ec2-role",
								"tags":        {},
								"tags_all":    {},
								"unique_id":   "AIPAZFZ6IW6MD7GYAEMLG",
							},
						},
						{
							"address":        "module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy[0]",
							"index":          0,
							"mode":           "managed",
							"name":           "ec2_dynamodb_policy",
							"provider_name":  "registry.terraform.io/hashicorp/aws",
							"schema_version": 0,
							"sensitive_values": {
								"tags":     {},
								"tags_all": {},
							},
							"type": "aws_iam_policy",
							"values": {
								"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
								"description": "This policy allows Ec2 instances of EMR cluster to access dyanmodb.",
								"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
								"name":        "bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
								"name_prefix": null,
								"path":        "/",
								"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:PutItem\",\n                \"dynamodb:UpdateItem\",\n                \"dynamodb:GetRecords\"\n            ],\n            \"Resource\": [\n                \"arn:aws:dynamodb:us-east-1:630953916312:table/bkun-dgea-email-config\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:ListTables\",\n                \"dynamodb:ListStreams\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
								"policy_id":   "ANPAZFZ6IW6MDSEQYSM6C",
								"tags":        {},
								"tags_all":    {},
							},
						},
						{
							"address":        "module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy[0]",
							"index":          0,
							"mode":           "managed",
							"name":           "kms_policy",
							"provider_name":  "registry.terraform.io/hashicorp/aws",
							"schema_version": 0,
							"sensitive_values": {
								"tags":     {},
								"tags_all": {},
							},
							"type": "aws_iam_policy",
							"values": {
								"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
								"description": "This policy allows Ec2 instances of EMR cluster to access kms key",
								"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
								"name":        "bkun-dgea-prod1-ec2-kms-policy",
								"name_prefix": null,
								"path":        "/",
								"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n                \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\t\t\"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\t\t\t\t\n            ]\n        }\n    ]\n}",
								"policy_id":   "ANPAZFZ6IW6MEEQHKRBGJ",
								"tags":        {},
								"tags_all":    {},
							},
						},
						{
							"address":        "module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy[0]",
							"index":          0,
							"mode":           "managed",
							"name":           "s3_policy",
							"provider_name":  "registry.terraform.io/hashicorp/aws",
							"schema_version": 0,
							"sensitive_values": {
								"tags":     {},
								"tags_all": {},
							},
							"type": "aws_iam_policy",
							"values": {
								"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
								"description": "This policy allows Ec2 instances of EMR cluster to access s3 bucket",
								"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
								"name":        "bkun-dgea-prod1-ec2-s3-policy",
								"name_prefix": null,
								"path":        "/",
								"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:DeleteObjectVersion\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:RestoreObject\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:PutBucketLogging\",\n                \"s3:GetObjectTagging\",\n                \"s3:DeleteObject\",\n                \"s3:PutBucketVersioning\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\"\n            ]\n        },\n                             {\n            \"Sid\": \"VisualEditor2\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:GetObjectTagging\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n                             {\n            \"Sid\": \"s3logpolicy\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:PutObject\",\n            \"Resource\": \"arn:aws:s3:::aws-logs-<account_id>-<region>/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor3\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:*\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::*bkun-script/*\",\n                \"arn:aws:s3:::*bkun-script*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce/*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce*\"\n            ]\n        }\n    ]\n}\n\n\n",
								"policy_id":   "ANPAZFZ6IW6MNFSOO4QHU",
								"tags":        {},
								"tags_all":    {},
							},
						},
						{
							"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role[0]",
							"index":          0,
							"mode":           "managed",
							"name":           "emr_ec2_role",
							"provider_name":  "registry.terraform.io/hashicorp/aws",
							"schema_version": 0,
							"sensitive_values": {
								"inline_policy": [
									{},
								],
								"managed_policy_arns": [
									false,
									false,
									false,
									false,
									false,
									false,
									false,
								],
								"tags":     {},
								"tags_all": {},
							},
							"type": "aws_iam_role",
							"values": {
								"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role",
								"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
								"create_date":           "2021-08-16T09:48:26Z",
								"description":           "",
								"force_detach_policies": false,
								"id": "bkun-dgea-prod1-data-migration-ec2-role",
								"inline_policy": [
									{
										"name":   "",
										"policy": "",
									},
								],
								"managed_policy_arns": [
									"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
									"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
									"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
									"arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
									"arn:aws:iam::aws:policy/AmazonEC2FullAccess",
									"arn:aws:iam::aws:policy/SecretsManagerReadWrite",
									"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
								],
								"max_session_duration": 3600,
								"name":                 "bkun-dgea-prod1-data-migration-ec2-role",
								"name_prefix":          null,
								"path":                 "/",
								"permissions_boundary": null,
								"tags": {
									"ApplicationID":   "0",
									"ApplicationName": "Data-Processing",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "1006703",
									"Environment":     "Test QA",
									"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
									"ProjectID":       "PRJ0010800",
									"Tier":            "Not Applicable",
								},
								"tags_all": {
									"ApplicationID":   "0",
									"ApplicationName": "Data-Processing",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "1006703",
									"Environment":     "Test QA",
									"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
									"ProjectID":       "PRJ0010800",
									"Tier":            "Not Applicable",
								},
								"unique_id": "AROAZFZ6IW6MLZ2CV34KP",
							},
						},
						{
							"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role[0]",
							"index":          0,
							"mode":           "managed",
							"name":           "emr_sfn_role",
							"provider_name":  "registry.terraform.io/hashicorp/aws",
							"schema_version": 0,
							"sensitive_values": {
								"inline_policy": [
									{},
								],
								"managed_policy_arns": [
									false,
								],
								"tags":     {},
								"tags_all": {},
							},
							"type": "aws_iam_role",
							"values": {
								"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role",
								"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"elasticmapreduce.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
								"create_date":           "2021-08-16T09:48:26Z",
								"description":           "",
								"force_detach_policies": false,
								"id": "bkun-dgea-prod1-data-migration-emr-role",
								"inline_policy": [
									{
										"name":   "",
										"policy": "",
									},
								],
								"managed_policy_arns": [
									"arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
								],
								"max_session_duration": 3600,
								"name":                 "bkun-dgea-prod1-data-migration-emr-role",
								"name_prefix":          null,
								"path":                 "/",
								"permissions_boundary": null,
								"tags": {
									"ApplicationID":   "0",
									"ApplicationName": "Data-Processing",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "1006703",
									"Environment":     "Test QA",
									"Name":            "bkun-dgea-prod1-data-migration-emr-role",
									"ProjectID":       "PRJ0010800",
									"Tier":            "Not Applicable",
								},
								"tags_all": {
									"ApplicationID":   "0",
									"ApplicationName": "Data-Processing",
									"ApplicationRole": "",
									"BackupTier":      "NA",
									"BusinessLine":    "Data Governance And Eprise. Arch",
									"CostCenter":      "1006703",
									"Environment":     "Test QA",
									"Name":            "bkun-dgea-prod1-data-migration-emr-role",
									"ProjectID":       "PRJ0010800",
									"Tier":            "Not Applicable",
								},
								"unique_id": "AROAZFZ6IW6MPTZUT2GY6",
							},
						},
						{
							"address":          "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach[0]",
							"index":            0,
							"mode":             "managed",
							"name":             "ec2-access-attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826836800000006",
								"policy_arn": "arn:aws:iam::aws:policy/AmazonEC2FullAccess",
								"role":       "bkun-dgea-prod1-data-migration-ec2-role",
							},
						},
						{
							"address":          "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach[0]",
							"index":            0,
							"mode":             "managed",
							"name":             "ec2-dynamodb-attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-data-migration-ec2-role-2021081609482684370000000a",
								"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
								"role":       "bkun-dgea-prod1-data-migration-ec2-role",
							},
						},
						{
							"address":          "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach[0]",
							"index":            0,
							"mode":             "managed",
							"name":             "ec2-glue-attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826834100000004",
								"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
								"role":       "bkun-dgea-prod1-data-migration-ec2-role",
							},
						},
						{
							"address":          "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach[0]",
							"index":            0,
							"mode":             "managed",
							"name":             "ec2-kms-attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826835500000005",
								"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
								"role":       "bkun-dgea-prod1-data-migration-ec2-role",
							},
						},
						{
							"address":          "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach[0]",
							"index":            0,
							"mode":             "managed",
							"name":             "ec2-secretmanager-attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826841600000008",
								"policy_arn": "arn:aws:iam::aws:policy/SecretsManagerReadWrite",
								"role":       "bkun-dgea-prod1-data-migration-ec2-role",
							},
						},
						{
							"address":          "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach[0]",
							"index":            0,
							"mode":             "managed",
							"name":             "ec2-stepfunction-attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826840000000007",
								"policy_arn": "arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
								"role":       "bkun-dgea-prod1-data-migration-ec2-role",
							},
						},
						{
							"address":          "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach[0]",
							"index":            0,
							"mode":             "managed",
							"name":             "emr-access-attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-data-migration-emr-role-20210816094826688000000002",
								"policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
								"role":       "bkun-dgea-prod1-data-migration-emr-role",
							},
						},
						{
							"address":          "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach[0]",
							"index":            0,
							"mode":             "managed",
							"name":             "s3_attach",
							"provider_name":    "registry.terraform.io/hashicorp/aws",
							"schema_version":   0,
							"sensitive_values": {},
							"type":             "aws_iam_role_policy_attachment",
							"values": {
								"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826843400000009",
								"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
								"role":       "bkun-dgea-prod1-data-migration-ec2-role",
							},
						},
					],
				},
				{
					"address": "module.bkun-dgea-datamart-conf-redacted",
					"child_modules": [
						{
							"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
							"resources": [
								{
									"address":          "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_alias.this[0]",
									"index":            0,
									"mode":             "managed",
									"name":             "this",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_kms_alias",
									"values": {
										"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
										"id":             "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
										"name":           "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
										"name_prefix":    null,
										"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
										"target_key_id":  "845fe34e-b873-4118-b185-d5824e8b2206",
									},
								},
								{
									"address":        "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this[0]",
									"index":          0,
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"tags":     {},
										"tags_all": {},
									},
									"type": "aws_kms_key",
									"values": {
										"arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
										"customer_master_key_spec": "SYMMETRIC_DEFAULT",
										"deletion_window_in_days":  30,
										"description":              "S3 Bucket Key",
										"enable_key_rotation":      false,
										"id":         "845fe34e-b873-4118-b185-d5824e8b2206",
										"is_enabled": true,
										"key_id":     "845fe34e-b873-4118-b185-d5824e8b2206",
										"key_usage":  "ENCRYPT_DECRYPT",
										"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
										"tags": {
											"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
										},
										"tags_all": {
											"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
										},
									},
								},
								{
									"address":        "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"cors_rule":                 [],
										"grant":                     [],
										"lifecycle_rule":            [],
										"logging":                   [],
										"object_lock_configuration": [],
										"replication_configuration": [],
										"server_side_encryption_configuration": [
											{
												"rule": [
													{
														"apply_server_side_encryption_by_default": [
															{},
														],
													},
												],
											},
										],
										"tags":     {},
										"tags_all": {},
										"versioning": [
											{},
										],
										"website": [],
									},
									"type": "aws_s3_bucket",
									"values": {
										"acceleration_status": "",
										"acl":                         "private",
										"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
										"bucket":                      "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
										"bucket_domain_name":          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
										"bucket_prefix":               null,
										"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
										"cors_rule":                   [],
										"force_destroy":               false,
										"grant":                       [],
										"hosted_zone_id":              "Z3AQBSTGFYJSTF",
										"id":                          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
										"lifecycle_rule":              [],
										"logging":                     [],
										"object_lock_configuration":   [],
										"policy":                      null,
										"region":                      "us-east-1",
										"replication_configuration":   [],
										"request_payer":               "BucketOwner",
										"server_side_encryption_configuration": [
											{
												"rule": [
													{
														"apply_server_side_encryption_by_default": [
															{
																"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
																"sse_algorithm":     "aws:kms",
															},
														],
														"bucket_key_enabled": false,
													},
												],
											},
										],
										"tags": {
											"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
										},
										"tags_all": {
											"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
										},
										"versioning": [
											{
												"enabled":    true,
												"mfa_delete": false,
											},
										],
										"website":          [],
										"website_domain":   null,
										"website_endpoint": null,
									},
								},
								{
									"address":          "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket_policy.this",
									"mode":             "managed",
									"name":             "this",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_s3_bucket_policy",
									"values": {
										"bucket": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
										"id":     "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
										"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
									},
								},
							],
						},
					],
				},
				{
					"address": "module.bkun-dgea-datamart-raw-redacted",
					"child_modules": [
						{
							"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
							"resources": [
								{
									"address":          "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_alias.this[0]",
									"index":            0,
									"mode":             "managed",
									"name":             "this",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_kms_alias",
									"values": {
										"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
										"id":             "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
										"name":           "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
										"name_prefix":    null,
										"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
										"target_key_id":  "2a3b6b07-2625-4e7d-b168-5d40dace358a",
									},
								},
								{
									"address":        "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this[0]",
									"index":          0,
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"tags":     {},
										"tags_all": {},
									},
									"type": "aws_kms_key",
									"values": {
										"arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
										"customer_master_key_spec": "SYMMETRIC_DEFAULT",
										"deletion_window_in_days":  30,
										"description":              "S3 Bucket Key",
										"enable_key_rotation":      false,
										"id":         "2a3b6b07-2625-4e7d-b168-5d40dace358a",
										"is_enabled": true,
										"key_id":     "2a3b6b07-2625-4e7d-b168-5d40dace358a",
										"key_usage":  "ENCRYPT_DECRYPT",
										"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
										"tags": {
											"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
										},
										"tags_all": {
											"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
										},
									},
								},
								{
									"address":        "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"cors_rule":                 [],
										"grant":                     [],
										"lifecycle_rule":            [],
										"logging":                   [],
										"object_lock_configuration": [],
										"replication_configuration": [],
										"server_side_encryption_configuration": [
											{
												"rule": [
													{
														"apply_server_side_encryption_by_default": [
															{},
														],
													},
												],
											},
										],
										"tags":     {},
										"tags_all": {},
										"versioning": [
											{},
										],
										"website": [],
									},
									"type": "aws_s3_bucket",
									"values": {
										"acceleration_status": "",
										"acl":                         "private",
										"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
										"bucket":                      "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
										"bucket_domain_name":          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
										"bucket_prefix":               null,
										"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
										"cors_rule":                   [],
										"force_destroy":               false,
										"grant":                       [],
										"hosted_zone_id":              "Z3AQBSTGFYJSTF",
										"id":                          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
										"lifecycle_rule":              [],
										"logging":                     [],
										"object_lock_configuration":   [],
										"policy":                      null,
										"region":                      "us-east-1",
										"replication_configuration":   [],
										"request_payer":               "BucketOwner",
										"server_side_encryption_configuration": [
											{
												"rule": [
													{
														"apply_server_side_encryption_by_default": [
															{
																"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
																"sse_algorithm":     "aws:kms",
															},
														],
														"bucket_key_enabled": false,
													},
												],
											},
										],
										"tags": {
											"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
										},
										"tags_all": {
											"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
										},
										"versioning": [
											{
												"enabled":    true,
												"mfa_delete": false,
											},
										],
										"website":          [],
										"website_domain":   null,
										"website_endpoint": null,
									},
								},
								{
									"address":          "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket_policy.this",
									"mode":             "managed",
									"name":             "this",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_s3_bucket_policy",
									"values": {
										"bucket": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
										"id":     "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
										"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
									},
								},
							],
						},
					],
				},
				{
					"address": "module.bkun-dgea-ddl-creation-step-function",
					"child_modules": [
						{
							"address": "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function",
							"resources": [
								{
									"address":        "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function.aws_sfn_state_machine.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"logging_configuration": [
											{},
										],
										"tags":     {},
										"tags_all": {},
										"tracing_configuration": [
											{},
										],
									},
									"type": "aws_sfn_state_machine",
									"values": {
										"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
										"creation_date": "2021-08-17T05:19:13Z",
										"definition":    "\n {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForFinalBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_total_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetBackupPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForDDLCreation\": {\n          \"Args.$\": \"$.DDLArgs\"\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_FinalData_Backup_Process\"\n    },\n     \"Run_FinalData_Backup_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_FinalData_Backup_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForFinalBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_DDL_Creation_Process\"\n    },\n    \"Run_DDL_Creation_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_DDL_Creation_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForDDLCreation.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
										"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
										"logging_configuration": [
											{
												"include_execution_data": false,
												"level":                  "OFF",
												"log_destination":        "",
											},
										],
										"name":     "bkun-dgea-prod1-ddl-creation-step-function",
										"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
										"status":   "ACTIVE",
										"tags": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tags_all": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tracing_configuration": [
											{
												"enabled": false,
											},
										],
										"type": "STANDARD",
									},
								},
							],
						},
					],
				},
				{
					"address": "module.bkun-dgea-emr-setup-stepfunction",
					"child_modules": [
						{
							"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
							"resources": [
								{
									"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy[0]",
									"index":          0,
									"mode":           "managed",
									"name":           "sfn_cw_policy",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"tags":     {},
										"tags_all": {},
									},
									"type": "aws_iam_policy",
									"values": {
										"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
										"description": "This policy allows step function to send cloudwatch events",
										"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
										"name":        "bkun-dgea-prod1-ingestion-sfn-cw-policy",
										"name_prefix": null,
										"path":        "/",
										"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogStreams\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogStream\",\n                \"logs:DescribeLogStreams\",\n                \"logs:PutRetentionPolicy\"\n            ],\n            \"Resource\": \"arn:aws:logs:*:*:log-group:/aws/states/bkun-dgea-prod1-historical-ingestion-emr-setup-stepfunction-Logs/*\"\n        },\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogGroups\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"logs:CreateLogGroup\",\n            \"Resource\": \"*\"\n        },\n\t\t{\n            \"Sid\": \"AllowAccessToCloudWatchkoi\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"cloudwatch:PutMetricAlarm\",\n                \"cloudwatch:DescribeInsightRules\",\n                \"cloudwatch:PutDashboard\",\n                \"cloudwatch:DescribeAlarmHistory\",\n                \"cloudwatch:ListDashboards\",\n                \"cloudwatch:DescribeAlarms\",\n                \"cloudwatch:EnableInsightRules\",\n                \"cloudwatch:GetMetricStatistics\",\n                \"cloudwatch:ListMetrics\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
										"policy_id":   "ANPAZFZ6IW6MACFVLGIAY",
										"tags":        {},
										"tags_all":    {},
									},
								},
								{
									"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy[0]",
									"index":          0,
									"mode":           "managed",
									"name":           "sfn_ec2_policy",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"tags":     {},
										"tags_all": {},
									},
									"type": "aws_iam_policy",
									"values": {
										"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
										"description": "This policy allows step function to set up EMR cluster",
										"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
										"name":        "bkun-dgea-prod1-ingestion-sfn-ec2-policy",
										"name_prefix": null,
										"path":        "/",
										"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:DescribeInstances\",\n                \"cloudwatch:DeleteAlarms\",\n                \"s3:Get*\",\n                \"s3:List*\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DescribeVolumeStatus\",\n                \"ec2:RevokeSecurityGroupEgress\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DescribeAccountAttributes\",\n                \"ec2:DescribeKeyPairs\",\n                \"iam:ListRolePolicies\",\n                \"ec2:DescribeNetworkAcls\",\n                \"ec2:DescribeRouteTables\",\n                \"ec2:DetachVolume\",\n                \"iam:GetRole\",\n                \"application-autoscaling:RegisterScalableTarget\",\n                \"ec2:CreateTags\",\n                \"ec2:DeleteNetworkInterface\",\n                \"ec2:RunInstances\",\n                \"application-autoscaling:DeleteScalingPolicy\",\n                \"ec2:DescribePrefixLists\",\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:CancelSpotInstanceRequests\",\n                \"cloudwatch:DescribeAlarms\",\n                \"application-autoscaling:PutScalingPolicy\",\n                \"ec2:DescribeVpcEndpoints\",\n                \"ec2:DescribeSubnets\",\n                \"iam:GetRolePolicy\",\n                \"ec2:RequestSpotInstances\",\n                \"ec2:DeleteTags\",\n                \"ec2:DescribeDhcpOptions\",\n                \"ec2:DescribeVpcEndpointServices\",\n                \"ec2:DescribeSpotInstanceRequests\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:DescribeVpcAttribute\",\n                \"ec2:DescribeSpotPriceHistory\",\n                \"iam:PassRole\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DescribeAvailabilityZones\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:AuthorizeSecurityGroupEgress\",\n                \"ec2:TerminateInstances\",\n                \"ec2:DetachNetworkInterface\",\n                \"application-autoscaling:Describe*\",\n                \"ec2:DescribeTags\",\n                \"iam:ListInstanceProfiles\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeImages\",\n                \"cloudwatch:PutMetricAlarm\",\n                \"ec2:DescribeVpcs\",\n                \"ec2:DeleteSecurityGroup\",\n                \"application-autoscaling:DeregisterScalableTarget\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
										"policy_id":   "ANPAZFZ6IW6MGL3MG5HQE",
										"tags":        {},
										"tags_all":    {},
									},
								},
								{
									"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy[0]",
									"index":          0,
									"mode":           "managed",
									"name":           "sfn_emr_policy",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"tags":     {},
										"tags_all": {},
									},
									"type": "aws_iam_policy",
									"values": {
										"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
										"description": "This policy allows step function to set up EMR cluster",
										"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
										"name":        "bkun-dgea-prod1-ingestion-sfn-emr-policy",
										"name_prefix": null,
										"path":        "/",
										"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:RunJobFlow\",\n                \"elasticmapreduce:DescribeCluster\",\n                \"elasticmapreduce:TerminateJobFlows\",\n                \"elasticmapreduce:AddJobFlowSteps\",\n                \"elasticmapreduce:DescribeStep\",\n                \"elasticmapreduce:CancelSteps\",\n                \"elasticmapreduce:SetTerminationProtection\"\n            ],\n            \"Resource\": \"arn:aws:elasticmapreduce:*:*:cluster/*\"\n        },\n\t\t{\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": [\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role\",\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role\"\n            ]\n        }\n    ]\n}\n",
										"policy_id":   "ANPAZFZ6IW6MK7XJ3P4N3",
										"tags":        {},
										"tags_all":    {},
									},
								},
								{
									"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy[0]",
									"index":          0,
									"mode":           "managed",
									"name":           "sfn_policy",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"tags":     {},
										"tags_all": {},
									},
									"type": "aws_iam_policy",
									"values": {
										"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
										"description": "This policy provides basic permission for step function executions.",
										"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
										"name":        "bkun-dgea-prod1-ingestion-stepfunction-policy",
										"name_prefix": null,
										"path":        "/",
										"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"EMREc2AccessForStepFunction\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"states:ListStateMachines\",\n                \"states:DescribeActivity\",\n                \"states:DescribeStateMachine\",\n                \"states:ListActivities\",\n                \"states:ListExecutions\",\n                \"states:UpdateStateMachine\",\n                \"states:DeleteStateMachine\",\n                \"states:StopExecution\",\n                \"states:DescribeStateMachineForExecution\",\n                \"states:SendTaskFailure\",\n                \"states:DescribeExecution\",\n                \"states:GetExecutionHistory\",\n                \"states:DeleteActivity\",\n                \"states:StartExecution\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"AllowAccessToPassRoleToEventsiuj\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": \"arn:aws:iam::*:role/*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:PassedToService\": \"events.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"events:PutTargets\",\n                \"events:PutRule\",\n                \"events:DescribeRule\"\n            ],\n            \"Resource\": [\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule\",\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventForEMRAddJobFlowStepsRule\"\n            ]\n        },\n        {\n            \"Action\": [\n                \"logs:*\",\n                \"iam:GetPolicy\",\n                \"iam:GetPolicyVersion\",\n                \"iam:GetRole\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/events.amazonaws.com/AWSServiceRoleForCloudWatchEvents*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"events.amazonaws.com\"\n                }\n            }\n        }\n    ]\n}\n\n\n",
										"policy_id":   "ANPAZFZ6IW6MAHDT27IUG",
										"tags":        {},
										"tags_all":    {},
									},
								},
								{
									"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy[0]",
									"index":          0,
									"mode":           "managed",
									"name":           "sfn_s3_policy",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"tags":     {},
										"tags_all": {},
									},
									"type": "aws_iam_policy",
									"values": {
										"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
										"description": "This policy allows step function to set up EMR cluster",
										"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
										"name":        "bkun-dgea-prod1-ingestion-sfn-s3-policy",
										"name_prefix": null,
										"path":        "/",
										"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\",\n                \"s3:ListBucket\",\n                \"s3:PutObject\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor81\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::aws-logs-630953916312-us-east-1/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor1265\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
										"policy_id":   "ANPAZFZ6IW6MGZCFMI54G",
										"tags":        {},
										"tags_all":    {},
									},
								},
								{
									"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn[0]",
									"index":          0,
									"mode":           "managed",
									"name":           "iam_for_sfn",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"inline_policy": [
											{},
										],
										"managed_policy_arns": [
											false,
											false,
											false,
											false,
											false,
											false,
										],
										"tags":     {},
										"tags_all": {},
									},
									"type": "aws_iam_role",
									"values": {
										"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
										"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
										"create_date":           "2021-08-17T04:14:59Z",
										"description":           "",
										"force_detach_policies": false,
										"id": "bkun-dgea-prod1-data-migration-stepfunction-role",
										"inline_policy": [
											{
												"name":   "",
												"policy": "",
											},
										],
										"managed_policy_arns": [
											"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
											"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
											"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
											"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
											"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
											"arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
										],
										"max_session_duration": 3600,
										"name":                 "bkun-dgea-prod1-data-migration-stepfunction-role",
										"name_prefix":          null,
										"path":                 "/",
										"permissions_boundary": null,
										"tags": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tags_all": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"unique_id": "AROAZFZ6IW6MJVO72SGC7",
									},
								},
								{
									"address":          "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach[0]",
									"index":            0,
									"mode":             "managed",
									"name":             "lambda-access-attach",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_iam_role_policy_attachment",
									"values": {
										"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459515600000001",
										"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
										"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
									},
								},
								{
									"address":          "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach[0]",
									"index":            0,
									"mode":             "managed",
									"name":             "sfn-attach",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_iam_role_policy_attachment",
									"values": {
										"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518000000004",
										"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
										"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
									},
								},
								{
									"address":          "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach[0]",
									"index":            0,
									"mode":             "managed",
									"name":             "step-cloudwatch-attach",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_iam_role_policy_attachment",
									"values": {
										"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518200000005",
										"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
										"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
									},
								},
								{
									"address":          "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach[0]",
									"index":            0,
									"mode":             "managed",
									"name":             "step-ec2-attach",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_iam_role_policy_attachment",
									"values": {
										"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516800000003",
										"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
										"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
									},
								},
								{
									"address":          "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach[0]",
									"index":            0,
									"mode":             "managed",
									"name":             "step-emr-attach",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_iam_role_policy_attachment",
									"values": {
										"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459519100000006",
										"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
										"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
									},
								},
								{
									"address":          "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach[0]",
									"index":            0,
									"mode":             "managed",
									"name":             "step-s3-attach",
									"provider_name":    "registry.terraform.io/hashicorp/aws",
									"schema_version":   0,
									"sensitive_values": {},
									"type":             "aws_iam_role_policy_attachment",
									"values": {
										"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516400000002",
										"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
										"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
									},
								},
								{
									"address":        "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"logging_configuration": [
											{},
										],
										"tags":     {},
										"tags_all": {},
										"tracing_configuration": [
											{},
										],
									},
									"type": "aws_sfn_state_machine",
									"values": {
										"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
										"creation_date": "2021-08-17T04:14:59Z",
										"definition":    "  {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Check_EMR_Cluster\",\n  \"States\": {\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n          \"data-source.$\": \"$.InputParam.EMRClusterType\"\n        }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n    \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-cluster', $.InputParam.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",        \n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/etl/bkun_dgea_etl_bootstrap_commands.sh\"\n            }\n          }\n       ],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n\t\"Tags\": [\n\t\t{\n            \"Key\": \"ApplicationID\",\n            \"Value\": \"0\"\n          },\n          {\n            \"Key\": \"ApplicationName\",\n            \"Value\": \"Data-Processing\"\n          },\n          {\n            \"Key\": \"ApplicationRole\",\n            \"Value\": \"\"\n          },\n\t\t  {\n            \"Key\": \"BusinessLine\",\n            \"Value\": \"Data Governance And Eprise. Arch\"\n          },\n          {\n            \"Key\": \"Name\",\n            \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-ingestion-emr-cluster', $.InputParam.EMRClusterType)\"\n          },\n\t\t  {\n            \"Key\": \"CostCenter\",\n            \"Value\": \"1006703\"\n          },\n          {\n            \"Key\": \"Environment\",\n            \"Value\": \"Test QA\"\n          },\n          {\n            \"Key\": \"ProjectID\",\n            \"Value\": \"PRJ0010800\"\n          },\n\t\t  {\n            \"Key\": \"Tier\",\n            \"Value\": \"Not Applicable\"\n          },\n\t\t  {\n            \"Key\": \"BackupTier\",\n            \"Value\": \"NA\"\n          },\n          {\n            \"Key\": \"Application\",\n            \"Value.$\": \"$.InputParam.EMRClusterType\"\n          },\n          {\n            \"Key\": \"ITContact\",\n            \"Value\": \"Haritha Nookala\"\n          },\n\t  {\n            \"Key\": \"Owner\",\n            \"Value\": \"Malory\"\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\" : \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-master', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-core', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.InputParam.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Run_AD_Script\"\n    },\n    \"Run_AD_Script\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Enable AD Integration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar\",\n            \"Args\": [\n              \"s3://bkun-script/emr-harden-amzn-linux-dp-uat-1_1.sh\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Execute_Prerequisites\"\n    },\n    \"Should_Execute_Prerequisites\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.EMRClusterType\",\n          \"StringEquals\": \"etl\",\n          \"Next\": \"Execute_ETL_Prequisite\"\n        },\n        {\n          \"Not\": {\n            \"Variable\": \"$.InputParam.EMRClusterType\",\n            \"StringEquals\": \"etl\"\n          },\n          \"Next\": \"Execute_Other_Prequisite\"\n        }\n      ]\n    },\n    \"Execute_ETL_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute ETL prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_etl_prerequisites_commands.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Execute_Other_Prequisite\": {\n      \"Type\": \"Pass\",\n      \"Result\": \"Execute_Other_Prequisite\",\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Process_Input_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.mergeResults.ClusterId\"\n      },\n      \"ResultPath\": \"$.processResults\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
										"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
										"logging_configuration": [
											{
												"include_execution_data": false,
												"level":                  "OFF",
												"log_destination":        "",
											},
										],
										"name":     "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
										"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
										"status":   "ACTIVE",
										"tags": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tags_all": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tracing_configuration": [
											{
												"enabled": false,
											},
										],
										"type": "STANDARD",
									},
								},
							],
						},
					],
				},
				{
					"address": "module.bkun-dgea-etl-stepfunction",
					"child_modules": [
						{
							"address": "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction",
							"resources": [
								{
									"address":        "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction.aws_sfn_state_machine.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"logging_configuration": [
											{},
										],
										"tags":     {},
										"tags_all": {},
										"tracing_configuration": [
											{},
										],
									},
									"type": "aws_sfn_state_machine",
									"values": {
										"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
										"creation_date": "2021-08-17T05:19:13Z",
										"definition":    "{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/start_job_execution.sh\"\n                    },\n                    {\n                        \"Arg3.$\": \"$.folderName\"\n                    },\n                    {\n                        \"Arg4.$\": \"$.workflowName\"\n                    },\n                    {\n                        \"Arg5.$\": \"$.executionTime\"\n                    },\n                    {\n                        \"Arg6.$\": \"$.UDFParameter\"\n                    },\n                    {\n                        \"Arg7\": \"prod1\"\n                    },\n                    {\n                        \"Arg8.$\": \"$.additionalParameter\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run ETL\"\n    },\n    \"Run ETL\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
										"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
										"logging_configuration": [
											{
												"include_execution_data": false,
												"level":                  "OFF",
												"log_destination":        "",
											},
										],
										"name":     "bkun-dgea-prod1-etl-stepfunction",
										"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
										"status":   "ACTIVE",
										"tags": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-etl-stepfunction",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tags_all": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-etl-stepfunction",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tracing_configuration": [
											{
												"enabled": false,
											},
										],
										"type": "STANDARD",
									},
								},
							],
						},
					],
				},
				{
					"address": "module.bkun-dgea-maskout-data-copy",
					"child_modules": [
						{
							"address": "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy",
							"resources": [
								{
									"address":        "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy.aws_sfn_state_machine.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"logging_configuration": [
											{},
										],
										"tags":     {},
										"tags_all": {},
										"tracing_configuration": [
											{},
										],
									},
									"type": "aws_sfn_state_machine",
									"values": {
										"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
										"creation_date": "2021-08-17T05:19:14Z",
										"definition":    "\n{\n  \"Comment\": \"Step function to move maskOut data to landing layer\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForCopy\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/copy_masked_data_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.maskOutBackuptargetPath\"\n            }\n          ]\n        }\n\t\t}\n      },\n     \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"masked_out_data_backup\"\n    },\n    \"masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"copy_maskout_data_to_landing\"\n    },\n    \"copy_maskout_data_to_landing\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForCopy.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.snappyCopyResult\",\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
										"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
										"logging_configuration": [
											{
												"include_execution_data": false,
												"level":                  "OFF",
												"log_destination":        "",
											},
										],
										"name":     "bkun-dgea-prod1-maskout-data-copy",
										"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
										"status":   "ACTIVE",
										"tags": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-maskout-data-copy",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tags_all": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-maskout-data-copy",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tracing_configuration": [
											{
												"enabled": false,
											},
										],
										"type": "STANDARD",
									},
								},
							],
						},
					],
				},
				{
					"address": "module.bkun-dgea-trigger-redshift-process",
					"child_modules": [
						{
							"address": "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction",
							"resources": [
								{
									"address":        "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction.aws_sfn_state_machine.this",
									"mode":           "managed",
									"name":           "this",
									"provider_name":  "registry.terraform.io/hashicorp/aws",
									"schema_version": 0,
									"sensitive_values": {
										"logging_configuration": [
											{},
										],
										"tags":     {},
										"tags_all": {},
										"tracing_configuration": [
											{},
										],
									},
									"type": "aws_sfn_state_machine",
									"values": {
										"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
										"creation_date": "2021-08-17T05:19:13Z",
										"definition":    "\n{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_start_s3_to_redshift_migration.sh\"\n                    },\n                    {\n                         \"Arg3\": \"prod1\"\n                    },\n\n                    {\n                        \"Arg4.$\": \"$.InputFileName\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_S3_to_Redshift_Migration\"\n    },\n    \"Run_S3_to_Redshift_Migration\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_S3_to_Redshift_Migration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n",
										"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
										"logging_configuration": [
											{
												"include_execution_data": false,
												"level":                  "OFF",
												"log_destination":        "",
											},
										],
										"name":     "bkun-dgea-prod1-s3-to-redshift-stepfunction",
										"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
										"status":   "ACTIVE",
										"tags": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tags_all": {
											"ApplicationID":   "0",
											"ApplicationName": "Data-Processing",
											"ApplicationRole": "",
											"BackupTier":      "NA",
											"BusinessLine":    "Data Governance And Eprise. Arch",
											"CostCenter":      "1006703",
											"Environment":     "Test QA",
											"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
											"ProjectID":       "PRJ0010800",
											"Tier":            "Not Applicable",
										},
										"tracing_configuration": [
											{
												"enabled": false,
											},
										],
										"type": "STANDARD",
									},
								},
							],
						},
					],
				},
			],
		},
	},
	"prior_state": {
		"format_version":    "0.2",
		"terraform_version": "1.0.3",
		"values": {
			"root_module": {
				"child_modules": [
					{
						"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
						"child_modules": [
							{
								"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
								"resources": [
									{
										"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_cloudwatch_log_group.this",
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"tags":     {},
											"tags_all": {},
										},
										"type": "aws_cloudwatch_log_group",
										"values": {
											"arn":               "arn:aws:logs:us-east-1:630953916312:log-group:/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
											"id":                "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
											"kms_key_id":        "",
											"name":              "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
											"name_prefix":       null,
											"retention_in_days": 14,
											"tags":              {},
											"tags_all":          {},
										},
									},
									{
										"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_function.this",
										"depends_on": [
											"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_s3_bucket_object.layer_latest",
											"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_s3_bucket_object.version",
											"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda",
											"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_layer_version.lambda_layer",
											"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_s3_bucket_object.latest",
										],
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"dead_letter_config": [],
											"environment": [
												{
													"variables": {},
												},
											],
											"file_system_config": [],
											"image_config":       [],
											"layers": [
												false,
											],
											"tags":     {},
											"tags_all": {},
											"tracing_config": [
												{},
											],
											"vpc_config": [
												{
													"security_group_ids": [
														false,
													],
													"subnet_ids": [
														false,
													],
												},
											],
										},
										"type": "aws_lambda_function",
										"values": {
											"arn": "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
											"code_signing_config_arn": "",
											"dead_letter_config":      [],
											"description":             "",
											"environment": [
												{
													"variables": {
														"function_name": "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
													},
												},
											],
											"file_system_config": [],
											"filename":           null,
											"function_name":      "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
											"handler":            "lambda_function.lambda_handler",
											"id":                 "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
											"image_config":       [],
											"image_uri":          "",
											"invoke_arn":         "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability/invocations",
											"kms_key_arn":        "",
											"last_modified":      "2021-08-16T16:37:35.239+0000",
											"layers": [
												"arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
											],
											"memory_size":                    128,
											"package_type":                   "Zip",
											"publish":                        false,
											"qualified_arn":                  "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability:$LATEST",
											"reserved_concurrent_executions": -1,
											"role":                        "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
											"runtime":                     "python3.7",
											"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
											"s3_key":                      "terraform/lambda/bkun-dgea-check-data-migration-emr-cluster-availability.zip",
											"s3_object_version":           "",
											"signing_job_arn":             "",
											"signing_profile_version_arn": "",
											"source_code_hash":            "DX5uA+ILb+mwRvJEdtpWOpWXvULt+Ynwje7Ma4zo46E=",
											"source_code_size":            901,
											"tags": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Ingestion",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "6703",
												"Environment":     "uat",
												"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
												"ProjectID":       "PRJ0010800",
												"Tier":            "4",
											},
											"tags_all": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Ingestion",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "6703",
												"Environment":     "uat",
												"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
												"ProjectID":       "PRJ0010800",
												"Tier":            "4",
											},
											"timeout":  15,
											"timeouts": null,
											"tracing_config": [
												{
													"mode": "PassThrough",
												},
											],
											"version": "$LATEST",
											"vpc_config": [
												{
													"security_group_ids": [
														"sg-09fbd003ca2ca62c2",
													],
													"subnet_ids": [
														"subnet-0f1651bc0380a3db1",
													],
													"vpc_id": "vpc-05e9bae323d6ed989",
												},
											],
										},
									},
									{
										"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_layer_version.lambda_layer",
										"depends_on": [
											"module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_s3_bucket_object.layer_latest",
										],
										"mode":           "managed",
										"name":           "lambda_layer",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"compatible_runtimes": [
												false,
											],
										},
										"type": "aws_lambda_layer_version",
										"values": {
											"arn": "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
											"compatible_runtimes": [
												"python3.7",
											],
											"created_date":                "2021-08-16T09:48:27.554+0000",
											"description":                 "",
											"filename":                    null,
											"id":                          "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
											"layer_arn":                   "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging",
											"layer_name":                  "bu_logging",
											"license_info":                "",
											"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
											"s3_key":                      "terraform/lambda/bu_logging.zip",
											"s3_object_version":           "",
											"signing_job_arn":             "",
											"signing_profile_version_arn": "",
											"source_code_hash":            "ptDU1VcUhZI1wSaCdnDVw3DkIBuW3iBAKFsfX89MbzQ=",
											"source_code_size":            1214,
											"version":                     "25",
										},
									},
									{
										"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_s3_bucket_object.latest",
										"mode":           "data",
										"name":           "latest",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"metadata": {},
											"tags":     {},
										},
										"type": "aws_s3_bucket_object",
										"values": {
											"body":                          null,
											"bucket":                        "bkun-dgea-prod1-dp-source-artifacts",
											"bucket_key_enabled":            false,
											"cache_control":                 "",
											"content_disposition":           "",
											"content_encoding":              "",
											"content_language":              "",
											"content_length":                901,
											"content_type":                  "application/zip",
											"etag":                          "61c0387cca959fcf1ca172bde06f8503",
											"expiration":                    "",
											"expires":                       "",
											"id":                            "bkun-dgea-prod1-dp-source-artifacts/terraform/lambda/bkun-dgea-check-data-migration-emr-cluster-availability.zip",
											"key":                           "terraform/lambda/bkun-dgea-check-data-migration-emr-cluster-availability.zip",
											"last_modified":                 "Thu, 12 Aug 2021 15:18:37 UTC",
											"metadata":                      {},
											"object_lock_legal_hold_status": "",
											"object_lock_mode":              "",
											"object_lock_retain_until_date": "",
											"range":                     null,
											"server_side_encryption":    "",
											"sse_kms_key_id":            "",
											"storage_class":             "STANDARD",
											"tags":                      {},
											"version_id":                "",
											"website_redirect_location": "",
										},
									},
									{
										"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_s3_bucket_object.layer_latest",
										"mode":           "data",
										"name":           "layer_latest",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"metadata": {},
											"tags":     {},
										},
										"type": "aws_s3_bucket_object",
										"values": {
											"body":                          null,
											"bucket":                        "bkun-dgea-prod1-dp-source-artifacts",
											"bucket_key_enabled":            false,
											"cache_control":                 "",
											"content_disposition":           "",
											"content_encoding":              "",
											"content_language":              "",
											"content_length":                1214,
											"content_type":                  "application/zip",
											"etag":                          "25955b859a871e9755d3dc17409cd7c6",
											"expiration":                    "",
											"expires":                       "",
											"id":                            "bkun-dgea-prod1-dp-source-artifacts/terraform/lambda/bu_logging.zip",
											"key":                           "terraform/lambda/bu_logging.zip",
											"last_modified":                 "Thu, 12 Aug 2021 15:18:37 UTC",
											"metadata":                      {},
											"object_lock_legal_hold_status": "",
											"object_lock_mode":              "",
											"object_lock_retain_until_date": "",
											"range":                     null,
											"server_side_encryption":    "",
											"sse_kms_key_id":            "",
											"storage_class":             "STANDARD",
											"tags":                      {},
											"version_id":                "",
											"website_redirect_location": "",
										},
									},
								],
							},
						],
						"resources": [
							{
								"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.ec2_policy",
								"depends_on": [
									"module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_caller_identity.current",
									"module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_region.current",
								],
								"mode":           "managed",
								"name":           "ec2_policy",
								"provider_name":  "registry.terraform.io/hashicorp/aws",
								"schema_version": 0,
								"sensitive_values": {
									"tags":     {},
									"tags_all": {},
								},
								"type": "aws_iam_policy",
								"values": {
									"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
									"description": "This policy allows lambda function to access emr",
									"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
									"name":        "bkun-dgea-prod1-emr-availability-ec2-policy",
									"name_prefix": null,
									"path":        "/",
									"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DeleteNetworkInterface\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
									"policy_id":   "ANPAZFZ6IW6MB444LTGUX",
									"tags":        {},
									"tags_all":    {},
								},
							},
							{
								"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.emr_policy",
								"mode":           "managed",
								"name":           "emr_policy",
								"provider_name":  "registry.terraform.io/hashicorp/aws",
								"schema_version": 0,
								"sensitive_values": {
									"tags":     {},
									"tags_all": {},
								},
								"type": "aws_iam_policy",
								"values": {
									"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
									"description": "This policy allows lambda function to check available emr cluster for data migration",
									"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
									"name":        "bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
									"name_prefix": null,
									"path":        "/",
									"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:ListClusters\",\n                \"elasticmapreduce:DescribeCluster\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
									"policy_id":   "ANPAZFZ6IW6MMH7Z3WONP",
									"tags":        {},
									"tags_all":    {},
								},
							},
							{
								"address":        "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda",
								"mode":           "managed",
								"name":           "iam_for_lambda",
								"provider_name":  "registry.terraform.io/hashicorp/aws",
								"schema_version": 0,
								"sensitive_values": {
									"inline_policy": [
										{},
									],
									"managed_policy_arns": [
										false,
										false,
									],
									"tags":     {},
									"tags_all": {},
								},
								"type": "aws_iam_role",
								"values": {
									"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
									"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
									"create_date":           "2021-08-16T09:48:26Z",
									"description":           "Created this role to for lambda function to check EMR cluster availability",
									"force_detach_policies": false,
									"id": "bkun-dgea-prod1-check-data-migration-emr-role",
									"inline_policy": [
										{
											"name":   "",
											"policy": "",
										},
									],
									"managed_policy_arns": [
										"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
										"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
									],
									"max_session_duration": 3600,
									"name":                 "bkun-dgea-prod1-check-data-migration-emr-role",
									"name_prefix":          null,
									"path":                 "/",
									"permissions_boundary": null,
									"tags": {
										"ApplicationID":   "0",
										"ApplicationName": "Data-Ingestion",
										"ApplicationRole": "",
										"BackupTier":      "NA",
										"BusinessLine":    "Data Governance And Eprise. Arch",
										"CostCenter":      "6703",
										"Environment":     "uat",
										"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
										"ProjectID":       "PRJ0010800",
										"Tier":            "4",
									},
									"tags_all": {
										"ApplicationID":   "0",
										"ApplicationName": "Data-Ingestion",
										"ApplicationRole": "",
										"BackupTier":      "NA",
										"BusinessLine":    "Data Governance And Eprise. Arch",
										"CostCenter":      "6703",
										"Environment":     "uat",
										"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
										"ProjectID":       "PRJ0010800",
										"Tier":            "4",
									},
									"unique_id": "AROAZFZ6IW6MHC55G5HJD",
								},
							},
							{
								"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.ec2-attach",
								"depends_on": [
									"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda",
									"module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_caller_identity.current",
									"module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_region.current",
									"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.ec2_policy",
								],
								"mode":             "managed",
								"name":             "ec2-attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826684700000001",
									"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
									"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
								},
							},
							{
								"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.emr-attach",
								"depends_on": [
									"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.emr_policy",
									"module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda",
								],
								"mode":             "managed",
								"name":             "emr-attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826695100000003",
									"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
									"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
								},
							},
							{
								"address":          "module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
							{
								"address":          "module.bkun-dgea-check-data-migration-emr-cluster-availability.data.aws_region.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_region",
								"values": {
									"description": "US East (N. Virginia)",
									"endpoint":    "ec2.us-east-1.amazonaws.com",
									"id":          "us-east-1",
									"name":        "us-east-1",
								},
							},
						],
					},
					{
						"address": "module.bkun-dgea-copy-flat-file-maskout-data",
						"child_modules": [
							{
								"address": "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data",
								"resources": [
									{
										"address": "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data.aws_sfn_state_machine.this",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy",
											"module.bkun-dgea-copy-flat-file-maskout-data.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-copy-flat-file-maskout-data.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach",
										],
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"logging_configuration": [
												{},
											],
											"tags":     {},
											"tags_all": {},
											"tracing_configuration": [
												{},
											],
										},
										"type": "aws_sfn_state_machine",
										"values": {
											"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
											"creation_date": "2021-08-17T05:19:13Z",
											"definition":    "\n{\n  \"Comment\": \"Step function to run the snappy compression on mask_out data\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/bkun_dgea_flat_file_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.backupDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToRedacted\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.redactedDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToConf\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_conf.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.redactedDestination\"\n            },\n            {\n              \"Arg5.$\": \"$.confDestination\"\n            }\n          ]\n        }\n      },\n      \"Next\": \"Check_EMR_Cluster\"\n    },\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n        \"data-source.$\": \"$.EMRClusterType\"\n          }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n      \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",\n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/ingestion/bkun_dgea_data_ingestion_bootstrap.sh\"\n            }\n          }\n        ],\n        \"Tags\": [\n{\n\"Key\": \"ApplicationID\",\n\"Value\": \"0\"\n},\n{\n\"Key\": \"ApplicationName\",\n\"Value\": \"Data-Processing\"\n},\n{\n\"Key\": \"ApplicationRole\",\n\"Value\": \"\"\n},\n{\n\"Key\": \"BusinessLine\",\n\"Value\": \"Data Governance And Eprise. Arch\"\n},\n{\n\"Key\": \"Name\",\n \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\"\n},\n{\n\"Key\": \"CostCenter\",\n\"Value\": \"1006703\"\n},\n{\n\"Key\": \"Environment\",\n\"Value\": \"Test QA\"\n},\n{\n\"Key\": \"ProjectID\",\n\"Value\": \"PRJ0010800\"\n},\n{\n\"Key\": \"Tier\",\n\"Value\": \"Not Applicable\"\n},\n{\n\"Key\": \"BackupTier\",\n\"Value\": \"NA\"\n},\n{\n\"Key\": \"Application\",\n\"Value.$\": \"$.EMRClusterType\"\n}\n],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\": \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2KeyName\": \"DP-UAT-EMR\",\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-master\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-core\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Execute_Prequisite\"\n    },\n    \"Execute_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.execprereqResult\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"flat_file_masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"flat_file_masked_out_data_backup\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_redacted\"\n    },\n    \"flat_file_masked_out_data_to_redacted\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_redacted_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToRedacted.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_conf\"\n    },\n    \"flat_file_masked_out_data_to_conf\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_conf_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToConf.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n\n",
											"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
											"logging_configuration": [
												{
													"include_execution_data": false,
													"level":                  "OFF",
													"log_destination":        "",
												},
											],
											"name":     "bkun-dgea-prod1-copy-flat-file-maskout-data",
											"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
											"status":   "ACTIVE",
											"tags": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tags_all": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tracing_configuration": [
												{
													"enabled": false,
												},
											],
											"type": "STANDARD",
										},
									},
									{
										"address":          "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data.data.aws_caller_identity.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_caller_identity",
										"values": {
											"account_id": "630953916312",
											"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
											"id":         "630953916312",
											"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
										},
									},
									{
										"address":          "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data.data.aws_region.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_region",
										"values": {
											"description": "US East (N. Virginia)",
											"endpoint":    "ec2.us-east-1.amazonaws.com",
											"id":          "us-east-1",
											"name":        "us-east-1",
										},
									},
								],
							},
						],
						"resources": [
							{
								"address":          "module.bkun-dgea-copy-flat-file-maskout-data.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
							{
								"address":          "module.bkun-dgea-copy-flat-file-maskout-data.data.aws_region.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_region",
								"values": {
									"description": "US East (N. Virginia)",
									"endpoint":    "ec2.us-east-1.amazonaws.com",
									"id":          "us-east-1",
									"name":        "us-east-1",
								},
							},
						],
					},
					{
						"address": "module.bkun-dgea-create-emr-roles",
						"resources": [
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
									"module.bkun-dgea-create-emr-roles.data.aws_region.current",
								],
								"mode":             "managed",
								"name":             "security_config",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_emr_security_configuration",
								"values": {
									"configuration": "{\n  \"EncryptionConfiguration\": {\n    \"AtRestEncryptionConfiguration\": {\n      \"S3EncryptionConfiguration\": {\n        \"EncryptionMode\": \"SSE-KMS\",\n        \"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\"Overrides\" : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n      }\n    },\n    \"EnableInTransitEncryption\": false,\n    \"EnableAtRestEncryption\": true\n  }\n}\n",
									"creation_date": "2021-08-16T09:48:26Z",
									"id":            "bkun-dgea-prod1-data-migration-security-configuration",
									"name":          "bkun-dgea-prod1-data-migration-security-configuration",
									"name_prefix":   null,
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
								],
								"index":          0,
								"mode":           "managed",
								"name":           "emr-ec2-instance-profile",
								"provider_name":  "registry.terraform.io/hashicorp/aws",
								"schema_version": 0,
								"sensitive_values": {
									"tags":     {},
									"tags_all": {},
								},
								"type": "aws_iam_instance_profile",
								"values": {
									"arn":         "arn:aws:iam::630953916312:instance-profile/bkun-dgea-prod1-data-migration-ec2-role",
									"create_date": "2021-08-16T09:48:26Z",
									"id":          "bkun-dgea-prod1-data-migration-ec2-role",
									"name":        "bkun-dgea-prod1-data-migration-ec2-role",
									"name_prefix": null,
									"path":        "/",
									"role":        "bkun-dgea-prod1-data-migration-ec2-role",
									"tags":        {},
									"tags_all":    {},
									"unique_id":   "AIPAZFZ6IW6MD7GYAEMLG",
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
									"module.bkun-dgea-create-emr-roles.data.aws_region.current",
								],
								"index":          0,
								"mode":           "managed",
								"name":           "ec2_dynamodb_policy",
								"provider_name":  "registry.terraform.io/hashicorp/aws",
								"schema_version": 0,
								"sensitive_values": {
									"tags":     {},
									"tags_all": {},
								},
								"type": "aws_iam_policy",
								"values": {
									"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
									"description": "This policy allows Ec2 instances of EMR cluster to access dyanmodb.",
									"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
									"name":        "bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
									"name_prefix": null,
									"path":        "/",
									"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:PutItem\",\n                \"dynamodb:UpdateItem\",\n                \"dynamodb:GetRecords\"\n            ],\n            \"Resource\": [\n                \"arn:aws:dynamodb:us-east-1:630953916312:table/bkun-dgea-email-config\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:ListTables\",\n                \"dynamodb:ListStreams\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
									"policy_id":   "ANPAZFZ6IW6MDSEQYSM6C",
									"tags":        {},
									"tags_all":    {},
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
									"module.bkun-dgea-create-emr-roles.data.aws_region.current",
								],
								"index":          0,
								"mode":           "managed",
								"name":           "kms_policy",
								"provider_name":  "registry.terraform.io/hashicorp/aws",
								"schema_version": 0,
								"sensitive_values": {
									"tags":     {},
									"tags_all": {},
								},
								"type": "aws_iam_policy",
								"values": {
									"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
									"description": "This policy allows Ec2 instances of EMR cluster to access kms key",
									"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
									"name":        "bkun-dgea-prod1-ec2-kms-policy",
									"name_prefix": null,
									"path":        "/",
									"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n                \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\t\t\"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\t\t\t\t\n            ]\n        }\n    ]\n}",
									"policy_id":   "ANPAZFZ6IW6MEEQHKRBGJ",
									"tags":        {},
									"tags_all":    {},
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
									"module.bkun-dgea-create-emr-roles.data.aws_region.current",
								],
								"index":          0,
								"mode":           "managed",
								"name":           "s3_policy",
								"provider_name":  "registry.terraform.io/hashicorp/aws",
								"schema_version": 0,
								"sensitive_values": {
									"tags":     {},
									"tags_all": {},
								},
								"type": "aws_iam_policy",
								"values": {
									"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
									"description": "This policy allows Ec2 instances of EMR cluster to access s3 bucket",
									"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
									"name":        "bkun-dgea-prod1-ec2-s3-policy",
									"name_prefix": null,
									"path":        "/",
									"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:DeleteObjectVersion\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:RestoreObject\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:PutBucketLogging\",\n                \"s3:GetObjectTagging\",\n                \"s3:DeleteObject\",\n                \"s3:PutBucketVersioning\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\"\n            ]\n        },\n                             {\n            \"Sid\": \"VisualEditor2\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:GetObjectTagging\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n                             {\n            \"Sid\": \"s3logpolicy\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:PutObject\",\n            \"Resource\": \"arn:aws:s3:::aws-logs-<account_id>-<region>/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor3\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:*\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::*bkun-script/*\",\n                \"arn:aws:s3:::*bkun-script*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce/*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce*\"\n            ]\n        }\n    ]\n}\n\n\n",
									"policy_id":   "ANPAZFZ6IW6MNFSOO4QHU",
									"tags":        {},
									"tags_all":    {},
								},
							},
							{
								"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role[0]",
								"index":          0,
								"mode":           "managed",
								"name":           "emr_ec2_role",
								"provider_name":  "registry.terraform.io/hashicorp/aws",
								"schema_version": 0,
								"sensitive_values": {
									"inline_policy": [
										{},
									],
									"managed_policy_arns": [
										false,
										false,
										false,
										false,
										false,
										false,
										false,
									],
									"tags":     {},
									"tags_all": {},
								},
								"type": "aws_iam_role",
								"values": {
									"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role",
									"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
									"create_date":           "2021-08-16T09:48:26Z",
									"description":           "",
									"force_detach_policies": false,
									"id": "bkun-dgea-prod1-data-migration-ec2-role",
									"inline_policy": [
										{
											"name":   "",
											"policy": "",
										},
									],
									"managed_policy_arns": [
										"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
										"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
										"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
										"arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
										"arn:aws:iam::aws:policy/AmazonEC2FullAccess",
										"arn:aws:iam::aws:policy/SecretsManagerReadWrite",
										"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
									],
									"max_session_duration": 3600,
									"name":                 "bkun-dgea-prod1-data-migration-ec2-role",
									"name_prefix":          null,
									"path":                 "/",
									"permissions_boundary": null,
									"tags": {
										"ApplicationID":   "0",
										"ApplicationName": "Data-Processing",
										"ApplicationRole": "",
										"BackupTier":      "NA",
										"BusinessLine":    "Data Governance And Eprise. Arch",
										"CostCenter":      "1006703",
										"Environment":     "Test QA",
										"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
										"ProjectID":       "PRJ0010800",
										"Tier":            "Not Applicable",
									},
									"tags_all": {
										"ApplicationID":   "0",
										"ApplicationName": "Data-Processing",
										"ApplicationRole": "",
										"BackupTier":      "NA",
										"BusinessLine":    "Data Governance And Eprise. Arch",
										"CostCenter":      "1006703",
										"Environment":     "Test QA",
										"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
										"ProjectID":       "PRJ0010800",
										"Tier":            "Not Applicable",
									},
									"unique_id": "AROAZFZ6IW6MLZ2CV34KP",
								},
							},
							{
								"address":        "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role[0]",
								"index":          0,
								"mode":           "managed",
								"name":           "emr_sfn_role",
								"provider_name":  "registry.terraform.io/hashicorp/aws",
								"schema_version": 0,
								"sensitive_values": {
									"inline_policy": [
										{},
									],
									"managed_policy_arns": [
										false,
									],
									"tags":     {},
									"tags_all": {},
								},
								"type": "aws_iam_role",
								"values": {
									"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role",
									"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"elasticmapreduce.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
									"create_date":           "2021-08-16T09:48:26Z",
									"description":           "",
									"force_detach_policies": false,
									"id": "bkun-dgea-prod1-data-migration-emr-role",
									"inline_policy": [
										{
											"name":   "",
											"policy": "",
										},
									],
									"managed_policy_arns": [
										"arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
									],
									"max_session_duration": 3600,
									"name":                 "bkun-dgea-prod1-data-migration-emr-role",
									"name_prefix":          null,
									"path":                 "/",
									"permissions_boundary": null,
									"tags": {
										"ApplicationID":   "0",
										"ApplicationName": "Data-Processing",
										"ApplicationRole": "",
										"BackupTier":      "NA",
										"BusinessLine":    "Data Governance And Eprise. Arch",
										"CostCenter":      "1006703",
										"Environment":     "Test QA",
										"Name":            "bkun-dgea-prod1-data-migration-emr-role",
										"ProjectID":       "PRJ0010800",
										"Tier":            "Not Applicable",
									},
									"tags_all": {
										"ApplicationID":   "0",
										"ApplicationName": "Data-Processing",
										"ApplicationRole": "",
										"BackupTier":      "NA",
										"BusinessLine":    "Data Governance And Eprise. Arch",
										"CostCenter":      "1006703",
										"Environment":     "Test QA",
										"Name":            "bkun-dgea-prod1-data-migration-emr-role",
										"ProjectID":       "PRJ0010800",
										"Tier":            "Not Applicable",
									},
									"unique_id": "AROAZFZ6IW6MPTZUT2GY6",
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
								],
								"index":            0,
								"mode":             "managed",
								"name":             "ec2-access-attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826836800000006",
									"policy_arn": "arn:aws:iam::aws:policy/AmazonEC2FullAccess",
									"role":       "bkun-dgea-prod1-data-migration-ec2-role",
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.data.aws_region.current",
									"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
									"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
									"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
								],
								"index":            0,
								"mode":             "managed",
								"name":             "ec2-dynamodb-attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-data-migration-ec2-role-2021081609482684370000000a",
									"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
									"role":       "bkun-dgea-prod1-data-migration-ec2-role",
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
								],
								"index":            0,
								"mode":             "managed",
								"name":             "ec2-glue-attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826834100000004",
									"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
									"role":       "bkun-dgea-prod1-data-migration-ec2-role",
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
									"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
									"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
									"module.bkun-dgea-create-emr-roles.data.aws_region.current",
								],
								"index":            0,
								"mode":             "managed",
								"name":             "ec2-kms-attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826835500000005",
									"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
									"role":       "bkun-dgea-prod1-data-migration-ec2-role",
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
								],
								"index":            0,
								"mode":             "managed",
								"name":             "ec2-secretmanager-attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826841600000008",
									"policy_arn": "arn:aws:iam::aws:policy/SecretsManagerReadWrite",
									"role":       "bkun-dgea-prod1-data-migration-ec2-role",
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
								],
								"index":            0,
								"mode":             "managed",
								"name":             "ec2-stepfunction-attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826840000000007",
									"policy_arn": "arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
									"role":       "bkun-dgea-prod1-data-migration-ec2-role",
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
								],
								"index":            0,
								"mode":             "managed",
								"name":             "emr-access-attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-data-migration-emr-role-20210816094826688000000002",
									"policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
									"role":       "bkun-dgea-prod1-data-migration-emr-role",
								},
							},
							{
								"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach[0]",
								"depends_on": [
									"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
									"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
									"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
									"module.bkun-dgea-create-emr-roles.data.aws_region.current",
								],
								"index":            0,
								"mode":             "managed",
								"name":             "s3_attach",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_iam_role_policy_attachment",
								"values": {
									"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826843400000009",
									"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
									"role":       "bkun-dgea-prod1-data-migration-ec2-role",
								},
							},
							{
								"address":          "module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
							{
								"address":          "module.bkun-dgea-create-emr-roles.data.aws_region.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_region",
								"values": {
									"description": "US East (N. Virginia)",
									"endpoint":    "ec2.us-east-1.amazonaws.com",
									"id":          "us-east-1",
									"name":        "us-east-1",
								},
							},
						],
					},
					{
						"address": "module.bkun-dgea-datamart-conf-redacted",
						"child_modules": [
							{
								"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
								"resources": [
									{
										"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_alias.this[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
										],
										"index":            0,
										"mode":             "managed",
										"name":             "this",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_kms_alias",
										"values": {
											"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
											"id":             "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
											"name":           "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
											"name_prefix":    null,
											"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
											"target_key_id":  "845fe34e-b873-4118-b185-d5824e8b2206",
										},
									},
									{
										"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
										],
										"index":          0,
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"tags":     {},
											"tags_all": {},
										},
										"type": "aws_kms_key",
										"values": {
											"arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
											"customer_master_key_spec": "SYMMETRIC_DEFAULT",
											"deletion_window_in_days":  30,
											"description":              "S3 Bucket Key",
											"enable_key_rotation":      true,
											"id":         "845fe34e-b873-4118-b185-d5824e8b2206",
											"is_enabled": true,
											"key_id":     "845fe34e-b873-4118-b185-d5824e8b2206",
											"key_usage":  "ENCRYPT_DECRYPT",
											"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
											"tags": {
												"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
											},
											"tags_all": {
												"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
											},
										},
									},
									{
										"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket.this",
										"depends_on": [
											"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
										],
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"cors_rule":                 [],
											"grant":                     [],
											"lifecycle_rule":            [],
											"logging":                   [],
											"object_lock_configuration": [],
											"replication_configuration": [],
											"server_side_encryption_configuration": [
												{
													"rule": [
														{
															"apply_server_side_encryption_by_default": [
																{},
															],
														},
													],
												},
											],
											"tags":     {},
											"tags_all": {},
											"versioning": [
												{},
											],
											"website": [],
										},
										"type": "aws_s3_bucket",
										"values": {
											"acceleration_status": "",
											"acl":                         "private",
											"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
											"bucket":                      "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
											"bucket_domain_name":          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
											"bucket_prefix":               null,
											"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
											"cors_rule":                   [],
											"force_destroy":               false,
											"grant":                       [],
											"hosted_zone_id":              "Z3AQBSTGFYJSTF",
											"id":                          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
											"lifecycle_rule":              [],
											"logging":                     [],
											"object_lock_configuration":   [],
											"policy":                      null,
											"region":                      "us-east-1",
											"replication_configuration":   [],
											"request_payer":               "BucketOwner",
											"server_side_encryption_configuration": [
												{
													"rule": [
														{
															"apply_server_side_encryption_by_default": [
																{
																	"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
																	"sse_algorithm":     "aws:kms",
																},
															],
															"bucket_key_enabled": false,
														},
													],
												},
											],
											"tags": {
												"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
											},
											"tags_all": {
												"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
											},
											"versioning": [
												{
													"enabled":    true,
													"mfa_delete": false,
												},
											],
											"website":          [],
											"website_domain":   null,
											"website_endpoint": null,
										},
									},
									{
										"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket_policy.this",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket.this",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
										],
										"mode":             "managed",
										"name":             "this",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_s3_bucket_policy",
										"values": {
											"bucket": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
											"id":     "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
											"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
										},
									},
									{
										"address":          "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.data.aws_caller_identity.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_caller_identity",
										"values": {
											"account_id": "630953916312",
											"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
											"id":         "630953916312",
											"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
										},
									},
									{
										"address":          "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.data.aws_region.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_region",
										"values": {
											"description": "US East (N. Virginia)",
											"endpoint":    "ec2.us-east-1.amazonaws.com",
											"id":          "us-east-1",
											"name":        "us-east-1",
										},
									},
								],
							},
						],
						"resources": [
							{
								"address":          "module.bkun-dgea-datamart-conf-redacted.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
						],
					},
					{
						"address": "module.bkun-dgea-datamart-raw-redacted",
						"child_modules": [
							{
								"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
								"resources": [
									{
										"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_alias.this[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
										],
										"index":            0,
										"mode":             "managed",
										"name":             "this",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_kms_alias",
										"values": {
											"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
											"id":             "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
											"name":           "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
											"name_prefix":    null,
											"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
											"target_key_id":  "2a3b6b07-2625-4e7d-b168-5d40dace358a",
										},
									},
									{
										"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
										],
										"index":          0,
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"tags":     {},
											"tags_all": {},
										},
										"type": "aws_kms_key",
										"values": {
											"arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
											"customer_master_key_spec": "SYMMETRIC_DEFAULT",
											"deletion_window_in_days":  30,
											"description":              "S3 Bucket Key",
											"enable_key_rotation":      true,
											"id":         "2a3b6b07-2625-4e7d-b168-5d40dace358a",
											"is_enabled": true,
											"key_id":     "2a3b6b07-2625-4e7d-b168-5d40dace358a",
											"key_usage":  "ENCRYPT_DECRYPT",
											"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
											"tags": {
												"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
											},
											"tags_all": {
												"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
											},
										},
									},
									{
										"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket.this",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
										],
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"cors_rule":                 [],
											"grant":                     [],
											"lifecycle_rule":            [],
											"logging":                   [],
											"object_lock_configuration": [],
											"replication_configuration": [],
											"server_side_encryption_configuration": [
												{
													"rule": [
														{
															"apply_server_side_encryption_by_default": [
																{},
															],
														},
													],
												},
											],
											"tags":     {},
											"tags_all": {},
											"versioning": [
												{},
											],
											"website": [],
										},
										"type": "aws_s3_bucket",
										"values": {
											"acceleration_status": "",
											"acl":                         "private",
											"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
											"bucket":                      "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
											"bucket_domain_name":          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
											"bucket_prefix":               null,
											"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
											"cors_rule":                   [],
											"force_destroy":               false,
											"grant":                       [],
											"hosted_zone_id":              "Z3AQBSTGFYJSTF",
											"id":                          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
											"lifecycle_rule":              [],
											"logging":                     [],
											"object_lock_configuration":   [],
											"policy":                      null,
											"region":                      "us-east-1",
											"replication_configuration":   [],
											"request_payer":               "BucketOwner",
											"server_side_encryption_configuration": [
												{
													"rule": [
														{
															"apply_server_side_encryption_by_default": [
																{
																	"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
																	"sse_algorithm":     "aws:kms",
																},
															],
															"bucket_key_enabled": false,
														},
													],
												},
											],
											"tags": {
												"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
											},
											"tags_all": {
												"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
											},
											"versioning": [
												{
													"enabled":    true,
													"mfa_delete": false,
												},
											],
											"website":          [],
											"website_domain":   null,
											"website_endpoint": null,
										},
									},
									{
										"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket_policy.this",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this",
											"module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket.this",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
										],
										"mode":             "managed",
										"name":             "this",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_s3_bucket_policy",
										"values": {
											"bucket": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
											"id":     "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
											"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
										},
									},
									{
										"address":          "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.data.aws_caller_identity.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_caller_identity",
										"values": {
											"account_id": "630953916312",
											"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
											"id":         "630953916312",
											"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
										},
									},
									{
										"address":          "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.data.aws_region.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_region",
										"values": {
											"description": "US East (N. Virginia)",
											"endpoint":    "ec2.us-east-1.amazonaws.com",
											"id":          "us-east-1",
											"name":        "us-east-1",
										},
									},
								],
							},
						],
						"resources": [
							{
								"address":          "module.bkun-dgea-datamart-raw-redacted.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
						],
					},
					{
						"address": "module.bkun-dgea-ddl-creation-step-function",
						"child_modules": [
							{
								"address": "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function",
								"resources": [
									{
										"address": "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function.aws_sfn_state_machine.this",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-ddl-creation-step-function.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-ddl-creation-step-function.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
										],
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"logging_configuration": [
												{},
											],
											"tags":     {},
											"tags_all": {},
											"tracing_configuration": [
												{},
											],
										},
										"type": "aws_sfn_state_machine",
										"values": {
											"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
											"creation_date": "2021-08-17T05:19:13Z",
											"definition":    "\n {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForFinalBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_total_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetBackupPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForDDLCreation\": {\n          \"Args.$\": \"$.DDLArgs\"\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_FinalData_Backup_Process\"\n    },\n     \"Run_FinalData_Backup_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_FinalData_Backup_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForFinalBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_DDL_Creation_Process\"\n    },\n    \"Run_DDL_Creation_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_DDL_Creation_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForDDLCreation.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
											"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
											"logging_configuration": [
												{
													"include_execution_data": false,
													"level":                  "OFF",
													"log_destination":        "",
												},
											],
											"name":     "bkun-dgea-prod1-ddl-creation-step-function",
											"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
											"status":   "ACTIVE",
											"tags": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tags_all": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tracing_configuration": [
												{
													"enabled": false,
												},
											],
											"type": "STANDARD",
										},
									},
									{
										"address":          "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function.data.aws_caller_identity.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_caller_identity",
										"values": {
											"account_id": "630953916312",
											"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
											"id":         "630953916312",
											"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
										},
									},
									{
										"address":          "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function.data.aws_region.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_region",
										"values": {
											"description": "US East (N. Virginia)",
											"endpoint":    "ec2.us-east-1.amazonaws.com",
											"id":          "us-east-1",
											"name":        "us-east-1",
										},
									},
								],
							},
						],
						"resources": [
							{
								"address":          "module.bkun-dgea-ddl-creation-step-function.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
							{
								"address":          "module.bkun-dgea-ddl-creation-step-function.data.aws_region.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_region",
								"values": {
									"description": "US East (N. Virginia)",
									"endpoint":    "ec2.us-east-1.amazonaws.com",
									"id":          "us-east-1",
									"name":        "us-east-1",
								},
							},
						],
					},
					{
						"address": "module.bkun-dgea-emr-setup-stepfunction",
						"child_modules": [
							{
								"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
								"resources": [
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
										],
										"index":          0,
										"mode":           "managed",
										"name":           "sfn_cw_policy",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"tags":     {},
											"tags_all": {},
										},
										"type": "aws_iam_policy",
										"values": {
											"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
											"description": "This policy allows step function to send cloudwatch events",
											"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
											"name":        "bkun-dgea-prod1-ingestion-sfn-cw-policy",
											"name_prefix": null,
											"path":        "/",
											"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogStreams\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogStream\",\n                \"logs:DescribeLogStreams\",\n                \"logs:PutRetentionPolicy\"\n            ],\n            \"Resource\": \"arn:aws:logs:*:*:log-group:/aws/states/bkun-dgea-prod1-historical-ingestion-emr-setup-stepfunction-Logs/*\"\n        },\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogGroups\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"logs:CreateLogGroup\",\n            \"Resource\": \"*\"\n        },\n\t\t{\n            \"Sid\": \"AllowAccessToCloudWatchkoi\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"cloudwatch:PutMetricAlarm\",\n                \"cloudwatch:DescribeInsightRules\",\n                \"cloudwatch:PutDashboard\",\n                \"cloudwatch:DescribeAlarmHistory\",\n                \"cloudwatch:ListDashboards\",\n                \"cloudwatch:DescribeAlarms\",\n                \"cloudwatch:EnableInsightRules\",\n                \"cloudwatch:GetMetricStatistics\",\n                \"cloudwatch:ListMetrics\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
											"policy_id":   "ANPAZFZ6IW6MACFVLGIAY",
											"tags":        {},
											"tags_all":    {},
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
										],
										"index":          0,
										"mode":           "managed",
										"name":           "sfn_ec2_policy",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"tags":     {},
											"tags_all": {},
										},
										"type": "aws_iam_policy",
										"values": {
											"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
											"description": "This policy allows step function to set up EMR cluster",
											"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
											"name":        "bkun-dgea-prod1-ingestion-sfn-ec2-policy",
											"name_prefix": null,
											"path":        "/",
											"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:DescribeInstances\",\n                \"cloudwatch:DeleteAlarms\",\n                \"s3:Get*\",\n                \"s3:List*\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DescribeVolumeStatus\",\n                \"ec2:RevokeSecurityGroupEgress\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DescribeAccountAttributes\",\n                \"ec2:DescribeKeyPairs\",\n                \"iam:ListRolePolicies\",\n                \"ec2:DescribeNetworkAcls\",\n                \"ec2:DescribeRouteTables\",\n                \"ec2:DetachVolume\",\n                \"iam:GetRole\",\n                \"application-autoscaling:RegisterScalableTarget\",\n                \"ec2:CreateTags\",\n                \"ec2:DeleteNetworkInterface\",\n                \"ec2:RunInstances\",\n                \"application-autoscaling:DeleteScalingPolicy\",\n                \"ec2:DescribePrefixLists\",\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:CancelSpotInstanceRequests\",\n                \"cloudwatch:DescribeAlarms\",\n                \"application-autoscaling:PutScalingPolicy\",\n                \"ec2:DescribeVpcEndpoints\",\n                \"ec2:DescribeSubnets\",\n                \"iam:GetRolePolicy\",\n                \"ec2:RequestSpotInstances\",\n                \"ec2:DeleteTags\",\n                \"ec2:DescribeDhcpOptions\",\n                \"ec2:DescribeVpcEndpointServices\",\n                \"ec2:DescribeSpotInstanceRequests\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:DescribeVpcAttribute\",\n                \"ec2:DescribeSpotPriceHistory\",\n                \"iam:PassRole\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DescribeAvailabilityZones\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:AuthorizeSecurityGroupEgress\",\n                \"ec2:TerminateInstances\",\n                \"ec2:DetachNetworkInterface\",\n                \"application-autoscaling:Describe*\",\n                \"ec2:DescribeTags\",\n                \"iam:ListInstanceProfiles\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeImages\",\n                \"cloudwatch:PutMetricAlarm\",\n                \"ec2:DescribeVpcs\",\n                \"ec2:DeleteSecurityGroup\",\n                \"application-autoscaling:DeregisterScalableTarget\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
											"policy_id":   "ANPAZFZ6IW6MGL3MG5HQE",
											"tags":        {},
											"tags_all":    {},
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
										],
										"index":          0,
										"mode":           "managed",
										"name":           "sfn_emr_policy",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"tags":     {},
											"tags_all": {},
										},
										"type": "aws_iam_policy",
										"values": {
											"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
											"description": "This policy allows step function to set up EMR cluster",
											"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
											"name":        "bkun-dgea-prod1-ingestion-sfn-emr-policy",
											"name_prefix": null,
											"path":        "/",
											"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:RunJobFlow\",\n                \"elasticmapreduce:DescribeCluster\",\n                \"elasticmapreduce:TerminateJobFlows\",\n                \"elasticmapreduce:AddJobFlowSteps\",\n                \"elasticmapreduce:DescribeStep\",\n                \"elasticmapreduce:CancelSteps\",\n                \"elasticmapreduce:SetTerminationProtection\"\n            ],\n            \"Resource\": \"arn:aws:elasticmapreduce:*:*:cluster/*\"\n        },\n\t\t{\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": [\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role\",\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role\"\n            ]\n        }\n    ]\n}\n",
											"policy_id":   "ANPAZFZ6IW6MK7XJ3P4N3",
											"tags":        {},
											"tags_all":    {},
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
										],
										"index":          0,
										"mode":           "managed",
										"name":           "sfn_policy",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"tags":     {},
											"tags_all": {},
										},
										"type": "aws_iam_policy",
										"values": {
											"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
											"description": "This policy provides basic permission for step function executions.",
											"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
											"name":        "bkun-dgea-prod1-ingestion-stepfunction-policy",
											"name_prefix": null,
											"path":        "/",
											"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"EMREc2AccessForStepFunction\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"states:ListStateMachines\",\n                \"states:DescribeActivity\",\n                \"states:DescribeStateMachine\",\n                \"states:ListActivities\",\n                \"states:ListExecutions\",\n                \"states:UpdateStateMachine\",\n                \"states:DeleteStateMachine\",\n                \"states:StopExecution\",\n                \"states:DescribeStateMachineForExecution\",\n                \"states:SendTaskFailure\",\n                \"states:DescribeExecution\",\n                \"states:GetExecutionHistory\",\n                \"states:DeleteActivity\",\n                \"states:StartExecution\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"AllowAccessToPassRoleToEventsiuj\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": \"arn:aws:iam::*:role/*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:PassedToService\": \"events.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"events:PutTargets\",\n                \"events:PutRule\",\n                \"events:DescribeRule\"\n            ],\n            \"Resource\": [\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule\",\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventForEMRAddJobFlowStepsRule\"\n            ]\n        },\n        {\n            \"Action\": [\n                \"logs:*\",\n                \"iam:GetPolicy\",\n                \"iam:GetPolicyVersion\",\n                \"iam:GetRole\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/events.amazonaws.com/AWSServiceRoleForCloudWatchEvents*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"events.amazonaws.com\"\n                }\n            }\n        }\n    ]\n}\n\n\n",
											"policy_id":   "ANPAZFZ6IW6MAHDT27IUG",
											"tags":        {},
											"tags_all":    {},
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy[0]",
										"depends_on": [
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
										],
										"index":          0,
										"mode":           "managed",
										"name":           "sfn_s3_policy",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"tags":     {},
											"tags_all": {},
										},
										"type": "aws_iam_policy",
										"values": {
											"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
											"description": "This policy allows step function to set up EMR cluster",
											"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
											"name":        "bkun-dgea-prod1-ingestion-sfn-s3-policy",
											"name_prefix": null,
											"path":        "/",
											"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\",\n                \"s3:ListBucket\",\n                \"s3:PutObject\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor81\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::aws-logs-630953916312-us-east-1/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor1265\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
											"policy_id":   "ANPAZFZ6IW6MGZCFMI54G",
											"tags":        {},
											"tags_all":    {},
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
										],
										"index":          0,
										"mode":           "managed",
										"name":           "iam_for_sfn",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"inline_policy": [
												{},
											],
											"managed_policy_arns": [
												false,
												false,
												false,
												false,
												false,
												false,
											],
											"tags":     {},
											"tags_all": {},
										},
										"type": "aws_iam_role",
										"values": {
											"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
											"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
											"create_date":           "2021-08-17T04:14:59Z",
											"description":           "",
											"force_detach_policies": false,
											"id": "bkun-dgea-prod1-data-migration-stepfunction-role",
											"inline_policy": [
												{
													"name":   "",
													"policy": "",
												},
											],
											"managed_policy_arns": [
												"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
												"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
												"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
												"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
												"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
												"arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
											],
											"max_session_duration": 3600,
											"name":                 "bkun-dgea-prod1-data-migration-stepfunction-role",
											"name_prefix":          null,
											"path":                 "/",
											"permissions_boundary": null,
											"tags": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tags_all": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"unique_id": "AROAZFZ6IW6MJVO72SGC7",
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach[0]",
										"depends_on": [
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
										],
										"index":            0,
										"mode":             "managed",
										"name":             "lambda-access-attach",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_iam_role_policy_attachment",
										"values": {
											"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459515600000001",
											"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
											"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy",
										],
										"index":            0,
										"mode":             "managed",
										"name":             "sfn-attach",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_iam_role_policy_attachment",
										"values": {
											"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518000000004",
											"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
											"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach[0]",
										"depends_on": [
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
										],
										"index":            0,
										"mode":             "managed",
										"name":             "step-cloudwatch-attach",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_iam_role_policy_attachment",
										"values": {
											"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518200000005",
											"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
											"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
										],
										"index":            0,
										"mode":             "managed",
										"name":             "step-ec2-attach",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_iam_role_policy_attachment",
										"values": {
											"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516800000003",
											"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
											"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
										],
										"index":            0,
										"mode":             "managed",
										"name":             "step-emr-attach",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_iam_role_policy_attachment",
										"values": {
											"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459519100000006",
											"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
											"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach[0]",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
										],
										"index":            0,
										"mode":             "managed",
										"name":             "step-s3-attach",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_iam_role_policy_attachment",
										"values": {
											"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516400000002",
											"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
											"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
										},
									},
									{
										"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_region.current",
										],
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"logging_configuration": [
												{},
											],
											"tags":     {},
											"tags_all": {},
											"tracing_configuration": [
												{},
											],
										},
										"type": "aws_sfn_state_machine",
										"values": {
											"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
											"creation_date": "2021-08-17T04:14:59Z",
											"definition":    "  {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Check_EMR_Cluster\",\n  \"States\": {\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n          \"data-source.$\": \"$.InputParam.EMRClusterType\"\n        }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n    \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-cluster', $.InputParam.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",        \n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/etl/bkun_dgea_etl_bootstrap_commands.sh\"\n            }\n          }\n       ],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n\t\"Tags\": [\n\t\t{\n            \"Key\": \"ApplicationID\",\n            \"Value\": \"0\"\n          },\n          {\n            \"Key\": \"ApplicationName\",\n            \"Value\": \"Data-Processing\"\n          },\n          {\n            \"Key\": \"ApplicationRole\",\n            \"Value\": \"\"\n          },\n\t\t  {\n            \"Key\": \"BusinessLine\",\n            \"Value\": \"Data Governance And Eprise. Arch\"\n          },\n          {\n            \"Key\": \"Name\",\n            \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-ingestion-emr-cluster', $.InputParam.EMRClusterType)\"\n          },\n\t\t  {\n            \"Key\": \"CostCenter\",\n            \"Value\": \"1006703\"\n          },\n          {\n            \"Key\": \"Environment\",\n            \"Value\": \"Test QA\"\n          },\n          {\n            \"Key\": \"ProjectID\",\n            \"Value\": \"PRJ0010800\"\n          },\n\t\t  {\n            \"Key\": \"Tier\",\n            \"Value\": \"Not Applicable\"\n          },\n\t\t  {\n            \"Key\": \"BackupTier\",\n            \"Value\": \"NA\"\n          },\n          {\n            \"Key\": \"Application\",\n            \"Value.$\": \"$.InputParam.EMRClusterType\"\n          },\n          {\n            \"Key\": \"ITContact\",\n            \"Value\": \"Haritha Nookala\"\n          },\n\t  {\n            \"Key\": \"Owner\",\n            \"Value\": \"Malory\"\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\" : \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-master', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-core', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.InputParam.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Run_AD_Script\"\n    },\n    \"Run_AD_Script\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Enable AD Integration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar\",\n            \"Args\": [\n              \"s3://bkun-script/emr-harden-amzn-linux-dp-uat-1_1.sh\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Execute_Prerequisites\"\n    },\n    \"Should_Execute_Prerequisites\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.EMRClusterType\",\n          \"StringEquals\": \"etl\",\n          \"Next\": \"Execute_ETL_Prequisite\"\n        },\n        {\n          \"Not\": {\n            \"Variable\": \"$.InputParam.EMRClusterType\",\n            \"StringEquals\": \"etl\"\n          },\n          \"Next\": \"Execute_Other_Prequisite\"\n        }\n      ]\n    },\n    \"Execute_ETL_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute ETL prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_etl_prerequisites_commands.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Execute_Other_Prequisite\": {\n      \"Type\": \"Pass\",\n      \"Result\": \"Execute_Other_Prequisite\",\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Process_Input_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.mergeResults.ClusterId\"\n      },\n      \"ResultPath\": \"$.processResults\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
											"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
											"logging_configuration": [
												{
													"include_execution_data": false,
													"level":                  "OFF",
													"log_destination":        "",
												},
											],
											"name":     "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
											"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
											"status":   "ACTIVE",
											"tags": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tags_all": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tracing_configuration": [
												{
													"enabled": false,
												},
											],
											"type": "STANDARD",
										},
									},
									{
										"address":          "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_caller_identity",
										"values": {
											"account_id": "630953916312",
											"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
											"id":         "630953916312",
											"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
										},
									},
									{
										"address":          "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_region",
										"values": {
											"description": "US East (N. Virginia)",
											"endpoint":    "ec2.us-east-1.amazonaws.com",
											"id":          "us-east-1",
											"name":        "us-east-1",
										},
									},
								],
							},
						],
						"resources": [
							{
								"address":          "module.bkun-dgea-emr-setup-stepfunction.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
							{
								"address":          "module.bkun-dgea-emr-setup-stepfunction.data.aws_region.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_region",
								"values": {
									"description": "US East (N. Virginia)",
									"endpoint":    "ec2.us-east-1.amazonaws.com",
									"id":          "us-east-1",
									"name":        "us-east-1",
								},
							},
						],
					},
					{
						"address": "module.bkun-dgea-etl-stepfunction",
						"child_modules": [
							{
								"address": "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction",
								"resources": [
									{
										"address": "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction.aws_sfn_state_machine.this",
										"depends_on": [
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
											"module.bkun-dgea-etl-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach",
											"module.bkun-dgea-etl-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
										],
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"logging_configuration": [
												{},
											],
											"tags":     {},
											"tags_all": {},
											"tracing_configuration": [
												{},
											],
										},
										"type": "aws_sfn_state_machine",
										"values": {
											"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
											"creation_date": "2021-08-17T05:19:13Z",
											"definition":    "{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/start_job_execution.sh\"\n                    },\n                    {\n                        \"Arg3.$\": \"$.folderName\"\n                    },\n                    {\n                        \"Arg4.$\": \"$.workflowName\"\n                    },\n                    {\n                        \"Arg5.$\": \"$.executionTime\"\n                    },\n                    {\n                        \"Arg6.$\": \"$.UDFParameter\"\n                    },\n                    {\n                        \"Arg7\": \"prod1\"\n                    },\n                    {\n                        \"Arg8.$\": \"$.additionalParameter\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run ETL\"\n    },\n    \"Run ETL\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
											"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
											"logging_configuration": [
												{
													"include_execution_data": false,
													"level":                  "OFF",
													"log_destination":        "",
												},
											],
											"name":     "bkun-dgea-prod1-etl-stepfunction",
											"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
											"status":   "ACTIVE",
											"tags": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-etl-stepfunction",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tags_all": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-etl-stepfunction",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tracing_configuration": [
												{
													"enabled": false,
												},
											],
											"type": "STANDARD",
										},
									},
									{
										"address":          "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction.data.aws_caller_identity.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_caller_identity",
										"values": {
											"account_id": "630953916312",
											"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
											"id":         "630953916312",
											"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
										},
									},
									{
										"address":          "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction.data.aws_region.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_region",
										"values": {
											"description": "US East (N. Virginia)",
											"endpoint":    "ec2.us-east-1.amazonaws.com",
											"id":          "us-east-1",
											"name":        "us-east-1",
										},
									},
								],
							},
						],
						"resources": [
							{
								"address":          "module.bkun-dgea-etl-stepfunction.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
							{
								"address":          "module.bkun-dgea-etl-stepfunction.data.aws_region.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_region",
								"values": {
									"description": "US East (N. Virginia)",
									"endpoint":    "ec2.us-east-1.amazonaws.com",
									"id":          "us-east-1",
									"name":        "us-east-1",
								},
							},
						],
					},
					{
						"address": "module.bkun-dgea-maskout-data-copy",
						"child_modules": [
							{
								"address": "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy",
								"resources": [
									{
										"address": "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy.aws_sfn_state_machine.this",
										"depends_on": [
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
											"module.bkun-dgea-maskout-data-copy.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-maskout-data-copy.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach",
										],
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"logging_configuration": [
												{},
											],
											"tags":     {},
											"tags_all": {},
											"tracing_configuration": [
												{},
											],
										},
										"type": "aws_sfn_state_machine",
										"values": {
											"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
											"creation_date": "2021-08-17T05:19:14Z",
											"definition":    "\n{\n  \"Comment\": \"Step function to move maskOut data to landing layer\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForCopy\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/copy_masked_data_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.maskOutBackuptargetPath\"\n            }\n          ]\n        }\n\t\t}\n      },\n     \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"masked_out_data_backup\"\n    },\n    \"masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"copy_maskout_data_to_landing\"\n    },\n    \"copy_maskout_data_to_landing\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForCopy.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.snappyCopyResult\",\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
											"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
											"logging_configuration": [
												{
													"include_execution_data": false,
													"level":                  "OFF",
													"log_destination":        "",
												},
											],
											"name":     "bkun-dgea-prod1-maskout-data-copy",
											"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
											"status":   "ACTIVE",
											"tags": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-maskout-data-copy",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tags_all": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-maskout-data-copy",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tracing_configuration": [
												{
													"enabled": false,
												},
											],
											"type": "STANDARD",
										},
									},
									{
										"address":          "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy.data.aws_caller_identity.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_caller_identity",
										"values": {
											"account_id": "630953916312",
											"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
											"id":         "630953916312",
											"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
										},
									},
									{
										"address":          "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy.data.aws_region.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_region",
										"values": {
											"description": "US East (N. Virginia)",
											"endpoint":    "ec2.us-east-1.amazonaws.com",
											"id":          "us-east-1",
											"name":        "us-east-1",
										},
									},
								],
							},
						],
						"resources": [
							{
								"address":          "module.bkun-dgea-maskout-data-copy.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
							{
								"address":          "module.bkun-dgea-maskout-data-copy.data.aws_region.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_region",
								"values": {
									"description": "US East (N. Virginia)",
									"endpoint":    "ec2.us-east-1.amazonaws.com",
									"id":          "us-east-1",
									"name":        "us-east-1",
								},
							},
						],
					},
					{
						"address": "module.bkun-dgea-trigger-redshift-process",
						"child_modules": [
							{
								"address": "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction",
								"resources": [
									{
										"address": "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction.aws_sfn_state_machine.this",
										"depends_on": [
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role",
											"module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role",
											"module.bkun-dgea-create-emr-roles.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
											"module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach",
											"module.bkun-dgea-create-emr-roles.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_region.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach",
											"module.bkun-dgea-emr-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.data.aws_caller_identity.current",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach",
											"module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
											"module.bkun-dgea-trigger-redshift-process.data.aws_caller_identity.current",
											"module.bkun-dgea-trigger-redshift-process.data.aws_region.current",
											"module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy",
										],
										"mode":           "managed",
										"name":           "this",
										"provider_name":  "registry.terraform.io/hashicorp/aws",
										"schema_version": 0,
										"sensitive_values": {
											"logging_configuration": [
												{},
											],
											"tags":     {},
											"tags_all": {},
											"tracing_configuration": [
												{},
											],
										},
										"type": "aws_sfn_state_machine",
										"values": {
											"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
											"creation_date": "2021-08-17T05:19:13Z",
											"definition":    "\n{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_start_s3_to_redshift_migration.sh\"\n                    },\n                    {\n                         \"Arg3\": \"prod1\"\n                    },\n\n                    {\n                        \"Arg4.$\": \"$.InputFileName\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_S3_to_Redshift_Migration\"\n    },\n    \"Run_S3_to_Redshift_Migration\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_S3_to_Redshift_Migration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n",
											"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
											"logging_configuration": [
												{
													"include_execution_data": false,
													"level":                  "OFF",
													"log_destination":        "",
												},
											],
											"name":     "bkun-dgea-prod1-s3-to-redshift-stepfunction",
											"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
											"status":   "ACTIVE",
											"tags": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tags_all": {
												"ApplicationID":   "0",
												"ApplicationName": "Data-Processing",
												"ApplicationRole": "",
												"BackupTier":      "NA",
												"BusinessLine":    "Data Governance And Eprise. Arch",
												"CostCenter":      "1006703",
												"Environment":     "Test QA",
												"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
												"ProjectID":       "PRJ0010800",
												"Tier":            "Not Applicable",
											},
											"tracing_configuration": [
												{
													"enabled": false,
												},
											],
											"type": "STANDARD",
										},
									},
									{
										"address":          "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction.data.aws_caller_identity.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_caller_identity",
										"values": {
											"account_id": "630953916312",
											"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
											"id":         "630953916312",
											"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
										},
									},
									{
										"address":          "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction.data.aws_region.current",
										"mode":             "data",
										"name":             "current",
										"provider_name":    "registry.terraform.io/hashicorp/aws",
										"schema_version":   0,
										"sensitive_values": {},
										"type":             "aws_region",
										"values": {
											"description": "US East (N. Virginia)",
											"endpoint":    "ec2.us-east-1.amazonaws.com",
											"id":          "us-east-1",
											"name":        "us-east-1",
										},
									},
								],
							},
						],
						"resources": [
							{
								"address":          "module.bkun-dgea-trigger-redshift-process.data.aws_caller_identity.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_caller_identity",
								"values": {
									"account_id": "630953916312",
									"arn":        "arn:aws:sts::630953916312:assumed-role/bkutfeassumeadmin/1629228650019152532",
									"id":         "630953916312",
									"user_id":    "AROAZFZ6IW6MFKQFVBOJ4:1629228650019152532",
								},
							},
							{
								"address":          "module.bkun-dgea-trigger-redshift-process.data.aws_region.current",
								"mode":             "data",
								"name":             "current",
								"provider_name":    "registry.terraform.io/hashicorp/aws",
								"schema_version":   0,
								"sensitive_values": {},
								"type":             "aws_region",
								"values": {
									"description": "US East (N. Virginia)",
									"endpoint":    "ec2.us-east-1.amazonaws.com",
									"id":          "us-east-1",
									"name":        "us-east-1",
								},
							},
						],
					},
				],
			},
		},
	},
	"resource_changes": [
		{
			"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.ec2_policy",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
					"description": "This policy allows lambda function to access emr",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
					"name":        "bkun-dgea-prod1-emr-availability-ec2-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DeleteNetworkInterface\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
					"policy_id":   "ANPAZFZ6IW6MB444LTGUX",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
					"description": "This policy allows lambda function to access emr",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
					"name":        "bkun-dgea-prod1-emr-availability-ec2-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DeleteNetworkInterface\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
					"policy_id":   "ANPAZFZ6IW6MB444LTGUX",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "ec2_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_policy.emr_policy",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"description": "This policy allows lambda function to check available emr cluster for data migration",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"name":        "bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:ListClusters\",\n                \"elasticmapreduce:DescribeCluster\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
					"policy_id":   "ANPAZFZ6IW6MMH7Z3WONP",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"description": "This policy allows lambda function to check available emr cluster for data migration",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"name":        "bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:ListClusters\",\n                \"elasticmapreduce:DescribeCluster\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
					"policy_id":   "ANPAZFZ6IW6MMH7Z3WONP",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "emr_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role.iam_for_lambda",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
					"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
					"create_date":           "2021-08-16T09:48:26Z",
					"description":           "Created this role to for lambda function to check EMR cluster availability",
					"force_detach_policies": false,
					"id": "bkun-dgea-prod1-check-data-migration-emr-role",
					"inline_policy": [
						{
							"name":   "",
							"policy": "",
						},
					],
					"managed_policy_arns": [
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
					],
					"max_session_duration": 3600,
					"name":                 "bkun-dgea-prod1-check-data-migration-emr-role",
					"name_prefix":          null,
					"path":                 "/",
					"permissions_boundary": null,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Ingestion",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "6703",
						"Environment":     "uat",
						"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						"ProjectID":       "PRJ0010800",
						"Tier":            "4",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Ingestion",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "6703",
						"Environment":     "uat",
						"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						"ProjectID":       "PRJ0010800",
						"Tier":            "4",
					},
					"unique_id": "AROAZFZ6IW6MHC55G5HJD",
				},
				"after_sensitive": {
					"inline_policy": [
						{},
					],
					"managed_policy_arns": [
						false,
						false,
					],
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
					"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
					"create_date":           "2021-08-16T09:48:26Z",
					"description":           "Created this role to for lambda function to check EMR cluster availability",
					"force_detach_policies": false,
					"id": "bkun-dgea-prod1-check-data-migration-emr-role",
					"inline_policy": [
						{
							"name":   "",
							"policy": "",
						},
					],
					"managed_policy_arns": [
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
					],
					"max_session_duration": 3600,
					"name":                 "bkun-dgea-prod1-check-data-migration-emr-role",
					"name_prefix":          null,
					"path":                 "/",
					"permissions_boundary": null,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Ingestion",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "6703",
						"Environment":     "uat",
						"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						"ProjectID":       "PRJ0010800",
						"Tier":            "4",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Ingestion",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "6703",
						"Environment":     "uat",
						"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						"ProjectID":       "PRJ0010800",
						"Tier":            "4",
					},
					"unique_id": "AROAZFZ6IW6MHC55G5HJD",
				},
				"before_sensitive": {
					"inline_policy": [
						{},
					],
					"managed_policy_arns": [
						false,
						false,
					],
					"tags":     {},
					"tags_all": {},
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "iam_for_lambda",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role",
		},
		{
			"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.ec2-attach",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826684700000001",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
					"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826684700000001",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-emr-availability-ec2-policy",
					"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
				},
				"before_sensitive": {},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "ec2-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_iam_role_policy_attachment.emr-attach",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826695100000003",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-check-data-migration-emr-role-20210816094826695100000003",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-check-data-migration-emr-cluster-availability-policy",
					"role":       "bkun-dgea-prod1-check-data-migration-emr-role",
				},
				"before_sensitive": {},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "emr-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_cloudwatch_log_group.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":               "arn:aws:logs:us-east-1:630953916312:log-group:/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"id":                "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"kms_key_id":        "",
					"name":              "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"name_prefix":       null,
					"retention_in_days": 14,
					"tags":              {},
					"tags_all":          {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":               "arn:aws:logs:us-east-1:630953916312:log-group:/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"id":                "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"kms_key_id":        "",
					"name":              "/aws/lambda/bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"name_prefix":       null,
					"retention_in_days": 14,
					"tags":              {},
					"tags_all":          {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_cloudwatch_log_group",
		},
		{
			"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_function.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn": "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"code_signing_config_arn": "",
					"dead_letter_config":      [],
					"description":             "",
					"environment": [
						{
							"variables": {
								"function_name": "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
							},
						},
					],
					"file_system_config": [],
					"filename":           null,
					"function_name":      "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"handler":            "lambda_function.lambda_handler",
					"id":                 "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"image_config":       [],
					"image_uri":          "",
					"invoke_arn":         "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability/invocations",
					"kms_key_arn":        "",
					"last_modified":      "2021-08-16T16:37:35.239+0000",
					"layers": [
						"arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
					],
					"memory_size":                    128,
					"package_type":                   "Zip",
					"publish":                        false,
					"qualified_arn":                  "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability:$LATEST",
					"reserved_concurrent_executions": -1,
					"role":                        "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
					"runtime":                     "python3.7",
					"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
					"s3_key":                      "terraform/lambda/bkun-dgea-check-data-migration-emr-cluster-availability.zip",
					"s3_object_version":           "",
					"signing_job_arn":             "",
					"signing_profile_version_arn": "",
					"source_code_hash":            "DX5uA+ILb+mwRvJEdtpWOpWXvULt+Ynwje7Ma4zo46E=",
					"source_code_size":            901,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Ingestion",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "6703",
						"Environment":     "uat",
						"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						"ProjectID":       "PRJ0010800",
						"Tier":            "4",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Ingestion",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "6703",
						"Environment":     "uat",
						"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						"ProjectID":       "PRJ0010800",
						"Tier":            "4",
					},
					"timeout":  15,
					"timeouts": null,
					"tracing_config": [
						{
							"mode": "PassThrough",
						},
					],
					"version": "$LATEST",
					"vpc_config": [
						{
							"security_group_ids": [
								"sg-09fbd003ca2ca62c2",
							],
							"subnet_ids": [
								"subnet-0f1651bc0380a3db1",
							],
							"vpc_id": "vpc-05e9bae323d6ed989",
						},
					],
				},
				"after_sensitive": {
					"dead_letter_config": [],
					"environment": [
						{
							"variables": {},
						},
					],
					"file_system_config": [],
					"image_config":       [],
					"layers": [
						false,
					],
					"tags":     {},
					"tags_all": {},
					"tracing_config": [
						{},
					],
					"vpc_config": [
						{
							"security_group_ids": [
								false,
							],
							"subnet_ids": [
								false,
							],
						},
					],
				},
				"after_unknown": {},
				"before": {
					"arn": "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"code_signing_config_arn": "",
					"dead_letter_config":      [],
					"description":             "",
					"environment": [
						{
							"variables": {
								"function_name": "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
							},
						},
					],
					"file_system_config": [],
					"filename":           null,
					"function_name":      "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"handler":            "lambda_function.lambda_handler",
					"id":                 "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
					"image_config":       [],
					"image_uri":          "",
					"invoke_arn":         "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability/invocations",
					"kms_key_arn":        "",
					"last_modified":      "2021-08-16T16:37:35.239+0000",
					"layers": [
						"arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
					],
					"memory_size":                    128,
					"package_type":                   "Zip",
					"publish":                        false,
					"qualified_arn":                  "arn:aws:lambda:us-east-1:630953916312:function:bkun-dgea-prod1-check-data-migration-emr-cluster-availability:$LATEST",
					"reserved_concurrent_executions": -1,
					"role":                        "arn:aws:iam::630953916312:role/bkun-dgea-prod1-check-data-migration-emr-role",
					"runtime":                     "python3.7",
					"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
					"s3_key":                      "terraform/lambda/bkun-dgea-check-data-migration-emr-cluster-availability.zip",
					"s3_object_version":           "",
					"signing_job_arn":             "",
					"signing_profile_version_arn": "",
					"source_code_hash":            "DX5uA+ILb+mwRvJEdtpWOpWXvULt+Ynwje7Ma4zo46E=",
					"source_code_size":            901,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Ingestion",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "6703",
						"Environment":     "uat",
						"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						"ProjectID":       "PRJ0010800",
						"Tier":            "4",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Ingestion",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "6703",
						"Environment":     "uat",
						"Name":            "bkun-dgea-prod1-check-data-migration-emr-cluster-availability",
						"ProjectID":       "PRJ0010800",
						"Tier":            "4",
					},
					"timeout":  15,
					"timeouts": null,
					"tracing_config": [
						{
							"mode": "PassThrough",
						},
					],
					"version": "$LATEST",
					"vpc_config": [
						{
							"security_group_ids": [
								"sg-09fbd003ca2ca62c2",
							],
							"subnet_ids": [
								"subnet-0f1651bc0380a3db1",
							],
							"vpc_id": "vpc-05e9bae323d6ed989",
						},
					],
				},
				"before_sensitive": {
					"dead_letter_config": [],
					"environment": [
						{
							"variables": {},
						},
					],
					"file_system_config": [],
					"image_config":       [],
					"layers": [
						false,
					],
					"tags":     {},
					"tags_all": {},
					"tracing_config": [
						{},
					],
					"vpc_config": [
						{
							"security_group_ids": [
								false,
							],
							"subnet_ids": [
								false,
							],
						},
					],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_lambda_function",
		},
		{
			"address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability.aws_lambda_layer_version.lambda_layer",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn": "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
					"compatible_runtimes": [
						"python3.7",
					],
					"created_date":                "2021-08-16T09:48:27.554+0000",
					"description":                 "",
					"filename":                    null,
					"id":                          "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
					"layer_arn":                   "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging",
					"layer_name":                  "bu_logging",
					"license_info":                "",
					"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
					"s3_key":                      "terraform/lambda/bu_logging.zip",
					"s3_object_version":           "",
					"signing_job_arn":             "",
					"signing_profile_version_arn": "",
					"source_code_hash":            "ptDU1VcUhZI1wSaCdnDVw3DkIBuW3iBAKFsfX89MbzQ=",
					"source_code_size":            1214,
					"version":                     "25",
				},
				"after_sensitive": {
					"compatible_runtimes": [
						false,
					],
				},
				"after_unknown": {},
				"before": {
					"arn": "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
					"compatible_runtimes": [
						"python3.7",
					],
					"created_date":                "2021-08-16T09:48:27.554+0000",
					"description":                 "",
					"filename":                    null,
					"id":                          "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging:25",
					"layer_arn":                   "arn:aws:lambda:us-east-1:630953916312:layer:bu_logging",
					"layer_name":                  "bu_logging",
					"license_info":                "",
					"s3_bucket":                   "bkun-dgea-prod1-dp-source-artifacts",
					"s3_key":                      "terraform/lambda/bu_logging.zip",
					"s3_object_version":           "",
					"signing_job_arn":             "",
					"signing_profile_version_arn": "",
					"source_code_hash":            "ptDU1VcUhZI1wSaCdnDVw3DkIBuW3iBAKFsfX89MbzQ=",
					"source_code_size":            1214,
					"version":                     "25",
				},
				"before_sensitive": {
					"compatible_runtimes": [
						false,
					],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-check-data-migration-emr-cluster-availability.module.bkun-dgea-check-data-migration-emr-cluster-availability",
			"name":           "lambda_layer",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_lambda_layer_version",
		},
		{
			"address": "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data.aws_sfn_state_machine.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
					"creation_date": "2021-08-17T05:19:13Z",
					"definition":    "\n{\n  \"Comment\": \"Step function to run the snappy compression on mask_out data\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/bkun_dgea_flat_file_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.backupDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToRedacted\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.redactedDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToConf\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_conf.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.redactedDestination\"\n            },\n            {\n              \"Arg5.$\": \"$.confDestination\"\n            }\n          ]\n        }\n      },\n      \"Next\": \"Check_EMR_Cluster\"\n    },\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n        \"data-source.$\": \"$.EMRClusterType\"\n          }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n      \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",\n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/ingestion/bkun_dgea_data_ingestion_bootstrap.sh\"\n            }\n          }\n        ],\n        \"Tags\": [\n{\n\"Key\": \"ApplicationID\",\n\"Value\": \"0\"\n},\n{\n\"Key\": \"ApplicationName\",\n\"Value\": \"Data-Processing\"\n},\n{\n\"Key\": \"ApplicationRole\",\n\"Value\": \"\"\n},\n{\n\"Key\": \"BusinessLine\",\n\"Value\": \"Data Governance And Eprise. Arch\"\n},\n{\n\"Key\": \"Name\",\n \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\"\n},\n{\n\"Key\": \"CostCenter\",\n\"Value\": \"1006703\"\n},\n{\n\"Key\": \"Environment\",\n\"Value\": \"Test QA\"\n},\n{\n\"Key\": \"ProjectID\",\n\"Value\": \"PRJ0010800\"\n},\n{\n\"Key\": \"Tier\",\n\"Value\": \"Not Applicable\"\n},\n{\n\"Key\": \"BackupTier\",\n\"Value\": \"NA\"\n},\n{\n\"Key\": \"Application\",\n\"Value.$\": \"$.EMRClusterType\"\n}\n],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\": \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2KeyName\": \"DP-UAT-EMR\",\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-master\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-core\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Execute_Prequisite\"\n    },\n    \"Execute_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.execprereqResult\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"flat_file_masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"flat_file_masked_out_data_backup\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_redacted\"\n    },\n    \"flat_file_masked_out_data_to_redacted\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_redacted_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToRedacted.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_conf\"\n    },\n    \"flat_file_masked_out_data_to_conf\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_conf_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToConf.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-copy-flat-file-maskout-data",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"after_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
				"after_unknown": {},
				"before": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
					"creation_date": "2021-08-17T05:19:13Z",
					"definition":    "\n{\n  \"Comment\": \"Step function to run the snappy compression on mask_out data\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/bkun_dgea_flat_file_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.backupDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToRedacted\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.maskOutSource\"\n            },\n            {\n              \"Arg5.$\": \"$.redactedDestination\"\n            }\n          ]\n        },\n        \"MaskOutBackupToConf\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/flatfiles/copy_masked_flatfiles_to_conf.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.redactedDestination\"\n            },\n            {\n              \"Arg5.$\": \"$.confDestination\"\n            }\n          ]\n        }\n      },\n      \"Next\": \"Check_EMR_Cluster\"\n    },\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n        \"data-source.$\": \"$.EMRClusterType\"\n          }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n      \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",\n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/ingestion/bkun_dgea_data_ingestion_bootstrap.sh\"\n            }\n          }\n        ],\n        \"Tags\": [\n{\n\"Key\": \"ApplicationID\",\n\"Value\": \"0\"\n},\n{\n\"Key\": \"ApplicationName\",\n\"Value\": \"Data-Processing\"\n},\n{\n\"Key\": \"ApplicationRole\",\n\"Value\": \"\"\n},\n{\n\"Key\": \"BusinessLine\",\n\"Value\": \"Data Governance And Eprise. Arch\"\n},\n{\n\"Key\": \"Name\",\n \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-flat-file-copy-emr-cluster', $.EMRClusterType)\"\n},\n{\n\"Key\": \"CostCenter\",\n\"Value\": \"1006703\"\n},\n{\n\"Key\": \"Environment\",\n\"Value\": \"Test QA\"\n},\n{\n\"Key\": \"ProjectID\",\n\"Value\": \"PRJ0010800\"\n},\n{\n\"Key\": \"Tier\",\n\"Value\": \"Not Applicable\"\n},\n{\n\"Key\": \"BackupTier\",\n\"Value\": \"NA\"\n},\n{\n\"Key\": \"Application\",\n\"Value.$\": \"$.EMRClusterType\"\n}\n],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\": \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2KeyName\": \"DP-UAT-EMR\",\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-master\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name\": \"bkun-dgea-prod1-etl-emr-core\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Execute_Prequisite\"\n    },\n    \"Execute_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.execprereqResult\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.Payload.lambdaResult\",\n      \"Next\": \"flat_file_masked_out_data_backup\"\n    },\n    \"flat_file_masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"flat_file_masked_out_data_backup\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_redacted\"\n    },\n    \"flat_file_masked_out_data_to_redacted\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_redacted_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToRedacted.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"flat_file_masked_out_data_to_conf\"\n    },\n    \"flat_file_masked_out_data_to_conf\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.Payload.lambdaResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"copy_flat_file_masked_out_data_to_conf_layer\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.MaskOutBackupToConf.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-copy-flat-file-maskout-data",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-copy-flat-file-maskout-data",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-copy-flat-file-maskout-data",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"before_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-copy-flat-file-maskout-data.module.bkun-dgea-copy-flat-file-maskout-data",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_sfn_state_machine",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_emr_security_configuration.security_config",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"configuration": "{\n  \"EncryptionConfiguration\": {\n    \"AtRestEncryptionConfiguration\": {\n      \"S3EncryptionConfiguration\": {\n        \"EncryptionMode\": \"SSE-KMS\",\n        \"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\"Overrides\" : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n      }\n    },\n    \"EnableInTransitEncryption\": false,\n    \"EnableAtRestEncryption\": true\n  }\n}\n",
					"creation_date": "2021-08-16T09:48:26Z",
					"id":            "bkun-dgea-prod1-data-migration-security-configuration",
					"name":          "bkun-dgea-prod1-data-migration-security-configuration",
					"name_prefix":   null,
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"configuration": "{\n  \"EncryptionConfiguration\": {\n    \"AtRestEncryptionConfiguration\": {\n      \"S3EncryptionConfiguration\": {\n        \"EncryptionMode\": \"SSE-KMS\",\n        \"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\"Overrides\" : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"BucketName\" : \"bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n\t\t\t\t\t\t\t\"EncryptionMode\" : \"SSE-KMS\",\n\t\t\t\t\t\t\t\"AwsKmsKey\" : \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n      }\n    },\n    \"EnableInTransitEncryption\": false,\n    \"EnableAtRestEncryption\": true\n  }\n}\n",
					"creation_date": "2021-08-16T09:48:26Z",
					"id":            "bkun-dgea-prod1-data-migration-security-configuration",
					"name":          "bkun-dgea-prod1-data-migration-security-configuration",
					"name_prefix":   null,
				},
				"before_sensitive": {},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "security_config",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_emr_security_configuration",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_instance_profile.emr-ec2-instance-profile[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:instance-profile/bkun-dgea-prod1-data-migration-ec2-role",
					"create_date": "2021-08-16T09:48:26Z",
					"id":          "bkun-dgea-prod1-data-migration-ec2-role",
					"name":        "bkun-dgea-prod1-data-migration-ec2-role",
					"name_prefix": null,
					"path":        "/",
					"role":        "bkun-dgea-prod1-data-migration-ec2-role",
					"tags":        {},
					"tags_all":    {},
					"unique_id":   "AIPAZFZ6IW6MD7GYAEMLG",
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:instance-profile/bkun-dgea-prod1-data-migration-ec2-role",
					"create_date": "2021-08-16T09:48:26Z",
					"id":          "bkun-dgea-prod1-data-migration-ec2-role",
					"name":        "bkun-dgea-prod1-data-migration-ec2-role",
					"name_prefix": null,
					"path":        "/",
					"role":        "bkun-dgea-prod1-data-migration-ec2-role",
					"tags":        {},
					"tags_all":    {},
					"unique_id":   "AIPAZFZ6IW6MD7GYAEMLG",
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "emr-ec2-instance-profile",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_instance_profile",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_policy.ec2_dynamodb_policy[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"description": "This policy allows Ec2 instances of EMR cluster to access dyanmodb.",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"name":        "bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:PutItem\",\n                \"dynamodb:UpdateItem\",\n                \"dynamodb:GetRecords\"\n            ],\n            \"Resource\": [\n                \"arn:aws:dynamodb:us-east-1:630953916312:table/bkun-dgea-email-config\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:ListTables\",\n                \"dynamodb:ListStreams\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
					"policy_id":   "ANPAZFZ6IW6MDSEQYSM6C",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"description": "This policy allows Ec2 instances of EMR cluster to access dyanmodb.",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"name":        "bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:PutItem\",\n                \"dynamodb:UpdateItem\",\n                \"dynamodb:GetRecords\"\n            ],\n            \"Resource\": [\n                \"arn:aws:dynamodb:us-east-1:630953916312:table/bkun-dgea-email-config\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:ListTables\",\n                \"dynamodb:ListStreams\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n",
					"policy_id":   "ANPAZFZ6IW6MDSEQYSM6C",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2_dynamodb_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_policy.kms_policy[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
					"description": "This policy allows Ec2 instances of EMR cluster to access kms key",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
					"name":        "bkun-dgea-prod1-ec2-kms-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n                \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\t\t\"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\t\t\t\t\n            ]\n        }\n    ]\n}",
					"policy_id":   "ANPAZFZ6IW6MEEQHKRBGJ",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
					"description": "This policy allows Ec2 instances of EMR cluster to access kms key",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
					"name":        "bkun-dgea-prod1-ec2-kms-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"kms:Encrypt\",\n                \"kms:Decrypt\",\n                \"kms:ReEncrypt*\",\n                \"kms:GenerateDataKey*\",\n                \"kms:DescribeKey\"\n            ],\n            \"Resource\": [\n                \"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key\",\n\t\t\t\t\"arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-conf-redacted-in-01-iad-kms-key\"\t\t\t\t\n            ]\n        }\n    ]\n}",
					"policy_id":   "ANPAZFZ6IW6MEEQHKRBGJ",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "kms_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_policy.s3_policy[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
					"description": "This policy allows Ec2 instances of EMR cluster to access s3 bucket",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
					"name":        "bkun-dgea-prod1-ec2-s3-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:DeleteObjectVersion\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:RestoreObject\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:PutBucketLogging\",\n                \"s3:GetObjectTagging\",\n                \"s3:DeleteObject\",\n                \"s3:PutBucketVersioning\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\"\n            ]\n        },\n                             {\n            \"Sid\": \"VisualEditor2\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:GetObjectTagging\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n                             {\n            \"Sid\": \"s3logpolicy\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:PutObject\",\n            \"Resource\": \"arn:aws:s3:::aws-logs-<account_id>-<region>/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor3\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:*\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::*bkun-script/*\",\n                \"arn:aws:s3:::*bkun-script*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce/*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce*\"\n            ]\n        }\n    ]\n}\n\n\n",
					"policy_id":   "ANPAZFZ6IW6MNFSOO4QHU",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
					"description": "This policy allows Ec2 instances of EMR cluster to access s3 bucket",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
					"name":        "bkun-dgea-prod1-ec2-s3-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:DeleteObjectVersion\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:RestoreObject\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:PutBucketLogging\",\n                \"s3:GetObjectTagging\",\n                \"s3:DeleteObject\",\n                \"s3:PutBucketVersioning\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-ingest-raw-unredacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-conf-redacted-in-01-iad/*\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad\",\n                \"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\"\n            ]\n        },\n                             {\n            \"Sid\": \"VisualEditor2\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetBucketTagging\",\n                \"s3:GetObjectRetention\",\n                \"s3:GetObjectVersionTagging\",\n                \"s3:ListBucket\",\n                \"s3:GetBucketVersioning\",\n                \"s3:GetObject\",\n                \"s3:GetEncryptionConfiguration\",\n                \"s3:GetObjectTagging\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-dp-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n                             {\n            \"Sid\": \"s3logpolicy\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:PutObject\",\n            \"Resource\": \"arn:aws:s3:::aws-logs-<account_id>-<region>/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor3\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:*\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::*bkun-script/*\",\n                \"arn:aws:s3:::*bkun-script*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce/*\",\n                \"arn:aws:s3:::us-east-1.elasticmapreduce*\"\n            ]\n        }\n    ]\n}\n\n\n",
					"policy_id":   "ANPAZFZ6IW6MNFSOO4QHU",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "s3_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_ec2_role[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role",
					"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
					"create_date":           "2021-08-16T09:48:26Z",
					"description":           "",
					"force_detach_policies": false,
					"id": "bkun-dgea-prod1-data-migration-ec2-role",
					"inline_policy": [
						{
							"name":   "",
							"policy": "",
						},
					],
					"managed_policy_arns": [
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
						"arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
						"arn:aws:iam::aws:policy/AmazonEC2FullAccess",
						"arn:aws:iam::aws:policy/SecretsManagerReadWrite",
						"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
					],
					"max_session_duration": 3600,
					"name":                 "bkun-dgea-prod1-data-migration-ec2-role",
					"name_prefix":          null,
					"path":                 "/",
					"permissions_boundary": null,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"unique_id": "AROAZFZ6IW6MLZ2CV34KP",
				},
				"after_sensitive": {
					"inline_policy": [
						{},
					],
					"managed_policy_arns": [
						false,
						false,
						false,
						false,
						false,
						false,
						false,
					],
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role",
					"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
					"create_date":           "2021-08-16T09:48:26Z",
					"description":           "",
					"force_detach_policies": false,
					"id": "bkun-dgea-prod1-data-migration-ec2-role",
					"inline_policy": [
						{
							"name":   "",
							"policy": "",
						},
					],
					"managed_policy_arns": [
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
						"arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
						"arn:aws:iam::aws:policy/AmazonEC2FullAccess",
						"arn:aws:iam::aws:policy/SecretsManagerReadWrite",
						"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
					],
					"max_session_duration": 3600,
					"name":                 "bkun-dgea-prod1-data-migration-ec2-role",
					"name_prefix":          null,
					"path":                 "/",
					"permissions_boundary": null,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-ec2-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"unique_id": "AROAZFZ6IW6MLZ2CV34KP",
				},
				"before_sensitive": {
					"inline_policy": [
						{},
					],
					"managed_policy_arns": [
						false,
						false,
						false,
						false,
						false,
						false,
						false,
					],
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "emr_ec2_role",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role.emr_sfn_role[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role",
					"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"elasticmapreduce.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
					"create_date":           "2021-08-16T09:48:26Z",
					"description":           "",
					"force_detach_policies": false,
					"id": "bkun-dgea-prod1-data-migration-emr-role",
					"inline_policy": [
						{
							"name":   "",
							"policy": "",
						},
					],
					"managed_policy_arns": [
						"arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
					],
					"max_session_duration": 3600,
					"name":                 "bkun-dgea-prod1-data-migration-emr-role",
					"name_prefix":          null,
					"path":                 "/",
					"permissions_boundary": null,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-emr-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-emr-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"unique_id": "AROAZFZ6IW6MPTZUT2GY6",
				},
				"after_sensitive": {
					"inline_policy": [
						{},
					],
					"managed_policy_arns": [
						false,
					],
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role",
					"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"elasticmapreduce.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
					"create_date":           "2021-08-16T09:48:26Z",
					"description":           "",
					"force_detach_policies": false,
					"id": "bkun-dgea-prod1-data-migration-emr-role",
					"inline_policy": [
						{
							"name":   "",
							"policy": "",
						},
					],
					"managed_policy_arns": [
						"arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
					],
					"max_session_duration": 3600,
					"name":                 "bkun-dgea-prod1-data-migration-emr-role",
					"name_prefix":          null,
					"path":                 "/",
					"permissions_boundary": null,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-emr-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-emr-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"unique_id": "AROAZFZ6IW6MPTZUT2GY6",
				},
				"before_sensitive": {
					"inline_policy": [
						{},
					],
					"managed_policy_arns": [
						false,
					],
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "emr_sfn_role",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-access-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826836800000006",
					"policy_arn": "arn:aws:iam::aws:policy/AmazonEC2FullAccess",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826836800000006",
					"policy_arn": "arn:aws:iam::aws:policy/AmazonEC2FullAccess",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-access-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-dynamodb-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-2021081609482684370000000a",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-2021081609482684370000000a",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-ec2-dynamodb-policy",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-dynamodb-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-glue-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826834100000004",
					"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826834100000004",
					"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-glue-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-kms-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826835500000005",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826835500000005",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-kms-policy",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-kms-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-secretmanager-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826841600000008",
					"policy_arn": "arn:aws:iam::aws:policy/SecretsManagerReadWrite",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826841600000008",
					"policy_arn": "arn:aws:iam::aws:policy/SecretsManagerReadWrite",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-secretmanager-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.ec2-stepfunction-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826840000000007",
					"policy_arn": "arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826840000000007",
					"policy_arn": "arn:aws:iam::aws:policy/AWSStepFunctionsFullAccess",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "ec2-stepfunction-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.emr-access-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-emr-role-20210816094826688000000002",
					"policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
					"role":       "bkun-dgea-prod1-data-migration-emr-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-emr-role-20210816094826688000000002",
					"policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole",
					"role":       "bkun-dgea-prod1-data-migration-emr-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "emr-access-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-create-emr-roles.aws_iam_role_policy_attachment.s3_attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826843400000009",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-ec2-role-20210816094826843400000009",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ec2-s3-policy",
					"role":       "bkun-dgea-prod1-data-migration-ec2-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-create-emr-roles",
			"name":           "s3_attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_alias.this[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					"id":             "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					"name":           "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					"name_prefix":    null,
					"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
					"target_key_id":  "845fe34e-b873-4118-b185-d5824e8b2206",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					"id":             "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					"name":           "alias/bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					"name_prefix":    null,
					"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
					"target_key_id":  "845fe34e-b873-4118-b185-d5824e8b2206",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_kms_alias",
		},
		{
			"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_kms_key.this[0]",
			"change": {
				"actions": [
					"update",
				],
				"after": {
					"arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
					"customer_master_key_spec": "SYMMETRIC_DEFAULT",
					"deletion_window_in_days":  30,
					"description":              "S3 Bucket Key",
					"enable_key_rotation":      false,
					"id":         "845fe34e-b873-4118-b185-d5824e8b2206",
					"is_enabled": true,
					"key_id":     "845fe34e-b873-4118-b185-d5824e8b2206",
					"key_usage":  "ENCRYPT_DECRYPT",
					"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
					"tags": {
						"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					},
					"tags_all": {
						"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
					"customer_master_key_spec": "SYMMETRIC_DEFAULT",
					"deletion_window_in_days":  30,
					"description":              "S3 Bucket Key",
					"enable_key_rotation":      true,
					"id":         "845fe34e-b873-4118-b185-d5824e8b2206",
					"is_enabled": true,
					"key_id":     "845fe34e-b873-4118-b185-d5824e8b2206",
					"key_usage":  "ENCRYPT_DECRYPT",
					"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
					"tags": {
						"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					},
					"tags_all": {
						"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad-kms-key",
					},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_kms_key",
		},
		{
			"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"acceleration_status": "",
					"acl":                         "private",
					"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"bucket":                      "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"bucket_domain_name":          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
					"bucket_prefix":               null,
					"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
					"cors_rule":                   [],
					"force_destroy":               false,
					"grant":                       [],
					"hosted_zone_id":              "Z3AQBSTGFYJSTF",
					"id":                          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"lifecycle_rule":              [],
					"logging":                     [],
					"object_lock_configuration":   [],
					"policy":                      null,
					"region":                      "us-east-1",
					"replication_configuration":   [],
					"request_payer":               "BucketOwner",
					"server_side_encryption_configuration": [
						{
							"rule": [
								{
									"apply_server_side_encryption_by_default": [
										{
											"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
											"sse_algorithm":     "aws:kms",
										},
									],
									"bucket_key_enabled": false,
								},
							],
						},
					],
					"tags": {
						"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					},
					"tags_all": {
						"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					},
					"versioning": [
						{
							"enabled":    true,
							"mfa_delete": false,
						},
					],
					"website":          [],
					"website_domain":   null,
					"website_endpoint": null,
				},
				"after_sensitive": {
					"cors_rule":                 [],
					"grant":                     [],
					"lifecycle_rule":            [],
					"logging":                   [],
					"object_lock_configuration": [],
					"replication_configuration": [],
					"server_side_encryption_configuration": [
						{
							"rule": [
								{
									"apply_server_side_encryption_by_default": [
										{},
									],
								},
							],
						},
					],
					"tags":     {},
					"tags_all": {},
					"versioning": [
						{},
					],
					"website": [],
				},
				"after_unknown": {},
				"before": {
					"acceleration_status": "",
					"acl":                         "private",
					"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"bucket":                      "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"bucket_domain_name":          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
					"bucket_prefix":               null,
					"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad.s3.amazonaws.com",
					"cors_rule":                   [],
					"force_destroy":               false,
					"grant":                       [],
					"hosted_zone_id":              "Z3AQBSTGFYJSTF",
					"id":                          "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"lifecycle_rule":              [],
					"logging":                     [],
					"object_lock_configuration":   [],
					"policy":                      null,
					"region":                      "us-east-1",
					"replication_configuration":   [],
					"request_payer":               "BucketOwner",
					"server_side_encryption_configuration": [
						{
							"rule": [
								{
									"apply_server_side_encryption_by_default": [
										{
											"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/845fe34e-b873-4118-b185-d5824e8b2206",
											"sse_algorithm":     "aws:kms",
										},
									],
									"bucket_key_enabled": false,
								},
							],
						},
					],
					"tags": {
						"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					},
					"tags_all": {
						"Name": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					},
					"versioning": [
						{
							"enabled":    true,
							"mfa_delete": false,
						},
					],
					"website":          [],
					"website_domain":   null,
					"website_endpoint": null,
				},
				"before_sensitive": {
					"cors_rule":                 [],
					"grant":                     [],
					"lifecycle_rule":            [],
					"logging":                   [],
					"object_lock_configuration": [],
					"replication_configuration": [],
					"server_side_encryption_configuration": [
						{
							"rule": [
								{
									"apply_server_side_encryption_by_default": [
										{},
									],
								},
							],
						},
					],
					"tags":     {},
					"tags_all": {},
					"versioning": [
						{},
					],
					"website": [],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_s3_bucket",
		},
		{
			"address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted.aws_s3_bucket_policy.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"bucket": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"id":     "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"bucket": "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"id":     "bkun-dgea-prod1-datamart-con-redacted-in-01-iad",
					"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-con-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
				},
				"before_sensitive": {},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-conf-redacted.module.bkun-dgea-datamart-conf-redacted",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_s3_bucket_policy",
		},
		{
			"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_alias.this[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					"id":             "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					"name":           "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					"name_prefix":    null,
					"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
					"target_key_id":  "2a3b6b07-2625-4e7d-b168-5d40dace358a",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"arn":            "arn:aws:kms:us-east-1:630953916312:alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					"id":             "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					"name":           "alias/bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					"name_prefix":    null,
					"target_key_arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
					"target_key_id":  "2a3b6b07-2625-4e7d-b168-5d40dace358a",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_kms_alias",
		},
		{
			"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_kms_key.this[0]",
			"change": {
				"actions": [
					"update",
				],
				"after": {
					"arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
					"customer_master_key_spec": "SYMMETRIC_DEFAULT",
					"deletion_window_in_days":  30,
					"description":              "S3 Bucket Key",
					"enable_key_rotation":      false,
					"id":         "2a3b6b07-2625-4e7d-b168-5d40dace358a",
					"is_enabled": true,
					"key_id":     "2a3b6b07-2625-4e7d-b168-5d40dace358a",
					"key_usage":  "ENCRYPT_DECRYPT",
					"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
					"tags": {
						"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					},
					"tags_all": {
						"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
					"customer_master_key_spec": "SYMMETRIC_DEFAULT",
					"deletion_window_in_days":  30,
					"description":              "S3 Bucket Key",
					"enable_key_rotation":      true,
					"id":         "2a3b6b07-2625-4e7d-b168-5d40dace358a",
					"is_enabled": true,
					"key_id":     "2a3b6b07-2625-4e7d-b168-5d40dace358a",
					"key_usage":  "ENCRYPT_DECRYPT",
					"policy":     "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::630953916312:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
					"tags": {
						"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					},
					"tags_all": {
						"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad-kms-key",
					},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_kms_key",
		},
		{
			"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"acceleration_status": "",
					"acl":                         "private",
					"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"bucket":                      "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"bucket_domain_name":          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
					"bucket_prefix":               null,
					"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
					"cors_rule":                   [],
					"force_destroy":               false,
					"grant":                       [],
					"hosted_zone_id":              "Z3AQBSTGFYJSTF",
					"id":                          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"lifecycle_rule":              [],
					"logging":                     [],
					"object_lock_configuration":   [],
					"policy":                      null,
					"region":                      "us-east-1",
					"replication_configuration":   [],
					"request_payer":               "BucketOwner",
					"server_side_encryption_configuration": [
						{
							"rule": [
								{
									"apply_server_side_encryption_by_default": [
										{
											"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
											"sse_algorithm":     "aws:kms",
										},
									],
									"bucket_key_enabled": false,
								},
							],
						},
					],
					"tags": {
						"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					},
					"tags_all": {
						"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					},
					"versioning": [
						{
							"enabled":    true,
							"mfa_delete": false,
						},
					],
					"website":          [],
					"website_domain":   null,
					"website_endpoint": null,
				},
				"after_sensitive": {
					"cors_rule":                 [],
					"grant":                     [],
					"lifecycle_rule":            [],
					"logging":                   [],
					"object_lock_configuration": [],
					"replication_configuration": [],
					"server_side_encryption_configuration": [
						{
							"rule": [
								{
									"apply_server_side_encryption_by_default": [
										{},
									],
								},
							],
						},
					],
					"tags":     {},
					"tags_all": {},
					"versioning": [
						{},
					],
					"website": [],
				},
				"after_unknown": {},
				"before": {
					"acceleration_status": "",
					"acl":                         "private",
					"arn":                         "arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"bucket":                      "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"bucket_domain_name":          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
					"bucket_prefix":               null,
					"bucket_regional_domain_name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad.s3.amazonaws.com",
					"cors_rule":                   [],
					"force_destroy":               false,
					"grant":                       [],
					"hosted_zone_id":              "Z3AQBSTGFYJSTF",
					"id":                          "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"lifecycle_rule":              [],
					"logging":                     [],
					"object_lock_configuration":   [],
					"policy":                      null,
					"region":                      "us-east-1",
					"replication_configuration":   [],
					"request_payer":               "BucketOwner",
					"server_side_encryption_configuration": [
						{
							"rule": [
								{
									"apply_server_side_encryption_by_default": [
										{
											"kms_master_key_id": "arn:aws:kms:us-east-1:630953916312:key/2a3b6b07-2625-4e7d-b168-5d40dace358a",
											"sse_algorithm":     "aws:kms",
										},
									],
									"bucket_key_enabled": false,
								},
							],
						},
					],
					"tags": {
						"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					},
					"tags_all": {
						"Name": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					},
					"versioning": [
						{
							"enabled":    true,
							"mfa_delete": false,
						},
					],
					"website":          [],
					"website_domain":   null,
					"website_endpoint": null,
				},
				"before_sensitive": {
					"cors_rule":                 [],
					"grant":                     [],
					"lifecycle_rule":            [],
					"logging":                   [],
					"object_lock_configuration": [],
					"replication_configuration": [],
					"server_side_encryption_configuration": [
						{
							"rule": [
								{
									"apply_server_side_encryption_by_default": [
										{},
									],
								},
							],
						},
					],
					"tags":     {},
					"tags_all": {},
					"versioning": [
						{},
					],
					"website": [],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_s3_bucket",
		},
		{
			"address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts.aws_s3_bucket_policy.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"bucket": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"id":     "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"bucket": "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"id":     "bkun-dgea-prod1-datamart-raw-redacted-in-01-iad",
					"policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonSSLAccess\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":\"arn:aws:s3:::bkun-dgea-prod1-datamart-raw-redacted-in-01-iad/*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
				},
				"before_sensitive": {},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-datamart-raw-redacted.module.bkun-dgea-dp-source-artifacts",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_s3_bucket_policy",
		},
		{
			"address": "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function.aws_sfn_state_machine.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
					"creation_date": "2021-08-17T05:19:13Z",
					"definition":    "\n {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForFinalBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_total_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetBackupPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForDDLCreation\": {\n          \"Args.$\": \"$.DDLArgs\"\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_FinalData_Backup_Process\"\n    },\n     \"Run_FinalData_Backup_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_FinalData_Backup_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForFinalBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_DDL_Creation_Process\"\n    },\n    \"Run_DDL_Creation_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_DDL_Creation_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForDDLCreation.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-ddl-creation-step-function",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"after_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
				"after_unknown": {},
				"before": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
					"creation_date": "2021-08-17T05:19:13Z",
					"definition":    "\n {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForFinalBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_total_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetBackupPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForDDLCreation\": {\n          \"Args.$\": \"$.DDLArgs\"\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_FinalData_Backup_Process\"\n    },\n     \"Run_FinalData_Backup_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_FinalData_Backup_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForFinalBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_DDL_Creation_Process\"\n    },\n    \"Run_DDL_Creation_Process\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_DDL_Creation_Process\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForDDLCreation.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-ddl-creation-step-function",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-ddl-creation-step-function",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-ddl-creation-step-function",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"before_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-ddl-creation-step-function.module.bkun-dgea-ddl-creation-step-function",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_sfn_state_machine",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_cw_policy[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"description": "This policy allows step function to send cloudwatch events",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"name":        "bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogStreams\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogStream\",\n                \"logs:DescribeLogStreams\",\n                \"logs:PutRetentionPolicy\"\n            ],\n            \"Resource\": \"arn:aws:logs:*:*:log-group:/aws/states/bkun-dgea-prod1-historical-ingestion-emr-setup-stepfunction-Logs/*\"\n        },\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogGroups\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"logs:CreateLogGroup\",\n            \"Resource\": \"*\"\n        },\n\t\t{\n            \"Sid\": \"AllowAccessToCloudWatchkoi\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"cloudwatch:PutMetricAlarm\",\n                \"cloudwatch:DescribeInsightRules\",\n                \"cloudwatch:PutDashboard\",\n                \"cloudwatch:DescribeAlarmHistory\",\n                \"cloudwatch:ListDashboards\",\n                \"cloudwatch:DescribeAlarms\",\n                \"cloudwatch:EnableInsightRules\",\n                \"cloudwatch:GetMetricStatistics\",\n                \"cloudwatch:ListMetrics\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
					"policy_id":   "ANPAZFZ6IW6MACFVLGIAY",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"description": "This policy allows step function to send cloudwatch events",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"name":        "bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogStreams\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogStream\",\n                \"logs:DescribeLogStreams\",\n                \"logs:PutRetentionPolicy\"\n            ],\n            \"Resource\": \"arn:aws:logs:*:*:log-group:/aws/states/bkun-dgea-prod1-historical-ingestion-emr-setup-stepfunction-Logs/*\"\n        },\n        {\n            \"Sid\": \"EnableCreationAndManagementOfRDSCloudwatchLogGroups\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"logs:CreateLogGroup\",\n            \"Resource\": \"*\"\n        },\n\t\t{\n            \"Sid\": \"AllowAccessToCloudWatchkoi\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"cloudwatch:PutMetricAlarm\",\n                \"cloudwatch:DescribeInsightRules\",\n                \"cloudwatch:PutDashboard\",\n                \"cloudwatch:DescribeAlarmHistory\",\n                \"cloudwatch:ListDashboards\",\n                \"cloudwatch:DescribeAlarms\",\n                \"cloudwatch:EnableInsightRules\",\n                \"cloudwatch:GetMetricStatistics\",\n                \"cloudwatch:ListMetrics\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
					"policy_id":   "ANPAZFZ6IW6MACFVLGIAY",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_cw_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_ec2_policy[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"description": "This policy allows step function to set up EMR cluster",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"name":        "bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:DescribeInstances\",\n                \"cloudwatch:DeleteAlarms\",\n                \"s3:Get*\",\n                \"s3:List*\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DescribeVolumeStatus\",\n                \"ec2:RevokeSecurityGroupEgress\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DescribeAccountAttributes\",\n                \"ec2:DescribeKeyPairs\",\n                \"iam:ListRolePolicies\",\n                \"ec2:DescribeNetworkAcls\",\n                \"ec2:DescribeRouteTables\",\n                \"ec2:DetachVolume\",\n                \"iam:GetRole\",\n                \"application-autoscaling:RegisterScalableTarget\",\n                \"ec2:CreateTags\",\n                \"ec2:DeleteNetworkInterface\",\n                \"ec2:RunInstances\",\n                \"application-autoscaling:DeleteScalingPolicy\",\n                \"ec2:DescribePrefixLists\",\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:CancelSpotInstanceRequests\",\n                \"cloudwatch:DescribeAlarms\",\n                \"application-autoscaling:PutScalingPolicy\",\n                \"ec2:DescribeVpcEndpoints\",\n                \"ec2:DescribeSubnets\",\n                \"iam:GetRolePolicy\",\n                \"ec2:RequestSpotInstances\",\n                \"ec2:DeleteTags\",\n                \"ec2:DescribeDhcpOptions\",\n                \"ec2:DescribeVpcEndpointServices\",\n                \"ec2:DescribeSpotInstanceRequests\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:DescribeVpcAttribute\",\n                \"ec2:DescribeSpotPriceHistory\",\n                \"iam:PassRole\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DescribeAvailabilityZones\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:AuthorizeSecurityGroupEgress\",\n                \"ec2:TerminateInstances\",\n                \"ec2:DetachNetworkInterface\",\n                \"application-autoscaling:Describe*\",\n                \"ec2:DescribeTags\",\n                \"iam:ListInstanceProfiles\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeImages\",\n                \"cloudwatch:PutMetricAlarm\",\n                \"ec2:DescribeVpcs\",\n                \"ec2:DeleteSecurityGroup\",\n                \"application-autoscaling:DeregisterScalableTarget\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
					"policy_id":   "ANPAZFZ6IW6MGL3MG5HQE",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"description": "This policy allows step function to set up EMR cluster",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"name":        "bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ec2:DescribeInstances\",\n                \"cloudwatch:DeleteAlarms\",\n                \"s3:Get*\",\n                \"s3:List*\",\n                \"ec2:DeleteVolume\",\n                \"ec2:DescribeVolumeStatus\",\n                \"ec2:RevokeSecurityGroupEgress\",\n                \"ec2:DescribeVolumes\",\n                \"ec2:DescribeAccountAttributes\",\n                \"ec2:DescribeKeyPairs\",\n                \"iam:ListRolePolicies\",\n                \"ec2:DescribeNetworkAcls\",\n                \"ec2:DescribeRouteTables\",\n                \"ec2:DetachVolume\",\n                \"iam:GetRole\",\n                \"application-autoscaling:RegisterScalableTarget\",\n                \"ec2:CreateTags\",\n                \"ec2:DeleteNetworkInterface\",\n                \"ec2:RunInstances\",\n                \"application-autoscaling:DeleteScalingPolicy\",\n                \"ec2:DescribePrefixLists\",\n                \"ec2:CreateNetworkInterface\",\n                \"ec2:CancelSpotInstanceRequests\",\n                \"cloudwatch:DescribeAlarms\",\n                \"application-autoscaling:PutScalingPolicy\",\n                \"ec2:DescribeVpcEndpoints\",\n                \"ec2:DescribeSubnets\",\n                \"iam:GetRolePolicy\",\n                \"ec2:RequestSpotInstances\",\n                \"ec2:DeleteTags\",\n                \"ec2:DescribeDhcpOptions\",\n                \"ec2:DescribeVpcEndpointServices\",\n                \"ec2:DescribeSpotInstanceRequests\",\n                \"ec2:ModifyImageAttribute\",\n                \"ec2:DescribeVpcAttribute\",\n                \"ec2:DescribeSpotPriceHistory\",\n                \"iam:PassRole\",\n                \"ec2:DescribeNetworkInterfaces\",\n                \"ec2:DescribeAvailabilityZones\",\n                \"ec2:CreateSecurityGroup\",\n                \"ec2:ModifyInstanceAttribute\",\n                \"ec2:DescribeInstanceStatus\",\n                \"ec2:AuthorizeSecurityGroupEgress\",\n                \"ec2:TerminateInstances\",\n                \"ec2:DetachNetworkInterface\",\n                \"application-autoscaling:Describe*\",\n                \"ec2:DescribeTags\",\n                \"iam:ListInstanceProfiles\",\n                \"ec2:DescribeSecurityGroups\",\n                \"ec2:DescribeImages\",\n                \"cloudwatch:PutMetricAlarm\",\n                \"ec2:DescribeVpcs\",\n                \"ec2:DeleteSecurityGroup\",\n                \"application-autoscaling:DeregisterScalableTarget\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
					"policy_id":   "ANPAZFZ6IW6MGL3MG5HQE",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_ec2_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_emr_policy[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"description": "This policy allows step function to set up EMR cluster",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"name":        "bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:RunJobFlow\",\n                \"elasticmapreduce:DescribeCluster\",\n                \"elasticmapreduce:TerminateJobFlows\",\n                \"elasticmapreduce:AddJobFlowSteps\",\n                \"elasticmapreduce:DescribeStep\",\n                \"elasticmapreduce:CancelSteps\",\n                \"elasticmapreduce:SetTerminationProtection\"\n            ],\n            \"Resource\": \"arn:aws:elasticmapreduce:*:*:cluster/*\"\n        },\n\t\t{\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": [\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role\",\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role\"\n            ]\n        }\n    ]\n}\n",
					"policy_id":   "ANPAZFZ6IW6MK7XJ3P4N3",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"description": "This policy allows step function to set up EMR cluster",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"name":        "bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"elasticmapreduce:RunJobFlow\",\n                \"elasticmapreduce:DescribeCluster\",\n                \"elasticmapreduce:TerminateJobFlows\",\n                \"elasticmapreduce:AddJobFlowSteps\",\n                \"elasticmapreduce:DescribeStep\",\n                \"elasticmapreduce:CancelSteps\",\n                \"elasticmapreduce:SetTerminationProtection\"\n            ],\n            \"Resource\": \"arn:aws:elasticmapreduce:*:*:cluster/*\"\n        },\n\t\t{\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": [\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-emr-role\",\n                \"arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-ec2-role\"\n            ]\n        }\n    ]\n}\n",
					"policy_id":   "ANPAZFZ6IW6MK7XJ3P4N3",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_emr_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_policy[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
					"description": "This policy provides basic permission for step function executions.",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
					"name":        "bkun-dgea-prod1-ingestion-stepfunction-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"EMREc2AccessForStepFunction\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"states:ListStateMachines\",\n                \"states:DescribeActivity\",\n                \"states:DescribeStateMachine\",\n                \"states:ListActivities\",\n                \"states:ListExecutions\",\n                \"states:UpdateStateMachine\",\n                \"states:DeleteStateMachine\",\n                \"states:StopExecution\",\n                \"states:DescribeStateMachineForExecution\",\n                \"states:SendTaskFailure\",\n                \"states:DescribeExecution\",\n                \"states:GetExecutionHistory\",\n                \"states:DeleteActivity\",\n                \"states:StartExecution\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"AllowAccessToPassRoleToEventsiuj\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": \"arn:aws:iam::*:role/*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:PassedToService\": \"events.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"events:PutTargets\",\n                \"events:PutRule\",\n                \"events:DescribeRule\"\n            ],\n            \"Resource\": [\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule\",\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventForEMRAddJobFlowStepsRule\"\n            ]\n        },\n        {\n            \"Action\": [\n                \"logs:*\",\n                \"iam:GetPolicy\",\n                \"iam:GetPolicyVersion\",\n                \"iam:GetRole\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/events.amazonaws.com/AWSServiceRoleForCloudWatchEvents*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"events.amazonaws.com\"\n                }\n            }\n        }\n    ]\n}\n\n\n",
					"policy_id":   "ANPAZFZ6IW6MAHDT27IUG",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
					"description": "This policy provides basic permission for step function executions.",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
					"name":        "bkun-dgea-prod1-ingestion-stepfunction-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"spot.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"EMREc2AccessForStepFunction\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"states:ListStateMachines\",\n                \"states:DescribeActivity\",\n                \"states:DescribeStateMachine\",\n                \"states:ListActivities\",\n                \"states:ListExecutions\",\n                \"states:UpdateStateMachine\",\n                \"states:DeleteStateMachine\",\n                \"states:StopExecution\",\n                \"states:DescribeStateMachineForExecution\",\n                \"states:SendTaskFailure\",\n                \"states:DescribeExecution\",\n                \"states:GetExecutionHistory\",\n                \"states:DeleteActivity\",\n                \"states:StartExecution\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"AllowAccessToPassRoleToEventsiuj\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:PassRole\",\n            \"Resource\": \"arn:aws:iam::*:role/*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:PassedToService\": \"events.amazonaws.com\"\n                }\n            }\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"events:PutTargets\",\n                \"events:PutRule\",\n                \"events:DescribeRule\"\n            ],\n            \"Resource\": [\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule\",\n                \"arn:aws:events:us-east-1:630953916312:rule/StepFunctionsGetEventForEMRAddJobFlowStepsRule\"\n            ]\n        },\n        {\n            \"Action\": [\n                \"logs:*\",\n                \"iam:GetPolicy\",\n                \"iam:GetPolicyVersion\",\n                \"iam:GetRole\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": \"iam:CreateServiceLinkedRole\",\n            \"Resource\": \"arn:aws:iam::*:role/aws-service-role/events.amazonaws.com/AWSServiceRoleForCloudWatchEvents*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"iam:AWSServiceName\": \"events.amazonaws.com\"\n                }\n            }\n        }\n    ]\n}\n\n\n",
					"policy_id":   "ANPAZFZ6IW6MAHDT27IUG",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_policy.sfn_s3_policy[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"description": "This policy allows step function to set up EMR cluster",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"name":        "bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\",\n                \"s3:ListBucket\",\n                \"s3:PutObject\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor81\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::aws-logs-630953916312-us-east-1/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor1265\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
					"policy_id":   "ANPAZFZ6IW6MGZCFMI54G",
					"tags":        {},
					"tags_all":    {},
				},
				"after_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":         "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"description": "This policy allows step function to set up EMR cluster",
					"id":          "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"name":        "bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"name_prefix": null,
					"path":        "/",
					"policy":      "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\",\n                \"s3:ListBucket\",\n                \"s3:PutObject\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts\",\n                \"arn:aws:s3:::bkun-dgea-prod1-di-source-artifacts/*\"\n            ]\n        },\n        {\n            \"Sid\": \"VisualEditor1\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"VisualEditor81\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObjectAcl\",\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::aws-logs-630953916312-us-east-1/*\"\n        },\n        {\n            \"Sid\": \"VisualEditor1265\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"s3:ListAllMyBuckets\",\n            \"Resource\": \"*\"\n        }\n    ]\n}\n\n",
					"policy_id":   "ANPAZFZ6IW6MGZCFMI54G",
					"tags":        {},
					"tags_all":    {},
				},
				"before_sensitive": {
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn_s3_policy",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_policy",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role.iam_for_sfn[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
					"create_date":           "2021-08-17T04:14:59Z",
					"description":           "",
					"force_detach_policies": false,
					"id": "bkun-dgea-prod1-data-migration-stepfunction-role",
					"inline_policy": [
						{
							"name":   "",
							"policy": "",
						},
					],
					"managed_policy_arns": [
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
					],
					"max_session_duration": 3600,
					"name":                 "bkun-dgea-prod1-data-migration-stepfunction-role",
					"name_prefix":          null,
					"path":                 "/",
					"permissions_boundary": null,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"unique_id": "AROAZFZ6IW6MJVO72SGC7",
				},
				"after_sensitive": {
					"inline_policy": [
						{},
					],
					"managed_policy_arns": [
						false,
						false,
						false,
						false,
						false,
						false,
					],
					"tags":     {},
					"tags_all": {},
				},
				"after_unknown": {},
				"before": {
					"arn":                   "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"assume_role_policy":    "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
					"create_date":           "2021-08-17T04:14:59Z",
					"description":           "",
					"force_detach_policies": false,
					"id": "bkun-dgea-prod1-data-migration-stepfunction-role",
					"inline_policy": [
						{
							"name":   "",
							"policy": "",
						},
					],
					"managed_policy_arns": [
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
						"arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
						"arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
					],
					"max_session_duration": 3600,
					"name":                 "bkun-dgea-prod1-data-migration-stepfunction-role",
					"name_prefix":          null,
					"path":                 "/",
					"permissions_boundary": null,
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-data-migration-stepfunction-role",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"unique_id": "AROAZFZ6IW6MJVO72SGC7",
				},
				"before_sensitive": {
					"inline_policy": [
						{},
					],
					"managed_policy_arns": [
						false,
						false,
						false,
						false,
						false,
						false,
					],
					"tags":     {},
					"tags_all": {},
				},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "iam_for_sfn",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.lambda-access-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459515600000001",
					"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459515600000001",
					"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaRole",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "lambda-access-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.sfn-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518000000004",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518000000004",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-stepfunction-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "sfn-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-cloudwatch-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518200000005",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459518200000005",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-cw-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "step-cloudwatch-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-ec2-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516800000003",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516800000003",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-ec2-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "step-ec2-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-emr-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459519100000006",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459519100000006",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-emr-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "step-emr-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_iam_role_policy_attachment.step-s3-attach[0]",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516400000002",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"after_sensitive": {},
				"after_unknown":   {},
				"before": {
					"id":         "bkun-dgea-prod1-data-migration-stepfunction-role-20210817041459516400000002",
					"policy_arn": "arn:aws:iam::630953916312:policy/bkun-dgea-prod1-ingestion-sfn-s3-policy",
					"role":       "bkun-dgea-prod1-data-migration-stepfunction-role",
				},
				"before_sensitive": {},
			},
			"index":          0,
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "step-s3-attach",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_iam_role_policy_attachment",
		},
		{
			"address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction.aws_sfn_state_machine.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"creation_date": "2021-08-17T04:14:59Z",
					"definition":    "  {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Check_EMR_Cluster\",\n  \"States\": {\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n          \"data-source.$\": \"$.InputParam.EMRClusterType\"\n        }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n    \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-cluster', $.InputParam.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",        \n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/etl/bkun_dgea_etl_bootstrap_commands.sh\"\n            }\n          }\n       ],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n\t\"Tags\": [\n\t\t{\n            \"Key\": \"ApplicationID\",\n            \"Value\": \"0\"\n          },\n          {\n            \"Key\": \"ApplicationName\",\n            \"Value\": \"Data-Processing\"\n          },\n          {\n            \"Key\": \"ApplicationRole\",\n            \"Value\": \"\"\n          },\n\t\t  {\n            \"Key\": \"BusinessLine\",\n            \"Value\": \"Data Governance And Eprise. Arch\"\n          },\n          {\n            \"Key\": \"Name\",\n            \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-ingestion-emr-cluster', $.InputParam.EMRClusterType)\"\n          },\n\t\t  {\n            \"Key\": \"CostCenter\",\n            \"Value\": \"1006703\"\n          },\n          {\n            \"Key\": \"Environment\",\n            \"Value\": \"Test QA\"\n          },\n          {\n            \"Key\": \"ProjectID\",\n            \"Value\": \"PRJ0010800\"\n          },\n\t\t  {\n            \"Key\": \"Tier\",\n            \"Value\": \"Not Applicable\"\n          },\n\t\t  {\n            \"Key\": \"BackupTier\",\n            \"Value\": \"NA\"\n          },\n          {\n            \"Key\": \"Application\",\n            \"Value.$\": \"$.InputParam.EMRClusterType\"\n          },\n          {\n            \"Key\": \"ITContact\",\n            \"Value\": \"Haritha Nookala\"\n          },\n\t  {\n            \"Key\": \"Owner\",\n            \"Value\": \"Malory\"\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\" : \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-master', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-core', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.InputParam.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Run_AD_Script\"\n    },\n    \"Run_AD_Script\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Enable AD Integration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar\",\n            \"Args\": [\n              \"s3://bkun-script/emr-harden-amzn-linux-dp-uat-1_1.sh\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Execute_Prerequisites\"\n    },\n    \"Should_Execute_Prerequisites\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.EMRClusterType\",\n          \"StringEquals\": \"etl\",\n          \"Next\": \"Execute_ETL_Prequisite\"\n        },\n        {\n          \"Not\": {\n            \"Variable\": \"$.InputParam.EMRClusterType\",\n            \"StringEquals\": \"etl\"\n          },\n          \"Next\": \"Execute_Other_Prequisite\"\n        }\n      ]\n    },\n    \"Execute_ETL_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute ETL prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_etl_prerequisites_commands.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Execute_Other_Prequisite\": {\n      \"Type\": \"Pass\",\n      \"Result\": \"Execute_Other_Prequisite\",\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Process_Input_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.mergeResults.ClusterId\"\n      },\n      \"ResultPath\": \"$.processResults\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"after_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
				"after_unknown": {},
				"before": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"creation_date": "2021-08-17T04:14:59Z",
					"definition":    "  {\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n  \"StartAt\": \"Check_EMR_Cluster\",\n  \"States\": {\n    \"Check_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::lambda:invoke\",\n      \"Parameters\": {\n        \"FunctionName\": \"bkun-dgea-prod1-check-data-migration-emr-cluster-availability\",\n        \"Payload\": {\n          \"data-source.$\": \"$.InputParam.EMRClusterType\"\n        }\n      },\n      \"ResultPath\": \"$.lambdaResult\",\n      \"Next\": \"Should_Create_Cluster\"\n    },\n    \"Should_Create_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Create_EMR_Cluster\"\n        },\n        {\n          \"Variable\": \"$.lambdaResult.Payload.isClusterExist\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Merge_Result_From_Lambda\"\n        }\n      ],\n      \"Default\": \"Create_EMR_Cluster\"\n    },\n    \"Create_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:createCluster.sync\",\n      \"Parameters\": {\n        \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-cluster', $.InputParam.EMRClusterType)\",\n        \"VisibleToAllUsers\": true,\n        \"ReleaseLabel\": \"emr-5.29.0\",        \n        \"Applications\": [\n          {\n            \"Name\": \"Hadoop\"\n          },\n          {\n            \"Name\": \"Hive\"\n          },\n          {\n            \"Name\": \"Pig\"\n          },\n          {\n            \"Name\": \"Hue\"\n          },\n          {\n            \"Name\": \"Spark\"\n          }\n        ],\n        \"ServiceRole\": \"bkun-dgea-prod1-data-migration-emr-role\",\n        \"JobFlowRole\": \"bkun-dgea-prod1-data-migration-ec2-role\",\n        \"StepConcurrencyLevel\": 2,\n        \"BootstrapActions\": [\n          {\n            \"Name\": \"prod1.etl.emr-bootstrap-script\",\n            \"ScriptBootstrapAction\": {\n              \"Args\": [\"prod1\"],\n              \"Path\": \"s3://bkun-dgea-prod1-dp-source-artifacts/etl/bkun_dgea_etl_bootstrap_commands.sh\"\n            }\n          }\n       ],\n        \"Configurations\": [\n          {\n            \"Classification\": \"hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          },\n          {\n            \"Classification\": \"spark-hive-site\",\n            \"Properties\": {\n              \"hive.metastore.client.factory.class\": \"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory\"\n            }\n          }\n        ],\n\t\"Tags\": [\n\t\t{\n            \"Key\": \"ApplicationID\",\n            \"Value\": \"0\"\n          },\n          {\n            \"Key\": \"ApplicationName\",\n            \"Value\": \"Data-Processing\"\n          },\n          {\n            \"Key\": \"ApplicationRole\",\n            \"Value\": \"\"\n          },\n\t\t  {\n            \"Key\": \"BusinessLine\",\n            \"Value\": \"Data Governance And Eprise. Arch\"\n          },\n          {\n            \"Key\": \"Name\",\n            \"Value.$\": \"States.Format('bkun-dgea-prod1-{}-ingestion-emr-cluster', $.InputParam.EMRClusterType)\"\n          },\n\t\t  {\n            \"Key\": \"CostCenter\",\n            \"Value\": \"1006703\"\n          },\n          {\n            \"Key\": \"Environment\",\n            \"Value\": \"Test QA\"\n          },\n          {\n            \"Key\": \"ProjectID\",\n            \"Value\": \"PRJ0010800\"\n          },\n\t\t  {\n            \"Key\": \"Tier\",\n            \"Value\": \"Not Applicable\"\n          },\n\t\t  {\n            \"Key\": \"BackupTier\",\n            \"Value\": \"NA\"\n          },\n          {\n            \"Key\": \"Application\",\n            \"Value.$\": \"$.InputParam.EMRClusterType\"\n          },\n          {\n            \"Key\": \"ITContact\",\n            \"Value\": \"Haritha Nookala\"\n          },\n\t  {\n            \"Key\": \"Owner\",\n            \"Value\": \"Malory\"\n          }\n        ],\n        \"LogUri\": \"s3://aws-logs-630953916312-us-east-1/elasticmapreduce\",\n        \"SecurityConfiguration\" : \"bkun-dgea-prod1-data-migration-security-configuration\",\n        \"EbsRootVolumeSize\": 10,\n        \"Instances\": {\n          \"KeepJobFlowAliveWhenNoSteps\": true,\n          \"Ec2SubnetId\": \"subnet-07911106ea5728129\",\n          \"InstanceGroups\": [\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-master', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"MASTER\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount\": 1,\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            },\n            {\n              \"Name.$\": \"States.Format('bkun-dgea-prod1-{}-etl-emr-core', $.InputParam.EMRClusterType)\",\n              \"InstanceRole\": \"CORE\",\n              \"Market\": \"ON_DEMAND\",\n              \"InstanceCount.$\": \"$.InputParam.CoreInstanceCount\",\n              \"InstanceType.$\": \"$.InputParam.InstanceType\",\n              \"EbsConfiguration\": {\n                \"EbsBlockDeviceConfigs\": [\n                  {\n                    \"VolumeSpecification\": {\n                      \"VolumeType\": \"gp2\",\n                      \"SizeInGB\": 32\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"ResultPath\": \"$.CreateClusterResult\",\n      \"Next\": \"Run_AD_Script\"\n    },\n    \"Run_AD_Script\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Enable AD Integration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar\",\n            \"Args\": [\n              \"s3://bkun-script/emr-harden-amzn-linux-dp-uat-1_1.sh\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Execute_Prerequisites\"\n    },\n    \"Should_Execute_Prerequisites\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.EMRClusterType\",\n          \"StringEquals\": \"etl\",\n          \"Next\": \"Execute_ETL_Prequisite\"\n        },\n        {\n          \"Not\": {\n            \"Variable\": \"$.InputParam.EMRClusterType\",\n            \"StringEquals\": \"etl\"\n          },\n          \"Next\": \"Execute_Other_Prequisite\"\n        }\n      ]\n    },\n    \"Execute_ETL_Prequisite\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute ETL prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_etl_prerequisites_commands.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Execute_Other_Prequisite\": {\n      \"Type\": \"Pass\",\n      \"Result\": \"Execute_Other_Prequisite\",\n      \"ResultPath\": \"$.executeResults\",\n      \"Next\": \"Merge_Results\"\n    },\n    \"Merge_Results\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.CreateClusterResult.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Merge_Result_From_Lambda\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.lambdaResult.Payload.ClusterId\"\n      },\n      \"ResultPath\": \"$.mergeResults\",\n      \"Next\": \"Process_Input_Parameters\"\n    },\n    \"Process_Input_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.mergeResults.ClusterId\"\n      },\n      \"ResultPath\": \"$.processResults\",\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"before_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-emr-setup-stepfunction.module.bkun-dgea-etl-emr-cluster-setup-stepfunction",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_sfn_state_machine",
		},
		{
			"address": "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction.aws_sfn_state_machine.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
					"creation_date": "2021-08-17T05:19:13Z",
					"definition":    "{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/start_job_execution.sh\"\n                    },\n                    {\n                        \"Arg3.$\": \"$.folderName\"\n                    },\n                    {\n                        \"Arg4.$\": \"$.workflowName\"\n                    },\n                    {\n                        \"Arg5.$\": \"$.executionTime\"\n                    },\n                    {\n                        \"Arg6.$\": \"$.UDFParameter\"\n                    },\n                    {\n                        \"Arg7\": \"prod1\"\n                    },\n                    {\n                        \"Arg8.$\": \"$.additionalParameter\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run ETL\"\n    },\n    \"Run ETL\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-etl-stepfunction",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-etl-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-etl-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"after_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
				"after_unknown": {},
				"before": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
					"creation_date": "2021-08-17T05:19:13Z",
					"definition":    "{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/start_job_execution.sh\"\n                    },\n                    {\n                        \"Arg3.$\": \"$.folderName\"\n                    },\n                    {\n                        \"Arg4.$\": \"$.workflowName\"\n                    },\n                    {\n                        \"Arg5.$\": \"$.executionTime\"\n                    },\n                    {\n                        \"Arg6.$\": \"$.UDFParameter\"\n                    },\n                    {\n                        \"Arg7\": \"prod1\"\n                    },\n                    {\n                        \"Arg8.$\": \"$.additionalParameter\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run ETL\"\n    },\n    \"Run ETL\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-stepfunction",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-etl-stepfunction",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-etl-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-etl-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"before_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-etl-stepfunction.module.bkun-dgea-etl-stepfunction",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_sfn_state_machine",
		},
		{
			"address": "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy.aws_sfn_state_machine.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
					"creation_date": "2021-08-17T05:19:14Z",
					"definition":    "\n{\n  \"Comment\": \"Step function to move maskOut data to landing layer\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForCopy\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/copy_masked_data_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.maskOutBackuptargetPath\"\n            }\n          ]\n        }\n\t\t}\n      },\n     \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"masked_out_data_backup\"\n    },\n    \"masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"copy_maskout_data_to_landing\"\n    },\n    \"copy_maskout_data_to_landing\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForCopy.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.snappyCopyResult\",\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-maskout-data-copy",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-maskout-data-copy",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-maskout-data-copy",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"after_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
				"after_unknown": {},
				"before": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
					"creation_date": "2021-08-17T05:19:14Z",
					"definition":    "\n{\n  \"Comment\": \"Step function to move maskOut data to landing layer\",\n  \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"TerminateCluster.$\": \"$.TerminateCluster\",\n        \"FormattedInputsForCopy\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/copy_masked_data_to_redacted.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.targetPath\"\n            }\n          ]\n        },\n        \"FormattedInputsForMaskOutBackup\": {\n          \"Args\": [\n            {\n              \"Arg1\": \"bash\"\n            },\n            {\n              \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_mask_out_data_backup.sh\"\n            },\n            {\n              \"Arg3\": \"prod1\"\n            },\n            {\n              \"Arg4.$\": \"$.sourcePath\"\n            },\n            {\n              \"Arg5.$\": \"$.maskOutBackuptargetPath\"\n            }\n          ]\n        }\n\t\t}\n      },\n     \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"prod1\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"masked_out_data_backup\"\n    },\n    \"masked_out_data_backup\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForMaskOutBackup.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.maskedBackupResult\",\n      \"Next\": \"copy_maskout_data_to_landing\"\n    },\n    \"copy_maskout_data_to_landing\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"The first step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForCopy.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": \"$.snappyCopyResult\",\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-maskout-data-copy",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-maskout-data-copy",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-maskout-data-copy",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-maskout-data-copy",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"before_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-maskout-data-copy.module.bkun-dgea-maskout-data-copy",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_sfn_state_machine",
		},
		{
			"address": "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction.aws_sfn_state_machine.this",
			"change": {
				"actions": [
					"no-op",
				],
				"after": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"creation_date": "2021-08-17T05:19:13Z",
					"definition":    "\n{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_start_s3_to_redshift_migration.sh\"\n                    },\n                    {\n                         \"Arg3\": \"prod1\"\n                    },\n\n                    {\n                        \"Arg4.$\": \"$.InputFileName\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_S3_to_Redshift_Migration\"\n    },\n    \"Run_S3_to_Redshift_Migration\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_S3_to_Redshift_Migration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"after_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
				"after_unknown": {},
				"before": {
					"arn":           "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"creation_date": "2021-08-17T05:19:13Z",
					"definition":    "\n{\n  \"Comment\": \"Step Function to set up EMR for Data transfer activities\",\n \"StartAt\": \"Process_User_Parameters\",\n  \"States\": {\n    \"Process_User_Parameters\": {\n      \"Type\": \"Pass\",\n      \"Parameters\": {\n\t  \"InputParam\": {\n        \"Payload\": {\n          \"id.$\": \"$.Payload.id\"\n        },\n        \"EMRClusterType.$\": \"$.EMRClusterType\",\n        \"CoreInstanceCount.$\": \"$.CoreInstanceCount\",\n        \"InstanceType.$\": \"$.InstanceType\",\n        \"FormattedInputsForETL\":{\n           \"Args\": [\n                    {\n                        \"Arg1\": \"bash\"\n                    },\n                    {\n                        \"Arg2\": \"/home/hadoop/data-platform/bkun_dgea_start_s3_to_redshift_migration.sh\"\n                    },\n                    {\n                         \"Arg3\": \"prod1\"\n                    },\n\n                    {\n                        \"Arg4.$\": \"$.InputFileName\"\n                    }\n           ]\n        }\n\t\t}\n      },\n      \"Next\": \"Get_EMR_Cluster\"\n    },\n    \"Get_EMR_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::states:startExecution.sync:2\",\n      \"Parameters\": {\n        \"StateMachineArn\": \"arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-etl-emr-cluster-setup-stepfunction\",\n        \"Input\": {\n          \"InputParam.$\": \"$.InputParam\",\n          \"NeedCallback\": false,\n          \"AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$\": \"$$.Execution.Id\"\n        }\n      },\n      \"ResultPath\": \"$.stepResult\",\n      \"Next\": \"Run_Prerequisites\"\n    },\n    \"Run_Prerequisites\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Execute prerequisite step\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args\": [\n              \"bash\",\n              \"/home/hadoop/data-platform/bkun_dgea_data_ingestion_prerequisite.sh\",\n              \"uat\"\n            ]\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Run_S3_to_Redshift_Migration\"\n    },\n    \"Run_S3_to_Redshift_Migration\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:addStep.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\",\n        \"Step\": {\n          \"Name\": \"Run_S3_to_Redshift_Migration\",\n          \"ActionOnFailure\": \"CONTINUE\",\n          \"HadoopJarStep\": {\n            \"Jar\": \"command-runner.jar\",\n            \"Args.$\": \"$.InputParam.FormattedInputsForETL.Args[*][*]\"\n          }\n        }\n      },\n      \"ResultPath\": null,\n      \"Next\": \"Should_Terminate_Cluster\"\n    },\n    \"Should_Terminate_Cluster\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Terminate_Cluster\"\n        },\n        {\n          \"Variable\": \"$.InputParam.TerminateCluster\",\n          \"BooleanEquals\": false,\n          \"Next\": \"Wrapping_Up\"\n        }\n      ],\n      \"Default\": \"Wrapping_Up\"\n    },\n    \"Terminate_Cluster\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::elasticmapreduce:terminateCluster.sync\",\n      \"Parameters\": {\n        \"ClusterId.$\": \"$.stepResult.Output.processResults.ClusterId\"\n      },\n      \"Next\": \"Wrapping_Up\"\n    },\n    \"Wrapping_Up\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n",
					"id":            "arn:aws:states:us-east-1:630953916312:stateMachine:bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"logging_configuration": [
						{
							"include_execution_data": false,
							"level":                  "OFF",
							"log_destination":        "",
						},
					],
					"name":     "bkun-dgea-prod1-s3-to-redshift-stepfunction",
					"role_arn": "arn:aws:iam::630953916312:role/bkun-dgea-prod1-data-migration-stepfunction-role",
					"status":   "ACTIVE",
					"tags": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tags_all": {
						"ApplicationID":   "0",
						"ApplicationName": "Data-Processing",
						"ApplicationRole": "",
						"BackupTier":      "NA",
						"BusinessLine":    "Data Governance And Eprise. Arch",
						"CostCenter":      "1006703",
						"Environment":     "Test QA",
						"Name":            "bkun-dgea-prod1-s3-to-redshift-stepfunction",
						"ProjectID":       "PRJ0010800",
						"Tier":            "Not Applicable",
					},
					"tracing_configuration": [
						{
							"enabled": false,
						},
					],
					"type": "STANDARD",
				},
				"before_sensitive": {
					"logging_configuration": [
						{},
					],
					"tags":     {},
					"tags_all": {},
					"tracing_configuration": [
						{},
					],
				},
			},
			"mode":           "managed",
			"module_address": "module.bkun-dgea-trigger-redshift-process.module.bkun-dgea-s3-to-redshift-stepfunction",
			"name":           "this",
			"provider_name":  "registry.terraform.io/hashicorp/aws",
			"type":           "aws_sfn_state_machine",
		},
	],
	"terraform_version": "1.0.3",
	"variables": {
		"base_path": {
			"value": "./s3/bkun-dgea-dp-source-artifacts",
		},
		"cluster_database_name": {
			"value": "uat",
		},
		"cluster_master_password": {
			"value": "Hellow$123WE",
		},
		"cluster_master_username": {
			"value": "awsuser",
		},
		"cluster_name": {
			"value": "datamart",
		},
		"cluster_node_type": {
			"value": "dc2.8xlarge",
		},
		"cluster_number_of_nodes": {
			"value": 5,
		},
		"create_kms_key": {
			"value": false,
		},
		"create_sfn_role": {
			"value": true,
		},
		"di_dynamodb_policy_path": {
			"value": "./iam/lambda-function/cross-account.json",
		},
		"dynamodb_email_policy_path": {
			"value": "./iam/lambda-function/bkun-dgea-dynamodb-email-notification-handler/dynamodb_write.json",
		},
		"ec2_dynamodb_policy_path": {
			"value": "./iam/emr-role/ec2-dynamodb-policy.json",
		},
		"ec2_kms_policy_path": {
			"value": "./iam/emr-role/kms.json",
		},
		"ec2_policy_path": {
			"value": "./iam/lambda-function/ec2.json",
		},
		"emr_policy_path": {
			"value": "./iam/lambda-function/emr_cluster.json",
		},
		"encrypted": {
			"value": true,
		},
		"env": {
			"value": "prod1",
		},
		"env_prefix": {
			"value": "bkun-dgea",
		},
		"generic_policy_path": {
			"value": "./iam/emr-role/generic-policy.json",
		},
		"partition_key": {
			"value": "id",
		},
		"ports": {
			"value": {
				"5439": [
					"10.19.0.0/16",
					"192.168.104.0/21",
					"192.168.200.0/21",
					"10.0.0.0/8",
					"10.13.32.0/20",
					"10.13.35.134/32",
					"10.13.35.135/32",
					"10.44.0.0/16",
					"10.39.0.0/16",
				],
			},
		},
		"redshift_subnets": {
			"value": [
				"subnet-07911106ea5728129",
			],
		},
		"s3_key": {
			"value": "terraform/lambda",
		},
		"s3_policy_path": {
			"value": "./iam/emr-role/s3.json",
		},
		"s3_source_bucket_policy_path": {
			"value": "s3/bkun-dgea-dp-source-artifacts/source_bucket_policy.json",
		},
		"security_group_ids": {
			"value": [
				"sg-09fbd003ca2ca62c2",
			],
		},
		"sfn_cw_policy_path": {
			"value": "./iam/step-function/sfn-cw-policy.json",
		},
		"sfn_ec2_policy_path": {
			"value": "./iam/step-function/sfn-ec2-policy.json",
		},
		"sfn_emr_policy_path": {
			"value": "./iam/step-function/sfn-emr-policy.json",
		},
		"sfn_policy_path": {
			"value": "./iam/step-function/policy.json",
		},
		"sfn_s3_policy_path": {
			"value": "./iam/step-function/sfn-s3-policy.json",
		},
		"sfn_subnet_id": {
			"value": "subnet-07911106ea5728129",
		},
		"subnet_ids": {
			"value": [
				"subnet-0f1651bc0380a3db1",
			],
		},
		"tags": {
			"value": {
				"ApplicationID":   "0",
				"ApplicationName": "Data-Processing",
				"ApplicationRole": "",
				"BackupTier":      "NA",
				"BusinessLine":    "Data Governance And Eprise. Arch",
				"CostCenter":      "1006703",
				"Environment":     "Test QA",
				"ProjectID":       "PRJ0010800",
				"Tier":            "Not Applicable",
			},
		},
		"vpc_id": {
			"value": "vpc-05e9bae323d6ed989",
		},
	},
}
